/*
 
 CSS Gradient Editor
 
 Written by Alex Sirota (alex @ iosart.com)

 Copyright (c) Alex Sirota 2010, All Rights Reserved

 Please do not use without permission.

 Portions include software under different licenses





*/
var Prototype={Version:"1.7.2",Browser:(function(){var b=navigator.userAgent;var a=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!a,Opera:a,WebKit:b.indexOf("AppleWebKit/")>-1,Gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(b)}})(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:(function(){var a=window.Element||window.HTMLElement;return !!(a&&a.prototype)})(),SpecificElementExtensions:(function(){if(typeof window.HTMLDivElement!=="undefined"){return true}var c=document.createElement("div"),b=document.createElement("form"),a=false;if(c.__proto__&&(c.__proto__!==b.__proto__)){a=true}c=b=null;return a})()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};if(Prototype.Browser.MobileSafari){Prototype.BrowserFeatures.SpecificElementExtensions=false}var Class=(function(){var d=(function(){for(var e in {toString:1}){if(e==="toString"){return false}}return true})();function a(){}function b(){var h=null,g=$A(arguments);if(Object.isFunction(g[0])){h=g.shift()}function e(){this.initialize.apply(this,arguments)}Object.extend(e,Class.Methods);e.superclass=h;e.subclasses=[];if(h){a.prototype=h.prototype;e.prototype=new a;h.subclasses.push(e)}for(var f=0,j=g.length;f<j;f++){e.addMethods(g[f])}if(!e.prototype.initialize){e.prototype.initialize=Prototype.emptyFunction}e.prototype.constructor=e;return e}function c(l){var g=this.superclass&&this.superclass.prototype,f=Object.keys(l);if(d){if(l.toString!=Object.prototype.toString){f.push("toString")}if(l.valueOf!=Object.prototype.valueOf){f.push("valueOf")}}for(var e=0,h=f.length;e<h;e++){var k=f[e],j=l[k];if(g&&Object.isFunction(j)&&j.argumentNames()[0]=="$super"){var m=j;j=(function(i){return function(){return g[i].apply(this,arguments)}})(k).wrap(m);j.valueOf=(function(i){return function(){return i.valueOf.call(i)}})(m);j.toString=(function(i){return function(){return i.toString.call(i)}})(m)}this.prototype[k]=j}return this}return{create:b,Methods:{addMethods:c}}})();(function(){var y=Object.prototype.toString,k=Object.prototype.hasOwnProperty,z="Null",B="Undefined",K="Boolean",w="Number",v="String",I="Object",i="[object Function]",d="[object Boolean]",j="[object Number]",f="[object String]",b="[object Array]",H="[object Date]",e=window.JSON&&typeof JSON.stringify==="function"&&JSON.stringify(0)==="0"&&typeof JSON.stringify(Prototype.K)==="undefined";var q=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var a=(function(){for(var L in {toString:1}){if(L==="toString"){return false}}return true})();function D(M){switch(M){case null:return z;case (void 0):return B}var L=typeof M;switch(L){case"boolean":return K;case"number":return w;case"string":return v}return I}function h(L,N){for(var M in N){L[M]=N[M]}return L}function l(L){try{if(o(L)){return"undefined"}if(L===null){return"null"}return L.inspect?L.inspect():String(L)}catch(M){if(M instanceof RangeError){return"..."}throw M}}function A(L){return m("",{"":L},[])}function m(U,R,S){var T=R[U];if(D(T)===I&&typeof T.toJSON==="function"){T=T.toJSON(U)}var N=y.call(T);switch(N){case j:case d:case f:T=T.valueOf()}switch(T){case null:return"null";case true:return"true";case false:return"false"}var Q=typeof T;switch(Q){case"string":return T.inspect(true);case"number":return isFinite(T)?String(T):"null";case"object":for(var M=0,L=S.length;M<L;M++){if(S[M]===T){throw new TypeError("Cyclic reference to '"+T+"' in object")}}S.push(T);var P=[];if(N===b){for(var M=0,L=T.length;M<L;M++){var O=m(M,T,S);P.push(typeof O==="undefined"?"null":O)}P="["+P.join(",")+"]"}else{var V=Object.keys(T);for(var M=0,L=V.length;M<L;M++){var U=V[M],O=m(U,T,S);if(typeof O!=="undefined"){P.push(U.inspect(true)+":"+O)}}P="{"+P.join(",")+"}"}S.pop();return P}}function J(L){return JSON.stringify(L)}function C(L){return $H(L).toQueryString()}function p(L){return L&&L.toHTML?L.toHTML():String.interpret(L)}function x(L){if(D(L)!==I){throw new TypeError()}var N=[];for(var O in L){if(k.call(L,O)){N.push(O)}}if(a){for(var M=0;O=q[M];M++){if(k.call(L,O)){N.push(O)}}}return N}function G(L){var M=[];for(var N in L){M.push(L[N])}return M}function s(L){return h({},L)}function E(L){return !!(L&&L.nodeType==1)}function u(L){return y.call(L)===b}var c=(typeof Array.isArray=="function")&&Array.isArray([])&&!Array.isArray({});if(c){u=Array.isArray}function r(L){return L instanceof Hash}function n(L){return y.call(L)===i}function g(L){return y.call(L)===f}function F(L){return y.call(L)===j}function t(L){return y.call(L)===H}function o(L){return typeof L==="undefined"}h(Object,{extend:h,inspect:l,toJSON:e?J:A,toQueryString:C,toHTML:p,keys:Object.keys||x,values:G,clone:s,isElement:E,isArray:u,isHash:r,isFunction:n,isString:g,isNumber:F,isDate:t,isUndefined:o})})();Object.extend(Function.prototype,(function(){var l=Array.prototype.slice;function d(p,m){var o=p.length,n=m.length;while(n--){p[o+n]=m[n]}return p}function j(n,m){n=l.call(n,0);return d(n,m)}function g(){var m=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return m.length==1&&!m[0]?[]:m}function h(o){if(arguments.length<2&&Object.isUndefined(arguments[0])){return this}if(!Object.isFunction(this)){throw new TypeError("The object is not callable.")}var q=function(){};var m=this,n=l.call(arguments,1);var p=function(){var r=j(n,arguments);var s=this instanceof p?this:o;return m.apply(s,r)};q.prototype=this.prototype;p.prototype=new q();return p}function f(o){var m=this,n=l.call(arguments,1);return function(q){var p=d([q||window.event],n);return m.apply(o,p)}}function k(){if(!arguments.length){return this}var m=this,n=l.call(arguments,0);return function(){var o=j(n,arguments);return m.apply(this,o)}}function e(o){var m=this,n=l.call(arguments,1);o=o*1000;return window.setTimeout(function(){return m.apply(m,n)},o)}function a(){var m=d([0.01],arguments);return this.delay.apply(this,m)}function c(n){var m=this;return function(){var o=d([m.bind(this)],arguments);return n.apply(this,o)}}function b(){if(this._methodized){return this._methodized}var m=this;return this._methodized=function(){var n=d([this],arguments);return m.apply(null,n)}}var i={argumentNames:g,bindAsEventListener:f,curry:k,delay:e,defer:a,wrap:c,methodize:b};if(!Function.prototype.bind){i.bind=h}return i})());(function(c){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function a(){return this.toISOString()}if(!c.toISOString){c.toISOString=b}if(!c.toJSON){c.toJSON=a}})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(b,a){this.callback=b;this.frequency=a;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},execute:function(){this.callback(this)},stop:function(){if(!this.timer){return}clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(a){this.currentlyExecuting=false;throw a}}}});Object.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,(function(){var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&typeof JSON.parse==="function"&&JSON.parse('{"test": true}').test;function prepareReplacement(replacement){if(Object.isFunction(replacement)){return replacement}var template=new Template(replacement);return function(match){return template.evaluate(match)}}function isNonEmptyRegExp(regexp){return regexp.source&&regexp.source!=="(?:)"}function gsub(pattern,replacement){var result="",source=this,match;replacement=prepareReplacement(replacement);if(Object.isString(pattern)){pattern=RegExp.escape(pattern)}if(!(pattern.length||isNonEmptyRegExp(pattern))){replacement=replacement("");return replacement+source.split("").join(replacement)+replacement}while(source.length>0){match=source.match(pattern);if(match&&match[0].length>0){result+=source.slice(0,match.index);result+=String.interpret(replacement(match));source=source.slice(match.index+match[0].length)}else{result+=source,source=""}}return result}function sub(pattern,replacement,count){replacement=prepareReplacement(replacement);count=Object.isUndefined(count)?1:count;return this.gsub(pattern,function(match){if(--count<0){return match[0]}return replacement(match)})}function scan(pattern,iterator){this.gsub(pattern,iterator);return String(this)}function truncate(length,truncation){length=length||30;truncation=Object.isUndefined(truncation)?"...":truncation;return this.length>length?this.slice(0,length-truncation.length)+truncation:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var matchAll=new RegExp(Prototype.ScriptFragment,"img"),matchOne=new RegExp(Prototype.ScriptFragment,"im");return(this.match(matchAll)||[]).map(function(scriptTag){return(scriptTag.match(matchOne)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(separator){var match=this.strip().match(/([^?#]*)(#.*)?$/);if(!match){return{}}return match[1].split(separator||"&").inject({},function(hash,pair){if((pair=pair.split("="))[0]){var key=decodeURIComponent(pair.shift()),value=pair.length>1?pair.join("="):pair[0];if(value!=undefined){value=value.gsub("+"," ");value=decodeURIComponent(value)}if(key in hash){if(!Object.isArray(hash[key])){hash[key]=[hash[key]]}hash[key].push(value)}else{hash[key]=value}}return hash})}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(count){return count<1?"":new Array(count+1).join(this)}function camelize(){return this.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(useDoubleQuotes){var escapedString=this.replace(/[\x00-\x1f\\]/g,function(character){if(character in String.specialChar){return String.specialChar[character]}return"\\u00"+character.charCodeAt().toPaddedString(2,16)});if(useDoubleQuotes){return'"'+escapedString.replace(/"/g,'\\"')+'"'}return"'"+escapedString.replace(/'/g,"\\'")+"'"}function unfilterJSON(filter){return this.replace(filter||Prototype.JSONFilter,"$1")}function isJSON(){var str=this;if(str.blank()){return false}str=str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");str=str.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");str=str.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return(/^[\],:{}\s]*$/).test(str)}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(cx.test(json)){json=json.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}try{if(!sanitize||json.isJSON()){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function parseJSON(){var json=this.unfilterJSON();return JSON.parse(json)}function include(pattern){return this.indexOf(pattern)>-1}function startsWith(pattern,position){position=Object.isNumber(position)?position:0;return this.lastIndexOf(pattern,position)===position}function endsWith(pattern,position){pattern=String(pattern);position=Object.isNumber(position)?position:this.length;if(position<0){position=0}if(position>this.length){position=this.length}var d=position-pattern.length;return d>=0&&this.indexOf(pattern,d)===d}function empty(){return this==""}function blank(){return/^\s*$/.test(this)}function interpolate(object,pattern){return new Template(this,pattern).evaluate(object)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:String.prototype.startsWith||startsWith,endsWith:String.prototype.endsWith||endsWith,empty:empty,blank:blank,interpolate:interpolate}})());var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){if(a&&Object.isFunction(a.toTemplateReplacements)){a=a.toTemplateReplacements()}return this.template.gsub(this.pattern,function(d){if(a==null){return(d[1]+"")}var f=d[1]||"";if(f=="\\"){return d[2]}var b=a,g=d[3],e=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;d=e.exec(g);if(d==null){return f}while(d!=null){var c=d[1].startsWith("[")?d[2].replace(/\\\\]/g,"]"):d[1];b=b[c];if(null==b||""==d[3]){break}g=g.substring("["==d[3]?d[1].length:d[0].length);d=e.exec(g)}return f+String.interpret(b)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};var Enumerable=(function(){function c(x,w){try{this._each(x,w)}catch(y){if(y!=$break){throw y}}return this}function r(z,y,x){var w=-z,A=[],B=this.toArray();if(z<1){return B}while((w+=z)<B.length){A.push(B.slice(w,w+z))}return A.collect(y,x)}function b(y,x){y=y||Prototype.K;var w=true;this.each(function(A,z){w=w&&!!y.call(x,A,z,this);if(!w){throw $break}},this);return w}function i(y,x){y=y||Prototype.K;var w=false;this.each(function(A,z){if(w=!!y.call(x,A,z,this)){throw $break}},this);return w}function j(y,x){y=y||Prototype.K;var w=[];this.each(function(A,z){w.push(y.call(x,A,z,this))},this);return w}function t(y,x){var w;this.each(function(A,z){if(y.call(x,A,z,this)){w=A;throw $break}},this);return w}function h(y,x){var w=[];this.each(function(A,z){if(y.call(x,A,z,this)){w.push(A)}},this);return w}function g(z,y,x){y=y||Prototype.K;var w=[];if(Object.isString(z)){z=new RegExp(RegExp.escape(z))}this.each(function(B,A){if(z.match(B)){w.push(y.call(x,B,A,this))}},this);return w}function a(w){if(Object.isFunction(this.indexOf)&&this.indexOf(w)!=-1){return true}var x=false;this.each(function(y){if(y==w){x=true;throw $break}});return x}function q(x,w){w=Object.isUndefined(w)?null:w;return this.eachSlice(x,function(y){while(y.length<x){y.push(w)}return y})}function l(w,y,x){this.each(function(A,z){w=y.call(x,w,A,z,this)},this);return w}function v(x){var w=$A(arguments).slice(1);return this.map(function(y){return y[x].apply(y,w)})}function p(y,x){y=y||Prototype.K;var w;this.each(function(A,z){A=y.call(x,A,z,this);if(w==null||A>=w){w=A}},this);return w}function n(y,x){y=y||Prototype.K;var w;this.each(function(A,z){A=y.call(x,A,z,this);if(w==null||A<w){w=A}},this);return w}function e(z,x){z=z||Prototype.K;var y=[],w=[];this.each(function(B,A){(z.call(x,B,A,this)?y:w).push(B)},this);return[y,w]}function f(x){var w=[];this.each(function(y){w.push(y[x])});return w}function d(y,x){var w=[];this.each(function(A,z){if(!y.call(x,A,z,this)){w.push(A)}},this);return w}function m(x,w){return this.map(function(z,y){return{value:z,criteria:x.call(w,z,y,this)}},this).sort(function(B,A){var z=B.criteria,y=A.criteria;return z<y?-1:z>y?1:0}).pluck("value")}function o(){return this.map()}function s(){var x=Prototype.K,w=$A(arguments);if(Object.isFunction(w.last())){x=w.pop()}var y=[this].concat(w).map($A);return this.map(function(A,z){return x(y.pluck(z))})}function k(){return this.toArray().length}function u(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:c,eachSlice:r,all:b,every:b,any:i,some:i,collect:j,map:j,detect:t,findAll:h,select:h,filter:h,grep:g,include:a,member:a,inGroupsOf:q,inject:l,invoke:v,max:p,min:n,partition:e,pluck:f,reject:d,sortBy:m,toArray:o,entries:o,zip:s,size:k,inspect:u,find:t}})();function $A(c){if(!c){return[]}if("toArray" in Object(c)){return c.toArray()}var b=c.length||0,a=new Array(b);while(b--){a[b]=c[b]}return a}function $w(a){if(!Object.isString(a)){return[]}a=a.strip();return a?a.split(/\s+/):[]}Array.from=$A;(function(){var x=Array.prototype,p=x.slice,r=x.forEach;function b(D,C){for(var B=0,E=this.length>>>0;B<E;B++){if(B in this){D.call(C,this[B],B,this)}}}if(!r){r=b}function o(){this.length=0;return this}function d(){return this[0]}function g(){return this[this.length-1]}function k(){return this.select(function(B){return B!=null})}function A(){return this.inject([],function(C,B){if(Object.isArray(B)){return C.concat(B.flatten())}C.push(B);return C})}function j(){var B=p.call(arguments,0);return this.select(function(C){return !B.include(C)})}function f(B){return(B===false?this.toArray():this)._reverse()}function n(B){return this.inject([],function(E,D,C){if(0==C||(B?E.last()!=D:!E.include(D))){E.push(D)}return E})}function s(B){return this.uniq().findAll(function(C){return B.indexOf(C)!==-1})}function v(){return p.call(this,0)}function l(){return this.length}function y(){return"["+this.map(Object.inspect).join(", ")+"]"}function a(E,C){if(this==null){throw new TypeError()}var F=Object(this),D=F.length>>>0;if(D===0){return -1}C=Number(C);if(isNaN(C)){C=0}else{if(C!==0&&isFinite(C)){C=(C>0?1:-1)*Math.floor(Math.abs(C))}}if(C>D){return -1}var B=C>=0?C:Math.max(D-Math.abs(C),0);for(;B<D;B++){if(B in F&&F[B]===E){return B}}return -1}function q(E,C){if(this==null){throw new TypeError()}var F=Object(this),D=F.length>>>0;if(D===0){return -1}if(!Object.isUndefined(C)){C=Number(C);if(isNaN(C)){C=0}else{if(C!==0&&isFinite(C)){C=(C>0?1:-1)*Math.floor(Math.abs(C))}}}else{C=D}var B=C>=0?Math.min(C,D-1):D-Math.abs(C);for(;B>=0;B--){if(B in F&&F[B]===E){return B}}return -1}function c(I){var G=[],H=p.call(arguments,0),J,C=0;H.unshift(this);for(var F=0,B=H.length;F<B;F++){J=H[F];if(Object.isArray(J)&&!("callee" in J)){for(var E=0,D=J.length;E<D;E++){if(E in J){G[C]=J[E]}C++}}else{G[C++]=J}}G.length=C;return G}function u(B){return function(){if(arguments.length===0){return B.call(this,Prototype.K)}else{if(arguments[0]===undefined){var C=p.call(arguments,1);C.unshift(Prototype.K);return B.apply(this,C)}else{return B.apply(this,arguments)}}}}function w(F){if(this==null){throw new TypeError()}F=F||Prototype.K;var B=Object(this);var E=[],D=arguments[1],H=0;for(var C=0,G=B.length>>>0;C<G;C++){if(C in B){E[H]=F.call(D,B[C],C,B)}H++}E.length=H;return E}if(x.map){w=u(Array.prototype.map)}function h(F){if(this==null||!Object.isFunction(F)){throw new TypeError()}var B=Object(this);var E=[],D=arguments[1],H;for(var C=0,G=B.length>>>0;C<G;C++){if(C in B){H=B[C];if(F.call(D,H,C,B)){E.push(H)}}}return E}if(x.filter){h=Array.prototype.filter}function i(E){if(this==null){throw new TypeError()}E=E||Prototype.K;var D=arguments[1];var B=Object(this);for(var C=0,F=B.length>>>0;C<F;C++){if(C in B&&E.call(D,B[C],C,B)){return true}}return false}if(x.some){var i=u(Array.prototype.some)}function z(E){if(this==null){throw new TypeError()}E=E||Prototype.K;var D=arguments[1];var B=Object(this);for(var C=0,F=B.length>>>0;C<F;C++){if(C in B&&!E.call(D,B[C],C,B)){return false}}return true}if(x.every){var z=u(Array.prototype.every)}var t=x.reduce;function m(B,D){D=D||Prototype.K;var C=arguments[2];return t.call(this,D.bind(C),B)}if(!x.reduce){var m=Enumerable.inject}Object.extend(x,Enumerable);if(!x._reverse){x._reverse=x.reverse}Object.extend(x,{_each:r,map:w,collect:w,select:h,filter:h,findAll:h,some:i,any:i,every:z,all:z,inject:m,clear:o,first:d,last:g,compact:k,flatten:A,without:j,reverse:f,uniq:n,intersect:s,clone:v,toArray:v,size:l,inspect:y});var e=(function(){return[].concat(arguments)[0][0]!==1})(1,2);if(e){x.concat=c}if(!x.indexOf){x.indexOf=a}if(!x.lastIndexOf){x.lastIndexOf=q}})();function $H(a){return new Hash(a)}var Hash=Class.create(Enumerable,(function(){function e(p){this._object=Object.isHash(p)?p.toObject():Object.clone(p)}function f(s,r){var q=0;for(var p in this._object){var t=this._object[p],u=[p,t];u.key=p;u.value=t;s.call(r,u,q);q++}}function j(p,q){return this._object[p]=q}function c(p){if(this._object[p]!==Object.prototype[p]){return this._object[p]}}function m(p){var q=this._object[p];delete this._object[p];return q}function o(){return Object.clone(this._object)}function n(){return this.pluck("key")}function l(){return this.pluck("value")}function g(q){var p=this.detect(function(r){return r.value===q});return p&&p.key}function i(p){return this.clone().update(p)}function d(p){return new Hash(p).inject(this,function(q,r){q.set(r.key,r.value);return q})}function b(p,q){if(Object.isUndefined(q)){return p}q=String.interpret(q);q=q.gsub(/(\r)?\n/,"\r\n");q=encodeURIComponent(q);q=q.gsub(/%20/,"+");return p+"="+q}function a(){return this.inject([],function(t,w){var s=encodeURIComponent(w.key),q=w.value;if(q&&typeof q=="object"){if(Object.isArray(q)){var v=[];for(var r=0,p=q.length,u;r<p;r++){u=q[r];v.push(b(s,u))}return t.concat(v)}}else{t.push(b(s,q))}return t}).join("&")}function k(){return"#<Hash:{"+this.map(function(p){return p.map(Object.inspect).join(": ")}).join(", ")+"}>"}function h(){return new Hash(this)}return{initialize:e,_each:f,set:j,get:c,unset:m,toObject:o,toTemplateReplacements:o,keys:n,values:l,index:g,merge:i,update:d,toQueryString:a,inspect:k,toJSON:o,clone:h}})());Hash.from=$H;Object.extend(Number.prototype,(function(){function d(){return this.toPaddedString(2,16)}function b(){return this+1}function h(j,i){$R(0,this,true).each(j,i);return this}function g(k,j){var i=this.toString(j||10);return"0".times(k-i.length)+i}function a(){return Math.abs(this)}function c(){return Math.round(this)}function e(){return Math.ceil(this)}function f(){return Math.floor(this)}return{toColorPart:d,succ:b,times:h,toPaddedString:g,abs:a,round:c,ceil:e,floor:f}})());function $R(c,a,b){return new ObjectRange(c,a,b)}var ObjectRange=Class.create(Enumerable,(function(){function b(f,d,e){this.start=f;this.end=d;this.exclusive=e}function c(f,e){var g=this.start,d;for(d=0;this.include(g);d++){f.call(e,g,d);g=g.succ()}}function a(d){if(d<this.start){return false}if(this.exclusive){return d<this.end}return d<=this.end}return{initialize:b,_each:c,include:a}})());var Abstract={};var Try={these:function(){var c;for(var b=0,d=arguments.length;b<d;b++){var a=arguments[b];try{c=a();break}catch(f){}}return c}};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(b,a){this.responders._each(b,a)},register:function(a){if(!this.include(a)){this.responders.push(a)}},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(d,b,c,a){this.each(function(f){if(Object.isFunction(f[d])){try{f[d].apply(f,[b,c,a])}catch(g){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters)){this.options.parameters=this.options.parameters.toObject()}}});Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,b,a){$super(a);this.transport=Ajax.getTransport();this.request(b)},request:function(b){this.url=b;this.method=this.options.method;var d=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){d+=(d?"&":"")+"_method="+this.method;this.method="post"}if(d&&this.method==="get"){this.url+=(this.url.include("?")?"&":"?")+d}this.parameters=d.toQueryParams();try{var a=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(a)}Ajax.Responders.dispatch("onCreate",this,a);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){this.respondToReadyState.bind(this).defer(1)}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?(this.options.postBody||d):null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;if(a>1&&!((a==4)&&this._complete)){this.respondToReadyState(this.transport.readyState)}},setRequestHeaders:function(){var e={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){e["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){e.Connection="close"}}if(typeof this.options.requestHeaders=="object"){var c=this.options.requestHeaders;if(Object.isFunction(c.push)){for(var b=0,d=c.length;b<d;b+=2){e[c[b]]=c[b+1]}}else{$H(c).each(function(f){e[f.key]=f.value})}}for(var a in e){if(e[a]!=null){this.transport.setRequestHeader(a,e[a])}}},success:function(){var a=this.getStatus();return !a||(a>=200&&a<300)||a==304},getStatus:function(){try{if(this.transport.status===1223){return 204}return this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){var c=Ajax.Request.Events[a],b=new Ajax.Response(this);if(c=="Complete"){try{this._complete=true;(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var f=b.getHeader("Content-type");if(this.options.evalJS=="force"||(this.options.evalJS&&this.isSameOrigin()&&f&&f.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))){this.evalResponse()}}try{(this.options["on"+c]||Prototype.emptyFunction)(b,b.headerJSON);Ajax.Responders.dispatch("on"+c,this,b,b.headerJSON)}catch(d){this.dispatchException(d)}if(c=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return !a||(a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""}))},getHeader:function(a){try{return this.transport.getResponseHeader(a)||null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(c){this.request=c;var d=this.transport=c.transport,a=this.readyState=d.readyState;if((a>2&&!Prototype.Browser.IE)||a==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(d.responseText);this.headerJSON=this._getHeaderJSON()}if(a==4){var b=d.responseXML;this.responseXML=Object.isUndefined(b)?null:b;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a){return null}try{a=decodeURIComponent(escape(a))}catch(b){}try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||(a.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json"))||this.responseText.blank()){return null}try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,a,c,b){this.container={success:(a.success||a),failure:(a.failure||(a.success?null:a))};b=Object.clone(b);var d=b.onComplete;b.onComplete=(function(e,f){this.updateContent(e.responseText);if(Object.isFunction(d)){d(e,f)}}).bind(this);$super(c,b)},updateContent:function(d){var c=this.container[this.success()?"success":"failure"],a=this.options;if(!a.evalScripts){d=d.stripScripts()}if(c=$(c)){if(a.insertion){if(Object.isString(a.insertion)){var b={};b[a.insertion]=d;c.insert(b)}else{a.insertion(c,d)}}else{c.update(d)}}}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,a,c,b){$super(b);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=a;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(a){if(this.options.decay){this.decay=(a.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=a.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});(function(a8){var aE;var a1=Array.prototype.slice;var av=document.createElement("div");function aZ(bp){if(arguments.length>1){for(var F=0,br=[],bq=arguments.length;F<bq;F++){br.push(aZ(arguments[F]))}return br}if(Object.isString(bp)){bp=document.getElementById(bp)}return aF.extend(bp)}a8.$=aZ;if(!a8.Node){a8.Node={}}if(!a8.Node.ELEMENT_NODE){Object.extend(a8.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12})}var r={};function aQ(F,i){if(F==="select"){return false}if("type" in i){return false}return true}var d=(function(){try{var i=document.createElement('<input name="x">');return i.tagName.toLowerCase()==="input"&&i.name==="x"}catch(F){return false}})();var aI=a8.Element;function aF(F,i){i=i||{};F=F.toLowerCase();if(d&&i.name){F="<"+F+' name="'+i.name+'">';delete i.name;return aF.writeAttribute(document.createElement(F),i)}if(!r[F]){r[F]=aF.extend(document.createElement(F))}var bp=aQ(F,i)?r[F].cloneNode(false):document.createElement(F);return aF.writeAttribute(bp,i)}a8.Element=aF;Object.extend(a8.Element,aI||{});if(aI){a8.Element.prototype=aI.prototype}aF.Methods={ByTag:{},Simulated:{}};var a3={};var H={id:"id",className:"class"};function ba(F){F=aZ(F);var i="<"+F.tagName.toLowerCase();var bp,br;for(var bq in H){bp=H[bq];br=(F[bq]||"").toString();if(br){i+=" "+bp+"="+br.inspect(true)}}return i+">"}a3.inspect=ba;function v(i){return aZ(i).style.display!=="none"}function ax(F,i){F=aZ(F);if(Object.isUndefined(i)){i=!aF.visible(F)}aF[i?"show":"hide"](F);return F}function aH(i){i=aZ(i);i.style.display="none";return i}function j(i){i=aZ(i);i.style.display="";return i}Object.extend(a3,{visible:v,toggle:ax,hide:aH,show:j});function ad(i){i=aZ(i);i.parentNode.removeChild(i);return i}var aT=(function(){var i=document.createElement("select"),F=true;i.innerHTML='<option value="test">test</option>';if(i.options&&i.options[0]){F=i.options[0].nodeName.toUpperCase()!=="OPTION"}i=null;return F})();var I=(function(){try{var i=document.createElement("table");if(i&&i.tBodies){i.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var bp=typeof i.tBodies[0]=="undefined";i=null;return bp}}catch(F){return true}})();var a2=(function(){try{var i=document.createElement("div");i.innerHTML="<link />";var bp=(i.childNodes.length===0);i=null;return bp}catch(F){return true}})();var x=aT||I||a2;var aq=(function(){var i=document.createElement("script"),bp=false;try{i.appendChild(document.createTextNode(""));bp=!i.firstChild||i.firstChild&&i.firstChild.nodeType!==3}catch(F){bp=true}i=null;return bp})();function O(br,bt){br=aZ(br);var bu=br.getElementsByTagName("*"),bq=bu.length;while(bq--){Z(bu[bq])}if(bt&&bt.toElement){bt=bt.toElement()}if(Object.isElement(bt)){return br.update().insert(bt)}bt=Object.toHTML(bt);var bp=br.tagName.toUpperCase();if(bp==="SCRIPT"&&aq){br.text=bt;return br}if(x){if(bp in L.tags){while(br.firstChild){br.removeChild(br.firstChild)}var F=t(bp,bt.stripScripts());for(var bq=0,bs;bs=F[bq];bq++){br.appendChild(bs)}}else{if(a2&&Object.isString(bt)&&bt.indexOf("<link")>-1){while(br.firstChild){br.removeChild(br.firstChild)}var F=t(bp,bt.stripScripts(),true);for(var bq=0,bs;bs=F[bq];bq++){br.appendChild(bs)}}else{br.innerHTML=bt.stripScripts()}}}else{br.innerHTML=bt.stripScripts()}bt.evalScripts.bind(bt).defer();return br}function ah(F,bp){F=aZ(F);if(bp&&bp.toElement){bp=bp.toElement()}else{if(!Object.isElement(bp)){bp=Object.toHTML(bp);var i=F.ownerDocument.createRange();i.selectNode(F);bp.evalScripts.bind(bp).defer();bp=i.createContextualFragment(bp.stripScripts())}}F.parentNode.replaceChild(bp,F);return F}var L={before:function(i,F){i.parentNode.insertBefore(F,i)},top:function(i,F){i.insertBefore(F,i.firstChild)},bottom:function(i,F){i.appendChild(F)},after:function(i,F){i.parentNode.insertBefore(F,i.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};var aJ=L.tags;Object.extend(aJ,{THEAD:aJ.TBODY,TFOOT:aJ.TBODY,TH:aJ.TD});function ao(bp,bs){bp=aZ(bp);if(bs&&bs.toElement){bs=bs.toElement()}if(Object.isElement(bs)){bp.parentNode.replaceChild(bs,bp);return bp}bs=Object.toHTML(bs);var br=bp.parentNode,F=br.tagName.toUpperCase();if(F in L.tags){var bt=aF.next(bp);var i=t(F,bs.stripScripts());br.removeChild(bp);var bq;if(bt){bq=function(bu){br.insertBefore(bu,bt)}}else{bq=function(bu){br.appendChild(bu)}}i.each(bq)}else{bp.outerHTML=bs.stripScripts()}bs.evalScripts.bind(bs).defer();return bp}if("outerHTML" in document.documentElement){ah=ao}function a7(i){if(Object.isUndefined(i)||i===null){return false}if(Object.isString(i)||Object.isNumber(i)){return true}if(Object.isElement(i)){return true}if(i.toElement||i.toHTML){return true}return false}function bn(br,bt,F){F=F.toLowerCase();var bv=L[F];if(bt&&bt.toElement){bt=bt.toElement()}if(Object.isElement(bt)){bv(br,bt);return br}bt=Object.toHTML(bt);var bq=((F==="before"||F==="after")?br.parentNode:br).tagName.toUpperCase();var bu=t(bq,bt.stripScripts());if(F==="top"||F==="after"){bu.reverse()}for(var bp=0,bs;bs=bu[bp];bp++){bv(br,bs)}bt.evalScripts.bind(bt).defer()}function Q(F,bp){F=aZ(F);if(a7(bp)){bp={bottom:bp}}for(var i in bp){bn(F,bp[i],i)}return F}function u(F,bp,i){F=aZ(F);if(Object.isElement(bp)){aZ(bp).writeAttribute(i||{})}else{if(Object.isString(bp)){bp=new aF(bp,i)}else{bp=new aF("div",bp)}}if(F.parentNode){F.parentNode.replaceChild(bp,F)}bp.appendChild(F);return bp}function w(F){F=aZ(F);var bp=F.firstChild;while(bp){var i=bp.nextSibling;if(bp.nodeType===Node.TEXT_NODE&&!/\S/.test(bp.nodeValue)){F.removeChild(bp)}bp=i}return F}function a4(i){return aZ(i).innerHTML.blank()}function t(bs,br,bt){var bq=L.tags[bs],bu=av;var F=!!bq;if(!F&&bt){F=true;bq=["","",0]}if(F){bu.innerHTML="&#160;"+bq[0]+br+bq[1];bu.removeChild(bu.firstChild);for(var bp=bq[2];bp--;){bu=bu.firstChild}}else{bu.innerHTML=br}return $A(bu.childNodes)}function E(bq,F){if(!(bq=aZ(bq))){return}var bs=bq.cloneNode(F);if(!aY){bs._prototypeUID=aE;if(F){var br=aF.select(bs,"*"),bp=br.length;while(bp--){br[bp]._prototypeUID=aE}}}return aF.extend(bs)}function Z(F){var i=M(F);if(i){aF.stopObserving(F);if(!aY){F._prototypeUID=aE}delete aF.Storage[i]}}function bl(bp){var F=bp.length;while(F--){Z(bp[F])}}function at(br){var bq=br.length,bp,F;while(bq--){bp=br[bq];F=M(bp);delete aF.Storage[F];delete Event.cache[F]}}if(aY){bl=at}function m(bp){if(!(bp=aZ(bp))){return}Z(bp);var bq=bp.getElementsByTagName("*"),F=bq.length;while(F--){Z(bq[F])}return null}Object.extend(a3,{remove:ad,update:O,replace:ah,insert:Q,wrap:u,cleanWhitespace:w,empty:a4,clone:E,purge:m});function am(i,bp,bq){i=aZ(i);bq=bq||-1;var F=[];while(i=i[bp]){if(i.nodeType===Node.ELEMENT_NODE){F.push(aF.extend(i))}if(F.length===bq){break}}return F}function aL(i){return am(i,"parentNode")}function bm(i){return aF.select(i,"*")}function X(i){i=aZ(i).firstChild;while(i&&i.nodeType!==Node.ELEMENT_NODE){i=i.nextSibling}return aZ(i)}function bi(F){var i=[],bp=aZ(F).firstChild;while(bp){if(bp.nodeType===Node.ELEMENT_NODE){i.push(aF.extend(bp))}bp=bp.nextSibling}return i}function p(i){return am(i,"previousSibling")}function bh(i){return am(i,"nextSibling")}function aV(i){i=aZ(i);var bp=p(i),F=bh(i);return bp.reverse().concat(F)}function aR(F,i){F=aZ(F);if(Object.isString(i)){return Prototype.Selector.match(F,i)}return i.match(F)}function aW(F,bp,bq,i){F=aZ(F),bq=bq||0,i=i||0;if(Object.isNumber(bq)){i=bq,bq=null}while(F=F[bp]){if(F.nodeType!==1){continue}if(bq&&!Prototype.Selector.match(F,bq)){continue}if(--i>=0){continue}return aF.extend(F)}}function aa(F,bp,i){F=aZ(F);if(arguments.length===1){return aZ(F.parentNode)}return aW(F,"parentNode",bp,i)}function y(F,bq,i){if(arguments.length===1){return X(F)}F=aZ(F),bq=bq||0,i=i||0;if(Object.isNumber(bq)){i=bq,bq="*"}var bp=Prototype.Selector.select(bq,F)[i];return aF.extend(bp)}function h(F,bp,i){return aW(F,"previousSibling",bp,i)}function aB(F,bp,i){return aW(F,"nextSibling",bp,i)}function bb(i){i=aZ(i);var F=a1.call(arguments,1).join(", ");return Prototype.Selector.select(F,i)}function aD(bq){bq=aZ(bq);var bs=a1.call(arguments,1).join(", ");var bt=aF.siblings(bq),bp=[];for(var F=0,br;br=bt[F];F++){if(Prototype.Selector.match(br,bs)){bp.push(br)}}return bp}function D(F,i){F=aZ(F),i=aZ(i);while(F=F.parentNode){if(F===i){return true}}return false}function B(F,i){F=aZ(F),i=aZ(i);if(!i.contains){return D(F,i)}return i.contains(F)&&i!==F}function J(F,i){F=aZ(F),i=aZ(i);return(F.compareDocumentPosition(i)&8)===8}var aM;if(av.compareDocumentPosition){aM=J}else{if(av.contains){aM=B}else{aM=D}}Object.extend(a3,{recursivelyCollect:am,ancestors:aL,descendants:bm,firstDescendant:X,immediateDescendants:bi,previousSiblings:p,nextSiblings:bh,siblings:aV,match:aR,up:aa,down:y,previous:h,next:aB,select:bb,adjacent:aD,descendantOf:aM,getElementsBySelector:bb,childElements:bi});var T=1;function aU(i){i=aZ(i);var F=aF.readAttribute(i,"id");if(F){return F}do{F="anonymous_element_"+T++}while(aZ(F));aF.writeAttribute(i,"id",F);return F}function a9(F,i){return aZ(F).getAttribute(i)}function K(F,i){F=aZ(F);var bp=aG.read;if(bp.values[i]){return bp.values[i](F,i)}if(bp.names[i]){i=bp.names[i]}if(i.include(":")){if(!F.attributes||!F.attributes[i]){return null}return F.attributes[i].value}return F.getAttribute(i)}function e(F,i){if(i==="title"){return F.title}return F.getAttribute(i)}var U=(function(){av.setAttribute("onclick",[]);var i=av.getAttribute("onclick");var F=Object.isArray(i);av.removeAttribute("onclick");return F})();if(U){a9=K}else{if(Prototype.Browser.Opera){a9=e}}function a0(bq,bp,bs){bq=aZ(bq);var F={},br=aG.write;if(typeof bp==="object"){F=bp}else{F[bp]=Object.isUndefined(bs)?true:bs}for(var i in F){bp=br.names[i]||i;bs=F[i];if(br.values[i]){bp=br.values[i](bq,bs)||bp}if(bs===false||bs===null){bq.removeAttribute(bp)}else{if(bs===true){bq.setAttribute(bp,bp)}else{bq.setAttribute(bp,bs)}}}return bq}var a=(function(){if(!d){return false}var F=document.createElement('<input type="checkbox">');F.checked=true;var i=F.getAttributeNode("checked");return !i||!i.specified})();function Y(i,bp){bp=aG.has[bp]||bp;var F=aZ(i).getAttributeNode(bp);return !!(F&&F.specified)}function bg(i,F){if(F==="checked"){return i.checked}return Y(i,F)}a8.Element.Methods.Simulated.hasAttribute=a?bg:Y;function k(i){return new aF.ClassNames(i)}var V={};function f(F){if(V[F]){return V[F]}var i=new RegExp("(^|\\s+)"+F+"(\\s+|$)");V[F]=i;return i}function al(i,F){if(!(i=aZ(i))){return}var bp=i.className;if(bp.length===0){return false}if(bp===F){return true}return f(F).test(bp)}function o(i,F){if(!(i=aZ(i))){return}if(!al(i,F)){i.className+=(i.className?" ":"")+F}return i}function au(i,F){if(!(i=aZ(i))){return}i.className=i.className.replace(f(F)," ").strip();return i}function ae(F,bp,i){if(!(F=aZ(F))){return}if(Object.isUndefined(i)){i=!al(F,bp)}var bq=aF[i?"addClassName":"removeClassName"];return bq(F,bp)}var aG={};var aP="className",ar="for";av.setAttribute(aP,"x");if(av.className!=="x"){av.setAttribute("class","x");if(av.className==="x"){aP="class"}}var aK=document.createElement("label");aK.setAttribute(ar,"x");if(aK.htmlFor!=="x"){aK.setAttribute("htmlFor","x");if(aK.htmlFor==="x"){ar="htmlFor"}}aK=null;function ac(i,F){return i.getAttribute(F)}function g(i,F){return i.getAttribute(F,2)}function A(i,bp){var F=i.getAttributeNode(bp);return F?F.value:""}function bj(i,F){return aZ(i).hasAttribute(F)?F:null}av.onclick=Prototype.emptyFunction;var P=av.getAttribute("onclick");var aw;if(String(P).indexOf("{")>-1){aw=function(i,F){var bp=i.getAttribute(F);if(!bp){return null}bp=bp.toString();bp=bp.split("{")[1];bp=bp.split("}")[0];return bp.strip()}}else{if(P===""){aw=function(i,F){var bp=i.getAttribute(F);if(!bp){return null}return bp.strip()}}}aG.read={names:{"class":aP,className:aP,"for":ar,htmlFor:ar},values:{style:function(i){return i.style.cssText.toLowerCase()},title:function(i){return i.title}}};aG.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(i,F){i.checked=!!F},style:function(i,F){i.style.cssText=F?F:""}}};aG.has={names:{}};Object.extend(aG.write.names,aG.read.names);var a6=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");for(var af=0,ag;ag=a6[af];af++){aG.write.names[ag.toLowerCase()]=ag;aG.has.names[ag.toLowerCase()]=ag}Object.extend(aG.read.values,{href:g,src:g,type:ac,action:A,disabled:bj,checked:bj,readonly:bj,multiple:bj,onload:aw,onunload:aw,onclick:aw,ondblclick:aw,onmousedown:aw,onmouseup:aw,onmouseover:aw,onmousemove:aw,onmouseout:aw,onfocus:aw,onblur:aw,onkeypress:aw,onkeydown:aw,onkeyup:aw,onsubmit:aw,onreset:aw,onselect:aw,onchange:aw});Object.extend(a3,{identify:aU,readAttribute:a9,writeAttribute:a0,classNames:k,hasClassName:al,addClassName:o,removeClassName:au,toggleClassName:ae});function W(i){if(i==="float"||i==="styleFloat"){return"cssFloat"}return i.camelize()}function bo(i){if(i==="float"||i==="cssFloat"){return"styleFloat"}return i.camelize()}function C(bp,bq){bp=aZ(bp);var bt=bp.style,F;if(Object.isString(bq)){bt.cssText+=";"+bq;if(bq.include("opacity")){var i=bq.match(/opacity:\s*(\d?\.?\d*)/)[1];aF.setOpacity(bp,i)}return bp}for(var bs in bq){if(bs==="opacity"){aF.setOpacity(bp,bq[bs])}else{var br=bq[bs];if(bs==="float"||bs==="cssFloat"){bs=Object.isUndefined(bt.styleFloat)?"cssFloat":"styleFloat"}bt[bs]=br}}return bp}function aO(F,bp){F=aZ(F);bp=W(bp);var bq=F.style[bp];if(!bq||bq==="auto"){var i=document.defaultView.getComputedStyle(F,null);bq=i?i[bp]:null}if(bp==="opacity"){return bq?parseFloat(bq):1}return bq==="auto"?null:bq}function s(i,F){switch(F){case"height":case"width":if(!aF.visible(i)){return null}var bp=parseInt(aO(i,F),10);if(bp!==i["offset"+F.capitalize()]){return bp+"px"}return aF.measure(i,F);default:return aO(i,F)}}function aj(i,F){i=aZ(i);F=bo(F);var bp=i.style[F];if(!bp&&i.currentStyle){bp=i.currentStyle[F]}if(F==="opacity"&&!N){return be(i)}if(bp==="auto"){if((F==="width"||F==="height")&&aF.visible(i)){return aF.measure(i,F)+"px"}return null}return bp}function aA(i){return(i||"").replace(/alpha\([^\)]*\)/gi,"")}function ab(i){if(!i.currentStyle||!i.currentStyle.hasLayout){i.style.zoom=1}return i}var N=(function(){av.style.cssText="opacity:.55";return/^0.55/.test(av.style.opacity)})();function z(i,F){i=aZ(i);if(F==1||F===""){F=""}else{if(F<0.00001){F=0}}i.style.opacity=F;return i}function bf(i,bq){if(N){return z(i,bq)}i=ab(aZ(i));var bp=aF.getStyle(i,"filter"),F=i.style;if(bq==1||bq===""){bp=aA(bp);if(bp){F.filter=bp}else{F.removeAttribute("filter")}return i}if(bq<0.00001){bq=0}F.filter=aA(bp)+"alpha(opacity="+(bq*100)+")";return i}function bd(i){return aF.getStyle(i,"opacity")}function be(F){if(N){return bd(F)}var bp=aF.getStyle(F,"filter");if(bp.length===0){return 1}var i=(bp||"").match(/alpha\(opacity=(.*)\)/);if(i&&i[1]){return parseFloat(i[1])/100}return 1}Object.extend(a3,{setStyle:C,getStyle:aO,setOpacity:z,getOpacity:bd});if("styleFloat" in av.style){a3.getStyle=aj;a3.setOpacity=bf;a3.getOpacity=be}var l=0;a8.Element.Storage={UID:1};function M(i){if(i===window){return 0}if(typeof i._prototypeUID==="undefined"){i._prototypeUID=aF.Storage.UID++}return i._prototypeUID}function c(i){if(i===window){return 0}if(i==document){return 1}return i.uniqueID}var aY=("uniqueID" in av);if(aY){M=c}function b(F){if(!(F=aZ(F))){return}var i=M(F);if(!aF.Storage[i]){aF.Storage[i]=$H()}return aF.Storage[i]}function a5(F,i,bp){if(!(F=aZ(F))){return}var bq=b(F);if(arguments.length===2){bq.update(i)}else{bq.set(i,bp)}return F}function aN(bp,F,i){if(!(bp=aZ(bp))){return}var br=b(bp),bq=br.get(F);if(Object.isUndefined(bq)){br.set(F,i);bq=i}return bq}Object.extend(a3,{getStorage:b,store:a5,retrieve:aN});var an={},aX=aF.Methods.ByTag,aC=Prototype.BrowserFeatures;if(!aC.ElementExtensions&&("__proto__" in av)){a8.HTMLElement={};a8.HTMLElement.prototype=av.__proto__;aC.ElementExtensions=true}function bc(i){if(typeof window.Element==="undefined"){return false}if(!d){return false}var bp=window.Element.prototype;if(bp){var br="_"+(Math.random()+"").slice(2),F=document.createElement(i);bp[br]="x";var bq=(F[br]!=="x");delete bp[br];F=null;return bq}return false}var ap=bc("object");function ak(F,i){for(var bq in i){var bp=i[bq];if(Object.isFunction(bp)&&!(bq in F)){F[bq]=bp.methodize()}}}var bk={};function ay(F){var i=M(F);return(i in bk)}function az(bp){if(!bp||ay(bp)){return bp}if(bp.nodeType!==Node.ELEMENT_NODE||bp==window){return bp}var i=Object.clone(an),F=bp.tagName.toUpperCase();if(aX[F]){Object.extend(i,aX[F])}ak(bp,i);bk[M(bp)]=true;return bp}function aS(F){if(!F||ay(F)){return F}var i=F.tagName;if(i&&(/^(?:object|applet|embed)$/i.test(i))){ak(F,aF.Methods);ak(F,aF.Methods.Simulated);ak(F,aF.Methods.ByTag[i.toUpperCase()])}return F}if(aC.SpecificElementExtensions){az=ap?aS:Prototype.K}function S(F,i){F=F.toUpperCase();if(!aX[F]){aX[F]={}}Object.extend(aX[F],i)}function q(F,bp,i){if(Object.isUndefined(i)){i=false}for(var br in bp){var bq=bp[br];if(!Object.isFunction(bq)){continue}if(!i||!(br in F)){F[br]=bq.methodize()}}}function ai(bq){var i;var bp={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(bp[bq]){i="HTML"+bp[bq]+"Element"}if(window[i]){return window[i]}i="HTML"+bq+"Element";if(window[i]){return window[i]}i="HTML"+bq.capitalize()+"Element";if(window[i]){return window[i]}var F=document.createElement(bq),br=F.__proto__||F.constructor.prototype;F=null;return br}function R(br){if(arguments.length===0){G()}if(arguments.length===2){var bt=br;br=arguments[1]}if(!bt){Object.extend(aF.Methods,br||{})}else{if(Object.isArray(bt)){for(var bs=0,bq;bq=bt[bs];bs++){S(bq,br)}}else{S(bt,br)}}var bp=window.HTMLElement?HTMLElement.prototype:aF.prototype;if(aC.ElementExtensions){q(bp,aF.Methods);q(bp,aF.Methods.Simulated,true)}if(aC.SpecificElementExtensions){for(var bq in aF.Methods.ByTag){var F=ai(bq);if(Object.isUndefined(F)){continue}q(F.prototype,aX[bq])}}Object.extend(aF,aF.Methods);Object.extend(aF,aF.Methods.Simulated);delete aF.ByTag;delete aF.Simulated;aF.extend.refresh();r={}}Object.extend(a8.Element,{extend:az,addMethods:R});if(az===Prototype.K){a8.Element.extend.refresh=Prototype.emptyFunction}else{a8.Element.extend.refresh=function(){if(Prototype.BrowserFeatures.ElementExtensions){return}Object.extend(an,aF.Methods);Object.extend(an,aF.Methods.Simulated);bk={}}}function G(){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(aF.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})}aF.addMethods(a3);function n(){av=null;r=null}if(window.attachEvent){window.attachEvent("onunload",n)}})(this);(function(){function k(G){var F=G.match(/^(\d+)%?$/i);if(!F){return null}return(Number(F[1])/100)}function y(G,H){G=$(G);var I=G.style[H];if(!I||I==="auto"){var F=document.defaultView.getComputedStyle(G,null);I=F?F[H]:null}if(H==="opacity"){return I?parseFloat(I):1}return I==="auto"?null:I}function B(F,G){var H=F.style[G];if(!H&&F.currentStyle){H=F.currentStyle[G]}return H}function r(H,G){var J=H.offsetWidth;var L=u(H,"borderLeftWidth",G)||0;var F=u(H,"borderRightWidth",G)||0;var I=u(H,"paddingLeft",G)||0;var K=u(H,"paddingRight",G)||0;return J-L-F-I-K}if("currentStyle" in document.documentElement){y=B}function u(P,Q,G){var J=null;if(Object.isElement(P)){J=P;P=y(J,Q)}if(P===null||Object.isUndefined(P)){return null}if((/^(?:-)?\d+(\.\d+)?(px)?$/i).test(P)){return window.parseFloat(P)}var K=P.include("%"),H=(G===document.viewport);if(/\d/.test(P)&&J&&J.runtimeStyle&&!(K&&H)){var F=J.style.left,O=J.runtimeStyle.left;J.runtimeStyle.left=J.currentStyle.left;J.style.left=P||0;P=J.style.pixelLeft;J.style.left=F;J.runtimeStyle.left=O;return P}if(J&&K){G=G||J.parentNode;var I=k(P),L=null;var N=Q.include("left")||Q.include("right")||Q.include("width");var M=Q.include("top")||Q.include("bottom")||Q.include("height");if(G===document.viewport){if(N){L=document.viewport.getWidth()}else{if(M){L=document.viewport.getHeight()}}}else{if(N){L=$(G).measure("width")}else{if(M){L=$(G).measure("height")}}}return(L===null)?0:L*I}return 0}function j(F){if(Object.isString(F)&&F.endsWith("px")){return F}return F+"px"}function m(F){while(F&&F.parentNode){var G=F.getStyle("display");if(G==="none"){return false}F=$(F.parentNode)}return true}var g=Prototype.K;if("currentStyle" in document.documentElement){g=function(F){if(!F.currentStyle.hasLayout){F.style.zoom=1}return F}}function i(F){if(F.include("border")){F=F+"-width"}return F.camelize()}Element.Layout=Class.create(Hash,{initialize:function($super,G,F){$super();this.element=$(G);Element.Layout.PROPERTIES.each(function(H){this._set(H,null)},this);if(F){this._preComputing=true;this._begin();Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(G,F){return Hash.prototype.set.call(this,G,F)},set:function(G,F){throw"Properties of Element.Layout are read-only."},get:function($super,G){var F=$super(G);return F===null?this._compute(G):F},_begin:function(){if(this._isPrepared()){return}var J=this.element;if(m(J)){this._setPrepared(true);return}var L={position:J.style.position||"",width:J.style.width||"",visibility:J.style.visibility||"",display:J.style.display||""};J.store("prototype_original_styles",L);var M=y(J,"position"),F=J.offsetWidth;if(F===0||F===null){J.style.display="block";F=J.offsetWidth}var G=(M==="fixed")?document.viewport:J.parentNode;var N={visibility:"hidden",display:"block"};if(M!=="fixed"){N.position="absolute"}J.setStyle(N);var H=J.offsetWidth,I;if(F&&(H===F)){I=r(J,G)}else{if(M==="absolute"||M==="fixed"){I=r(J,G)}else{var O=J.parentNode,K=$(O).getLayout();I=K.get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}}J.setStyle({width:I+"px"});this._setPrepared(true)},_end:function(){var G=this.element;var F=G.retrieve("prototype_original_styles");G.store("prototype_original_styles",null);G.setStyle(F);this._setPrepared(false)},_compute:function(G){var F=Element.Layout.COMPUTATIONS;if(!(G in F)){throw"Property not found."}return this._set(G,F[G].call(this,this.element))},_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",false)},_setPrepared:function(F){return this.element.store("prototype_element_layout_prepared",F)},toObject:function(){var F=$A(arguments);var G=(F.length===0)?Element.Layout.PROPERTIES:F.join(" ").split(" ");var H={};G.each(function(I){if(!Element.Layout.PROPERTIES.include(I)){return}var J=this.get(I);if(J!=null){H[I]=J}},this);return H},toHash:function(){var F=this.toObject.apply(this,arguments);return new Hash(F)},toCSS:function(){var F=$A(arguments);var H=(F.length===0)?Element.Layout.PROPERTIES:F.join(" ").split(" ");var G={};H.each(function(I){if(!Element.Layout.PROPERTIES.include(I)){return}if(Element.Layout.COMPOSITE_PROPERTIES.include(I)){return}var J=this.get(I);if(J!=null){G[i(I)]=J+"px"}},this);return G},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(H){if(!this._preComputing){this._begin()}var F=this.get("border-box-height");if(F<=0){if(!this._preComputing){this._end()}return 0}var I=this.get("border-top"),G=this.get("border-bottom");var K=this.get("padding-top"),J=this.get("padding-bottom");if(!this._preComputing){this._end()}return F-I-G-K-J},width:function(H){if(!this._preComputing){this._begin()}var G=this.get("border-box-width");if(G<=0){if(!this._preComputing){this._end()}return 0}var K=this.get("border-left"),F=this.get("border-right");var I=this.get("padding-left"),J=this.get("padding-right");if(!this._preComputing){this._end()}return G-K-F-I-J},"padding-box-height":function(G){var F=this.get("height"),I=this.get("padding-top"),H=this.get("padding-bottom");return F+I+H},"padding-box-width":function(F){var G=this.get("width"),H=this.get("padding-left"),I=this.get("padding-right");return G+H+I},"border-box-height":function(G){if(!this._preComputing){this._begin()}var F=G.offsetHeight;if(!this._preComputing){this._end()}return F},"border-box-width":function(F){if(!this._preComputing){this._begin()}var G=F.offsetWidth;if(!this._preComputing){this._end()}return G},"margin-box-height":function(G){var F=this.get("border-box-height"),H=this.get("margin-top"),I=this.get("margin-bottom");if(F<=0){return 0}return F+H+I},"margin-box-width":function(H){var G=this.get("border-box-width"),I=this.get("margin-left"),F=this.get("margin-right");if(G<=0){return 0}return G+I+F},top:function(F){var G=F.positionedOffset();return G.top},bottom:function(F){var I=F.positionedOffset(),G=F.getOffsetParent(),H=G.measure("height");var J=this.get("border-box-height");return H-J-I.top},left:function(F){var G=F.positionedOffset();return G.left},right:function(H){var J=H.positionedOffset(),I=H.getOffsetParent(),F=I.measure("width");var G=this.get("border-box-width");return F-G-J.left},"padding-top":function(F){return u(F,"paddingTop")},"padding-bottom":function(F){return u(F,"paddingBottom")},"padding-left":function(F){return u(F,"paddingLeft")},"padding-right":function(F){return u(F,"paddingRight")},"border-top":function(F){return u(F,"borderTopWidth")},"border-bottom":function(F){return u(F,"borderBottomWidth")},"border-left":function(F){return u(F,"borderLeftWidth")},"border-right":function(F){return u(F,"borderRightWidth")},"margin-top":function(F){return u(F,"marginTop")},"margin-bottom":function(F){return u(F,"marginBottom")},"margin-left":function(F){return u(F,"marginLeft")},"margin-right":function(F){return u(F,"marginRight")}}});if("getBoundingClientRect" in document.documentElement){Object.extend(Element.Layout.COMPUTATIONS,{right:function(G){var H=g(G.getOffsetParent());var I=G.getBoundingClientRect(),F=H.getBoundingClientRect();return(F.right-I.right).round()},bottom:function(G){var H=g(G.getOffsetParent());var I=G.getBoundingClientRect(),F=H.getBoundingClientRect();return(F.bottom-I.bottom).round()}})}Element.Offset=Class.create({initialize:function(G,F){this.left=G.round();this.top=F.round();this[0]=this.left;this[1]=this.top},relativeTo:function(F){return new Element.Offset(this.left-F.left,this.top-F.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});function z(G,F){return new Element.Layout(G,F)}function d(F,G){return $(F).getLayout().get(G)}function q(F){return Element.getDimensions(F).height}function c(F){return Element.getDimensions(F).width}function s(G){G=$(G);var K=Element.getStyle(G,"display");if(K&&K!=="none"){return{width:G.offsetWidth,height:G.offsetHeight}}var H=G.style;var F={visibility:H.visibility,position:H.position,display:H.display};var J={visibility:"hidden",display:"block"};if(F.position!=="fixed"){J.position="absolute"}Element.setStyle(G,J);var I={width:G.offsetWidth,height:G.offsetHeight};Element.setStyle(G,F);return I}function p(F){F=$(F);if(h(F)||f(F)||o(F)||n(F)){return $(document.body)}var G=(Element.getStyle(F,"display")==="inline");if(!G&&F.offsetParent){return $(F.offsetParent)}while((F=F.parentNode)&&F!==document.body){if(Element.getStyle(F,"position")!=="static"){return n(F)?$(document.body):$(F)}}return $(document.body)}function C(G){G=$(G);var F=0,H=0;if(G.parentNode){do{F+=G.offsetTop||0;H+=G.offsetLeft||0;G=G.offsetParent}while(G)}return new Element.Offset(H,F)}function w(G){G=$(G);var H=G.getLayout();var F=0,J=0;do{F+=G.offsetTop||0;J+=G.offsetLeft||0;G=G.offsetParent;if(G){if(o(G)){break}var I=Element.getStyle(G,"position");if(I!=="static"){break}}}while(G);J-=H.get("margin-top");F-=H.get("margin-left");return new Element.Offset(J,F)}function b(G){var F=0,H=0;do{if(G===document.body){var I=document.documentElement||document.body.parentNode||document.body;F+=!Object.isUndefined(window.pageYOffset)?window.pageYOffset:I.scrollTop||0;H+=!Object.isUndefined(window.pageXOffset)?window.pageXOffset:I.scrollLeft||0;break}else{F+=G.scrollTop||0;H+=G.scrollLeft||0;G=G.parentNode}}while(G);return new Element.Offset(H,F)}function A(J){var F=0,I=0,H=document.body;J=$(J);var G=J;do{F+=G.offsetTop||0;I+=G.offsetLeft||0;if(G.offsetParent==H&&Element.getStyle(G,"position")=="absolute"){break}}while(G=G.offsetParent);G=J;do{if(G!=H){F-=G.scrollTop||0;I-=G.scrollLeft||0}}while(G=G.parentNode);return new Element.Offset(I,F)}function x(F){F=$(F);if(Element.getStyle(F,"position")==="absolute"){return F}var J=p(F);var I=F.viewportOffset(),G=J.viewportOffset();var K=I.relativeTo(G);var H=F.getLayout();F.store("prototype_absolutize_original_styles",{position:F.getStyle("position"),left:F.getStyle("left"),top:F.getStyle("top"),width:F.getStyle("width"),height:F.getStyle("height")});F.setStyle({position:"absolute",top:K.top+"px",left:K.left+"px",width:H.get("width")+"px",height:H.get("height")+"px"});return F}function l(G){G=$(G);if(Element.getStyle(G,"position")==="relative"){return G}var F=G.retrieve("prototype_absolutize_original_styles");if(F){G.setStyle(F)}return G}function a(F){F=$(F);var G=Element.cumulativeOffset(F);window.scrollTo(G.left,G.top);return F}function v(G){G=$(G);var F=Element.getStyle(G,"position"),H={};if(F==="static"||!F){H.position="relative";if(Prototype.Browser.Opera){H.top=0;H.left=0}Element.setStyle(G,H);Element.store(G,"prototype_made_positioned",true)}return G}function t(F){F=$(F);var H=Element.getStorage(F),G=H.get("prototype_made_positioned");if(G){H.unset("prototype_made_positioned");Element.setStyle(F,{position:"",top:"",bottom:"",left:"",right:""})}return F}function e(G){G=$(G);var I=Element.getStorage(G),F=I.get("prototype_made_clipping");if(Object.isUndefined(F)){var H=Element.getStyle(G,"overflow");I.set("prototype_made_clipping",H);if(H!=="hidden"){G.style.overflow="hidden"}}return G}function D(F){F=$(F);var H=Element.getStorage(F),G=H.get("prototype_made_clipping");if(!Object.isUndefined(G)){H.unset("prototype_made_clipping");F.style.overflow=G||""}return F}function E(G,K,F){F=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},F||{});K=$(K);G=$(G);var L,M,J,I={};if(F.setLeft||F.setTop){L=Element.viewportOffset(K);M=[0,0];if(Element.getStyle(G,"position")==="absolute"){var H=Element.getOffsetParent(G);if(H!==document.body){M=Element.viewportOffset(H)}}}if(F.setWidth||F.setHeight){J=Element.getLayout(K)}if(F.setLeft){I.left=(L[0]-M[0]+F.offsetLeft)+"px"}if(F.setTop){I.top=(L[1]-M[1]+F.offsetTop)+"px"}if(F.setWidth){I.width=J.get("border-box-width")+"px"}if(F.setHeight){I.height=J.get("border-box-height")+"px"}return Element.setStyle(G,I)}if(Prototype.Browser.IE){p=p.wrap(function(H,G){G=$(G);if(h(G)||f(G)||o(G)||n(G)){return $(document.body)}var F=G.getStyle("position");if(F!=="static"){return H(G)}G.setStyle({position:"relative"});var I=H(G);G.setStyle({position:F});return I});w=w.wrap(function(I,G){G=$(G);if(!G.parentNode){return new Element.Offset(0,0)}var F=G.getStyle("position");if(F!=="static"){return I(G)}var H=G.getOffsetParent();if(H&&H.getStyle("position")==="fixed"){g(H)}G.setStyle({position:"relative"});var J=I(G);G.setStyle({position:F});return J})}else{if(Prototype.Browser.Webkit){C=function(G){G=$(G);var F=0,H=0;do{F+=G.offsetTop||0;H+=G.offsetLeft||0;if(G.offsetParent==document.body){if(Element.getStyle(G,"position")=="absolute"){break}}G=G.offsetParent}while(G);return new Element.Offset(H,F)}}}Element.addMethods({getLayout:z,measure:d,getWidth:c,getHeight:q,getDimensions:s,getOffsetParent:p,cumulativeOffset:C,positionedOffset:w,cumulativeScrollOffset:b,viewportOffset:A,absolutize:x,relativize:l,scrollTo:a,makePositioned:v,undoPositioned:t,makeClipping:e,undoClipping:D,clonePosition:E});function o(F){return F.nodeName.toUpperCase()==="BODY"}function n(F){return F.nodeName.toUpperCase()==="HTML"}function h(F){return F.nodeType===Node.DOCUMENT_NODE}function f(F){return F!==document.body&&!Element.descendantOf(F,document.body)}if("getBoundingClientRect" in document.documentElement){Element.addMethods({viewportOffset:function(F){F=$(F);if(f(F)){return new Element.Offset(0,0)}var G=F.getBoundingClientRect(),H=document.documentElement;return new Element.Offset(G.left-H.clientLeft,G.top-H.clientTop)}})}})();(function(){var c=Prototype.Browser.Opera&&(window.parseFloat(window.opera.version())<9.5);var f=null;function b(){if(f){return f}f=c?document.body:document.documentElement;return f}function d(){return{width:this.getWidth(),height:this.getHeight()}}function a(){return b().clientWidth}function g(){return b().clientHeight}function e(){var h=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;var i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return new Element.Offset(h,i)}document.viewport={getDimensions:d,getWidth:a,getHeight:g,getScrollOffsets:e}})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};Prototype.Selector=(function(){function a(){throw new Error('Method "Prototype.Selector.select" must be defined.')}function c(){throw new Error('Method "Prototype.Selector.match" must be defined.')}function d(l,m,h){h=h||0;var g=Prototype.Selector.match,k=l.length,f=0,j;for(j=0;j<k;j++){if(g(l[j],m)&&h==f++){return Element.extend(l[j])}}}function e(h){for(var f=0,g=h.length;f<g;f++){Element.extend(h[f])}return h}var b=Prototype.K;return{select:a,match:c,find:d,extendElements:(Element.extend===b)?b:e,extendElement:Element.extend}})();Prototype._original_property=window.Sizzle;
/*
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
(function(av){var D,ay,t,M,P,ab,ax,aC,N,ac,ae,H,u,an,ai,aw,k,K,ap="sizzle"+-(new Date()),O=av.document,az=0,aj=0,d=F(),ao=F(),L=F(),J=function(i,e){if(i===e){ac=true}return 0},au=typeof undefined,V=1<<31,T=({}).hasOwnProperty,ar=[],at=ar.pop,R=ar.push,b=ar.push,s=ar.slice,j=ar.indexOf||function(aE){var aD=0,e=this.length;for(;aD<e;aD++){if(this[aD]===aE){return aD}}return -1},c="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",v="[\\x20\\t\\r\\n\\f]",a="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Q=a.replace("w","w#"),al="\\["+v+"*("+a+")"+v+"*(?:([*^$|!~]?=)"+v+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Q+")|)|)"+v+"*\\]",q=":("+a+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+al.replace(3,8)+")*)|.*)\\)|)",x=new RegExp("^"+v+"+|((?:^|[^\\\\])(?:\\\\.)*)"+v+"+$","g"),A=new RegExp("^"+v+"*,"+v+"*"),G=new RegExp("^"+v+"*([>+~]|"+v+")"+v+"*"),z=new RegExp("="+v+"*([^\\]'\"]*?)"+v+"*\\]","g"),X=new RegExp(q),Z=new RegExp("^"+Q+"$"),ah={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a.replace("w","w*")+")"),ATTR:new RegExp("^"+al),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+v+"*(even|odd|(([+-]|)(\\d*)n|)"+v+"*(?:([+-]|)"+v+"*(\\d+)|))"+v+"*\\)|)","i"),bool:new RegExp("^(?:"+c+")$","i"),needsContext:new RegExp("^"+v+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+v+"*((?:-\\d)?\\d*)"+v+"*\\)|)(?=[^-]|$)","i")},h=/^(?:input|select|textarea|button)$/i,r=/^h\d$/i,U=/^[^{]+\{\s*\[native \w/,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ag=/[+~]/,S=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+v+"?|("+v+")|.)","ig"),ak=function(e,aE,i){var aD="0x"+aE-65536;return aD!==aD||i?aE:aD<0?String.fromCharCode(aD+65536):String.fromCharCode(aD>>10|55296,aD&1023|56320)};try{b.apply((ar=s.call(O.childNodes)),O.childNodes);ar[O.childNodes.length].nodeType}catch(I){b={apply:ar.length?function(i,e){R.apply(i,s.call(e))}:function(aF,aE){var e=aF.length,aD=0;while((aF[e++]=aE[aD++])){}aF.length=e-1}}}function B(aK,aD,aO,aQ){var aP,aH,aI,aM,aN,aG,aF,e,aE,aL;if((aD?aD.ownerDocument||aD:O)!==H){ae(aD)}aD=aD||H;aO=aO||[];if(!aK||typeof aK!=="string"){return aO}if((aM=aD.nodeType)!==1&&aM!==9){return[]}if(an&&!aQ){if((aP=W.exec(aK))){if((aI=aP[1])){if(aM===9){aH=aD.getElementById(aI);if(aH&&aH.parentNode){if(aH.id===aI){aO.push(aH);return aO}}else{return aO}}else{if(aD.ownerDocument&&(aH=aD.ownerDocument.getElementById(aI))&&K(aD,aH)&&aH.id===aI){aO.push(aH);return aO}}}else{if(aP[2]){b.apply(aO,aD.getElementsByTagName(aK));return aO}else{if((aI=aP[3])&&ay.getElementsByClassName&&aD.getElementsByClassName){b.apply(aO,aD.getElementsByClassName(aI));return aO}}}}if(ay.qsa&&(!ai||!ai.test(aK))){e=aF=ap;aE=aD;aL=aM===9&&aK;if(aM===1&&aD.nodeName.toLowerCase()!=="object"){aG=n(aK);if((aF=aD.getAttribute("id"))){e=aF.replace(S,"\\$&")}else{aD.setAttribute("id",e)}e="[id='"+e+"'] ";aN=aG.length;while(aN--){aG[aN]=e+o(aG[aN])}aE=ag.test(aK)&&Y(aD.parentNode)||aD;aL=aG.join(",")}if(aL){try{b.apply(aO,aE.querySelectorAll(aL));return aO}catch(aJ){}finally{if(!aF){aD.removeAttribute("id")}}}}}return ax(aK.replace(x,"$1"),aD,aO,aQ)}function F(){var i=[];function e(aD,aE){if(i.push(aD+" ")>t.cacheLength){delete e[i.shift()]}return(e[aD+" "]=aE)}return e}function p(e){e[ap]=true;return e}function l(i){var aE=H.createElement("div");try{return !!i(aE)}catch(aD){return false}finally{if(aE.parentNode){aE.parentNode.removeChild(aE)}aE=null}}function aA(aD,aF){var e=aD.split("|"),aE=aD.length;while(aE--){t.attrHandle[e[aE]]=aF}}function f(i,e){var aE=e&&i,aD=aE&&i.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||V)-(~i.sourceIndex||V);if(aD){return aD}if(aE){while((aE=aE.nextSibling)){if(aE===e){return -1}}}return i?1:-1}function C(e){return function(aD){var i=aD.nodeName.toLowerCase();return i==="input"&&aD.type===e}}function g(e){return function(aD){var i=aD.nodeName.toLowerCase();return(i==="input"||i==="button")&&aD.type===e}}function am(e){return p(function(i){i=+i;return p(function(aD,aH){var aF,aE=e([],aD.length,i),aG=aE.length;while(aG--){if(aD[(aF=aE[aG])]){aD[aF]=!(aH[aF]=aD[aF])}}})})}function Y(e){return e&&typeof e.getElementsByTagName!==au&&e}ay=B.support={};P=B.isXML=function(e){var i=e&&(e.ownerDocument||e).documentElement;return i?i.nodeName!=="HTML":false};ae=B.setDocument=function(aD){var e,aE=aD?aD.ownerDocument||aD:O,i=aE.defaultView;if(aE===H||aE.nodeType!==9||!aE.documentElement){return H}H=aE;u=aE.documentElement;an=!P(aE);if(i&&i!==i.top){if(i.addEventListener){i.addEventListener("unload",function(){ae()},false)}else{if(i.attachEvent){i.attachEvent("onunload",function(){ae()})}}}ay.attributes=l(function(aF){aF.className="i";return !aF.getAttribute("className")});ay.getElementsByTagName=l(function(aF){aF.appendChild(aE.createComment(""));return !aF.getElementsByTagName("*").length});ay.getElementsByClassName=U.test(aE.getElementsByClassName)&&l(function(aF){aF.innerHTML="<div class='a'></div><div class='a i'></div>";aF.firstChild.className="i";return aF.getElementsByClassName("i").length===2});ay.getById=l(function(aF){u.appendChild(aF).id=ap;return !aE.getElementsByName||!aE.getElementsByName(ap).length});if(ay.getById){t.find.ID=function(aH,aG){if(typeof aG.getElementById!==au&&an){var aF=aG.getElementById(aH);return aF&&aF.parentNode?[aF]:[]}};t.filter.ID=function(aG){var aF=aG.replace(y,ak);return function(aH){return aH.getAttribute("id")===aF}}}else{delete t.find.ID;t.filter.ID=function(aG){var aF=aG.replace(y,ak);return function(aI){var aH=typeof aI.getAttributeNode!==au&&aI.getAttributeNode("id");return aH&&aH.value===aF}}}t.find.TAG=ay.getElementsByTagName?function(aF,aG){if(typeof aG.getElementsByTagName!==au){return aG.getElementsByTagName(aF)}}:function(aF,aJ){var aK,aI=[],aH=0,aG=aJ.getElementsByTagName(aF);if(aF==="*"){while((aK=aG[aH++])){if(aK.nodeType===1){aI.push(aK)}}return aI}return aG};t.find.CLASS=ay.getElementsByClassName&&function(aG,aF){if(typeof aF.getElementsByClassName!==au&&an){return aF.getElementsByClassName(aG)}};aw=[];ai=[];if((ay.qsa=U.test(aE.querySelectorAll))){l(function(aF){aF.innerHTML="<select t=''><option selected=''></option></select>";if(aF.querySelectorAll("[t^='']").length){ai.push("[*^$]="+v+"*(?:''|\"\")")}if(!aF.querySelectorAll("[selected]").length){ai.push("\\["+v+"*(?:value|"+c+")")}if(!aF.querySelectorAll(":checked").length){ai.push(":checked")}});l(function(aG){var aF=aE.createElement("input");aF.setAttribute("type","hidden");aG.appendChild(aF).setAttribute("name","D");if(aG.querySelectorAll("[name=d]").length){ai.push("name"+v+"*[*^$|!~]?=")}if(!aG.querySelectorAll(":enabled").length){ai.push(":enabled",":disabled")}aG.querySelectorAll("*,:x");ai.push(",.*:")})}if((ay.matchesSelector=U.test((k=u.webkitMatchesSelector||u.mozMatchesSelector||u.oMatchesSelector||u.msMatchesSelector)))){l(function(aF){ay.disconnectedMatch=k.call(aF,"div");k.call(aF,"[s!='']:x");aw.push("!=",q)})}ai=ai.length&&new RegExp(ai.join("|"));aw=aw.length&&new RegExp(aw.join("|"));e=U.test(u.compareDocumentPosition);K=e||U.test(u.contains)?function(aG,aF){var aI=aG.nodeType===9?aG.documentElement:aG,aH=aF&&aF.parentNode;return aG===aH||!!(aH&&aH.nodeType===1&&(aI.contains?aI.contains(aH):aG.compareDocumentPosition&&aG.compareDocumentPosition(aH)&16))}:function(aG,aF){if(aF){while((aF=aF.parentNode)){if(aF===aG){return true}}}return false};J=e?function(aG,aF){if(aG===aF){ac=true;return 0}var aH=!aG.compareDocumentPosition-!aF.compareDocumentPosition;if(aH){return aH}aH=(aG.ownerDocument||aG)===(aF.ownerDocument||aF)?aG.compareDocumentPosition(aF):1;if(aH&1||(!ay.sortDetached&&aF.compareDocumentPosition(aG)===aH)){if(aG===aE||aG.ownerDocument===O&&K(O,aG)){return -1}if(aF===aE||aF.ownerDocument===O&&K(O,aF)){return 1}return N?(j.call(N,aG)-j.call(N,aF)):0}return aH&4?-1:1}:function(aG,aF){if(aG===aF){ac=true;return 0}var aM,aJ=0,aL=aG.parentNode,aI=aF.parentNode,aH=[aG],aK=[aF];if(!aL||!aI){return aG===aE?-1:aF===aE?1:aL?-1:aI?1:N?(j.call(N,aG)-j.call(N,aF)):0}else{if(aL===aI){return f(aG,aF)}}aM=aG;while((aM=aM.parentNode)){aH.unshift(aM)}aM=aF;while((aM=aM.parentNode)){aK.unshift(aM)}while(aH[aJ]===aK[aJ]){aJ++}return aJ?f(aH[aJ],aK[aJ]):aH[aJ]===O?-1:aK[aJ]===O?1:0};return aE};B.matches=function(i,e){return B(i,null,null,e)};B.matchesSelector=function(aD,aF){if((aD.ownerDocument||aD)!==H){ae(aD)}aF=aF.replace(z,"='$1']");if(ay.matchesSelector&&an&&(!aw||!aw.test(aF))&&(!ai||!ai.test(aF))){try{var i=k.call(aD,aF);if(i||ay.disconnectedMatch||aD.document&&aD.document.nodeType!==11){return i}}catch(aE){}}return B(aF,H,null,[aD]).length>0};B.contains=function(e,i){if((e.ownerDocument||e)!==H){ae(e)}return K(e,i)};B.attr=function(aD,e){if((aD.ownerDocument||aD)!==H){ae(aD)}var i=t.attrHandle[e.toLowerCase()],aE=i&&T.call(t.attrHandle,e.toLowerCase())?i(aD,e,!an):undefined;return aE!==undefined?aE:ay.attributes||!an?aD.getAttribute(e):(aE=aD.getAttributeNode(e))&&aE.specified?aE.value:null};B.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};B.uniqueSort=function(aE){var aF,aG=[],e=0,aD=0;ac=!ay.detectDuplicates;N=!ay.sortStable&&aE.slice(0);aE.sort(J);if(ac){while((aF=aE[aD++])){if(aF===aE[aD]){e=aG.push(aD)}}while(e--){aE.splice(aG[e],1)}}N=null;return aE};M=B.getText=function(aG){var aF,aD="",aE=0,e=aG.nodeType;if(!e){while((aF=aG[aE++])){aD+=M(aF)}}else{if(e===1||e===9||e===11){if(typeof aG.textContent==="string"){return aG.textContent}else{for(aG=aG.firstChild;aG;aG=aG.nextSibling){aD+=M(aG)}}}else{if(e===3||e===4){return aG.nodeValue}}}return aD};t=B.selectors={cacheLength:50,createPseudo:p,match:ah,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(y,ak);e[3]=(e[4]||e[5]||"").replace(y,ak);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){B.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){B.error(e[0])}}return e},PSEUDO:function(i){var e,aD=!i[5]&&i[2];if(ah.CHILD.test(i[0])){return null}if(i[3]&&i[4]!==undefined){i[2]=i[4]}else{if(aD&&X.test(aD)&&(e=n(aD,true))&&(e=aD.indexOf(")",aD.length-e)-aD.length)){i[0]=i[0].slice(0,e);i[2]=aD.slice(0,e)}}return i.slice(0,3)}},filter:{TAG:function(i){var e=i.replace(y,ak).toLowerCase();return i==="*"?function(){return true}:function(aD){return aD.nodeName&&aD.nodeName.toLowerCase()===e}},CLASS:function(e){var i=d[e+" "];return i||(i=new RegExp("(^|"+v+")"+e+"("+v+"|$)"))&&d(e,function(aD){return i.test(typeof aD.className==="string"&&aD.className||typeof aD.getAttribute!==au&&aD.getAttribute("class")||"")})},ATTR:function(aD,i,e){return function(aF){var aE=B.attr(aF,aD);if(aE==null){return i==="!="}if(!i){return true}aE+="";return i==="="?aE===e:i==="!="?aE!==e:i==="^="?e&&aE.indexOf(e)===0:i==="*="?e&&aE.indexOf(e)>-1:i==="$="?e&&aE.slice(-e.length)===e:i==="~="?(" "+aE+" ").indexOf(e)>-1:i==="|="?aE===e||aE.slice(0,e.length+1)===e+"-":false}},CHILD:function(i,aF,aE,aG,aD){var aI=i.slice(0,3)!=="nth",e=i.slice(-4)!=="last",aH=aF==="of-type";return aG===1&&aD===0?function(aJ){return !!aJ.parentNode}:function(aP,aN,aS){var aJ,aV,aQ,aU,aR,aM,aO=aI!==e?"nextSibling":"previousSibling",aT=aP.parentNode,aL=aH&&aP.nodeName.toLowerCase(),aK=!aS&&!aH;if(aT){if(aI){while(aO){aQ=aP;while((aQ=aQ[aO])){if(aH?aQ.nodeName.toLowerCase()===aL:aQ.nodeType===1){return false}}aM=aO=i==="only"&&!aM&&"nextSibling"}return true}aM=[e?aT.firstChild:aT.lastChild];if(e&&aK){aV=aT[ap]||(aT[ap]={});aJ=aV[i]||[];aR=aJ[0]===az&&aJ[1];aU=aJ[0]===az&&aJ[2];aQ=aR&&aT.childNodes[aR];while((aQ=++aR&&aQ&&aQ[aO]||(aU=aR=0)||aM.pop())){if(aQ.nodeType===1&&++aU&&aQ===aP){aV[i]=[az,aR,aU];break}}}else{if(aK&&(aJ=(aP[ap]||(aP[ap]={}))[i])&&aJ[0]===az){aU=aJ[1]}else{while((aQ=++aR&&aQ&&aQ[aO]||(aU=aR=0)||aM.pop())){if((aH?aQ.nodeName.toLowerCase()===aL:aQ.nodeType===1)&&++aU){if(aK){(aQ[ap]||(aQ[ap]={}))[i]=[az,aU]}if(aQ===aP){break}}}}}aU-=aD;return aU===aG||(aU%aG===0&&aU/aG>=0)}}},PSEUDO:function(aE,aD){var e,i=t.pseudos[aE]||t.setFilters[aE.toLowerCase()]||B.error("unsupported pseudo: "+aE);if(i[ap]){return i(aD)}if(i.length>1){e=[aE,aE,"",aD];return t.setFilters.hasOwnProperty(aE.toLowerCase())?p(function(aH,aJ){var aG,aF=i(aH,aD),aI=aF.length;while(aI--){aG=j.call(aH,aF[aI]);aH[aG]=!(aJ[aG]=aF[aI])}}):function(aF){return i(aF,0,e)}}return i}},pseudos:{not:p(function(e){var i=[],aD=[],aE=ab(e.replace(x,"$1"));return aE[ap]?p(function(aG,aL,aJ,aH){var aK,aF=aE(aG,null,aH,[]),aI=aG.length;while(aI--){if((aK=aF[aI])){aG[aI]=!(aL[aI]=aK)}}}):function(aH,aG,aF){i[0]=aH;aE(i,null,aF,aD);return !aD.pop()}}),has:p(function(e){return function(i){return B(e,i).length>0}}),contains:p(function(e){return function(i){return(i.textContent||i.innerText||M(i)).indexOf(e)>-1}}),lang:p(function(e){if(!Z.test(e||"")){B.error("unsupported lang: "+e)}e=e.replace(y,ak).toLowerCase();return function(aD){var i;do{if((i=an?aD.lang:aD.getAttribute("xml:lang")||aD.getAttribute("lang"))){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((aD=aD.parentNode)&&aD.nodeType===1);return false}}),target:function(e){var i=av.location&&av.location.hash;return i&&i.slice(1)===e.id},root:function(e){return e===u},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var i=e.nodeName.toLowerCase();return(i==="input"&&!!e.checked)||(i==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return !t.pseudos.empty(e)},header:function(e){return r.test(e.nodeName)},input:function(e){return h.test(e.nodeName)},button:function(i){var e=i.nodeName.toLowerCase();return e==="input"&&i.type==="button"||e==="button"},text:function(i){var e;return i.nodeName.toLowerCase()==="input"&&i.type==="text"&&((e=i.getAttribute("type"))==null||e.toLowerCase()==="text")},first:am(function(){return[0]}),last:am(function(e,i){return[i-1]}),eq:am(function(e,aD,i){return[i<0?i+aD:i]}),even:am(function(e,aE){var aD=0;for(;aD<aE;aD+=2){e.push(aD)}return e}),odd:am(function(e,aE){var aD=1;for(;aD<aE;aD+=2){e.push(aD)}return e}),lt:am(function(e,aF,aE){var aD=aE<0?aE+aF:aE;for(;--aD>=0;){e.push(aD)}return e}),gt:am(function(e,aF,aE){var aD=aE<0?aE+aF:aE;for(;++aD<aF;){e.push(aD)}return e})}};t.pseudos.nth=t.pseudos.eq;for(D in {radio:true,checkbox:true,file:true,password:true,image:true}){t.pseudos[D]=C(D)}for(D in {submit:true,reset:true}){t.pseudos[D]=g(D)}function aa(){}aa.prototype=t.filters=t.pseudos;t.setFilters=new aa();function n(aF,aK){var i,aG,aI,aJ,aH,aD,e,aE=ao[aF+" "];if(aE){return aK?0:aE.slice(0)}aH=aF;aD=[];e=t.preFilter;while(aH){if(!i||(aG=A.exec(aH))){if(aG){aH=aH.slice(aG[0].length)||aH}aD.push((aI=[]))}i=false;if((aG=G.exec(aH))){i=aG.shift();aI.push({value:i,type:aG[0].replace(x," ")});aH=aH.slice(i.length)}for(aJ in t.filter){if((aG=ah[aJ].exec(aH))&&(!e[aJ]||(aG=e[aJ](aG)))){i=aG.shift();aI.push({value:i,type:aJ,matches:aG});aH=aH.slice(i.length)}}if(!i){break}}return aK?aH.length:aH?B.error(aF):ao(aF,aD).slice(0)}function o(aF){var aE=0,aD=aF.length,e="";for(;aE<aD;aE++){e+=aF[aE].value}return e}function w(aF,aD,aE){var e=aD.dir,aG=aE&&e==="parentNode",i=aj++;return aD.first?function(aJ,aI,aH){while((aJ=aJ[e])){if(aJ.nodeType===1||aG){return aF(aJ,aI,aH)}}}:function(aL,aJ,aI){var aM,aK,aH=[az,i];if(aI){while((aL=aL[e])){if(aL.nodeType===1||aG){if(aF(aL,aJ,aI)){return true}}}}else{while((aL=aL[e])){if(aL.nodeType===1||aG){aK=aL[ap]||(aL[ap]={});if((aM=aK[e])&&aM[0]===az&&aM[1]===i){return(aH[2]=aM[2])}else{aK[e]=aH;if((aH[2]=aF(aL,aJ,aI))){return true}}}}}}}function aB(e){return e.length>1?function(aG,aF,aD){var aE=e.length;while(aE--){if(!e[aE](aG,aF,aD)){return false}}return true}:e[0]}function E(aD,aG,aF){var aE=0,e=aG.length;for(;aE<e;aE++){B(aD,aG[aE],aF)}return aF}function af(e,aD,aE,aF,aI){var aG,aL=[],aH=0,aJ=e.length,aK=aD!=null;for(;aH<aJ;aH++){if((aG=e[aH])){if(!aE||aE(aG,aF,aI)){aL.push(aG);if(aK){aD.push(aH)}}}}return aL}function m(aD,i,aF,aE,aG,e){if(aE&&!aE[ap]){aE=m(aE)}if(aG&&!aG[ap]){aG=m(aG,e)}return p(function(aR,aO,aJ,aQ){var aT,aP,aL,aK=[],aS=[],aI=aO.length,aH=aR||E(i||"*",aJ.nodeType?[aJ]:aJ,[]),aM=aD&&(aR||!i)?af(aH,aK,aD,aJ,aQ):aH,aN=aF?aG||(aR?aD:aI||aE)?[]:aO:aM;if(aF){aF(aM,aN,aJ,aQ)}if(aE){aT=af(aN,aS);aE(aT,[],aJ,aQ);aP=aT.length;while(aP--){if((aL=aT[aP])){aN[aS[aP]]=!(aM[aS[aP]]=aL)}}}if(aR){if(aG||aD){if(aG){aT=[];aP=aN.length;while(aP--){if((aL=aN[aP])){aT.push((aM[aP]=aL))}}aG(null,(aN=[]),aT,aQ)}aP=aN.length;while(aP--){if((aL=aN[aP])&&(aT=aG?j.call(aR,aL):aK[aP])>-1){aR[aT]=!(aO[aT]=aL)}}}}else{aN=af(aN===aO?aN.splice(aI,aN.length):aN);if(aG){aG(null,aO,aN,aQ)}else{b.apply(aO,aN)}}})}function aq(aI){var aD,aG,aE,aH=aI.length,aL=t.relative[aI[0].type],aM=aL||t.relative[" "],aF=aL?1:0,aJ=w(function(i){return i===aD},aM,true),aK=w(function(i){return j.call(aD,i)>-1},aM,true),e=[function(aO,aN,i){return(!aL&&(i||aN!==aC))||((aD=aN).nodeType?aJ(aO,aN,i):aK(aO,aN,i))}];for(;aF<aH;aF++){if((aG=t.relative[aI[aF].type])){e=[w(aB(e),aG)]}else{aG=t.filter[aI[aF].type].apply(null,aI[aF].matches);if(aG[ap]){aE=++aF;for(;aE<aH;aE++){if(t.relative[aI[aE].type]){break}}return m(aF>1&&aB(e),aF>1&&o(aI.slice(0,aF-1).concat({value:aI[aF-2].type===" "?"*":""})).replace(x,"$1"),aG,aF<aE&&aq(aI.slice(aF,aE)),aE<aH&&aq((aI=aI.slice(aE))),aE<aH&&o(aI))}e.push(aG)}}return aB(e)}function ad(aE,aD){var e=aD.length>0,aF=aE.length>0,i=function(aP,aJ,aO,aN,aS){var aK,aL,aQ,aU=0,aM="0",aG=aP&&[],aV=[],aT=aC,aI=aP||aF&&t.find.TAG("*",aS),aH=(az+=aT==null?1:Math.random()||0.1),aR=aI.length;if(aS){aC=aJ!==H&&aJ}for(;aM!==aR&&(aK=aI[aM])!=null;aM++){if(aF&&aK){aL=0;while((aQ=aE[aL++])){if(aQ(aK,aJ,aO)){aN.push(aK);break}}if(aS){az=aH}}if(e){if((aK=!aQ&&aK)){aU--}if(aP){aG.push(aK)}}}aU+=aM;if(e&&aM!==aU){aL=0;while((aQ=aD[aL++])){aQ(aG,aV,aJ,aO)}if(aP){if(aU>0){while(aM--){if(!(aG[aM]||aV[aM])){aV[aM]=at.call(aN)}}}aV=af(aV)}b.apply(aN,aV);if(aS&&!aP&&aV.length>0&&(aU+aD.length)>1){B.uniqueSort(aN)}}if(aS){az=aH;aC=aT}return aG};return e?p(i):i}ab=B.compile=function(e,aE){var aF,aD=[],aH=[],aG=L[e+" "];if(!aG){if(!aE){aE=n(e)}aF=aE.length;while(aF--){aG=aq(aE[aF]);if(aG[ap]){aD.push(aG)}else{aH.push(aG)}}aG=L(e,ad(aH,aD));aG.selector=e}return aG};ax=B.select=function(aE,e,aF,aI){var aG,aL,aD,aM,aJ,aK=typeof aE==="function"&&aE,aH=!aI&&n((aE=aK.selector||aE));aF=aF||[];if(aH.length===1){aL=aH[0]=aH[0].slice(0);if(aL.length>2&&(aD=aL[0]).type==="ID"&&ay.getById&&e.nodeType===9&&an&&t.relative[aL[1].type]){e=(t.find.ID(aD.matches[0].replace(y,ak),e)||[])[0];if(!e){return aF}else{if(aK){e=e.parentNode}}aE=aE.slice(aL.shift().value.length)}aG=ah.needsContext.test(aE)?0:aL.length;while(aG--){aD=aL[aG];if(t.relative[(aM=aD.type)]){break}if((aJ=t.find[aM])){if((aI=aJ(aD.matches[0].replace(y,ak),ag.test(aL[0].type)&&Y(e.parentNode)||e))){aL.splice(aG,1);aE=aI.length&&o(aL);if(!aE){b.apply(aF,aI);return aF}break}}}}(aK||ab(aE,aH))(aI,e,!an,aF,ag.test(aE)&&Y(e.parentNode)||e);return aF};ay.sortStable=ap.split("").sort(J).join("")===ap;ay.detectDuplicates=!!ac;ae();ay.sortDetached=l(function(e){return e.compareDocumentPosition(H.createElement("div"))&1});if(!l(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){aA("type|href|height|width",function(i,e,aD){if(!aD){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!ay.attributes||!l(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){aA("value",function(i,e,aD){if(!aD&&i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!l(function(e){return e.getAttribute("disabled")==null})){aA(c,function(i,e,aE){var aD;if(!aE){return i[e]===true?e.toLowerCase():(aD=i.getAttributeNode(e))&&aD.specified?aD.value:null}})}if(typeof define==="function"&&define.amd){define(function(){return B})}else{if(typeof module!=="undefined"&&module.exports){module.exports=B}else{av.Sizzle=B}}})(window);(function(c){var d=Prototype.Selector.extendElements;function a(e,f){return d(c(e,f||document))}function b(f,e){return c.matches(e,[f]).length==1}Prototype.Selector.engine=c;Prototype.Selector.select=a;Prototype.Selector.match=b})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(h,d){if(typeof d!="object"){d={hash:!!d}}else{if(Object.isUndefined(d.hash)){d.hash=true}}var e,g,a=false,f=d.submit,b,c;if(d.hash){c={};b=function(i,j,k){if(j in i){if(!Object.isArray(i[j])){i[j]=[i[j]]}i[j]=i[j].concat(k)}else{i[j]=k}return i}}else{c="";b=function(i,k,j){if(!Object.isArray(j)){j=[j]}if(!j.length){return i}var l=encodeURIComponent(k).gsub(/%20/,"+");return i+(i?"&":"")+j.map(function(m){m=m.gsub(/(\r)?\n/,"\r\n");m=encodeURIComponent(m);m=m.gsub(/%20/,"+");return l+"="+m}).join("&")}}return h.inject(c,function(i,j){if(!j.disabled&&j.name){e=j.name;g=$(j).getValue();if(g!=null&&j.type!="file"&&(j.type!="submit"||(!a&&f!==false&&(!f||e==f)&&(a=true)))){i=b(i,e,g)}}return i})}};Form.Methods={serialize:function(b,a){return Form.serializeElements(Form.getElements(b),a)},getElements:function(e){var f=$(e).getElementsByTagName("*");var d,c=[],b=Form.Element.Serializers;for(var a=0;d=f[a];a++){if(b[d.tagName.toLowerCase()]){c.push(Element.extend(d))}}return c},getInputs:function(g,c,d){g=$(g);var a=g.getElementsByTagName("input");if(!c&&!d){return $A(a).map(Element.extend)}for(var e=0,h=[],f=a.length;e<f;e++){var b=a[e];if((c&&b.type!=c)||(d&&b.name!=d)){continue}h.push(Element.extend(b))}return h},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(b){var c=$(b).getElements().findAll(function(d){return"hidden"!=d.type&&!d.disabled});var a=c.findAll(function(d){return d.hasAttribute("tabIndex")&&d.tabIndex>=0}).sortBy(function(d){return d.tabIndex}).first();return a?a:c.find(function(d){return/^(?:input|select|textarea)$/i.test(d.tagName)})},focusFirstElement:function(b){b=$(b);var a=b.findFirstElement();if(a){a.activate()}return b},request:function(b,a){b=$(b),a=Object.clone(a||{});var d=a.parameters,c=b.readAttribute("action")||"";if(c.blank()){c=window.location.href}a.parameters=b.serialize(true);if(d){if(Object.isString(d)){d=d.toQueryParams()}Object.extend(a.parameters,d)}if(b.hasAttribute("method")&&!a.method){a.method=b.method}return new Ajax.Request(c,a)}};Form.Element={focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}};Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(b!=undefined){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return $(a).value!=""},activate:function(a){a=$(a);try{a.focus();if(a.select&&(a.tagName.toLowerCase()!="input"||!(/^(?:button|reset|submit)$/i.test(a.type)))){a.select()}}catch(b){}return a},disable:function(a){a=$(a);a.disabled=true;return a},enable:function(a){a=$(a);a.disabled=false;return a}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;Form.Element.Serializers=(function(){function b(h,i){switch(h.type.toLowerCase()){case"checkbox":case"radio":return f(h,i);default:return e(h,i)}}function f(h,i){if(Object.isUndefined(i)){return h.checked?h.value:null}else{h.checked=!!i}}function e(h,i){if(Object.isUndefined(i)){return h.value}else{h.value=i}}function a(k,n){if(Object.isUndefined(n)){return(k.type==="select-one"?c:d)(k)}var j,l,o=!Object.isArray(n);for(var h=0,m=k.length;h<m;h++){j=k.options[h];l=this.optionValue(j);if(o){if(l==n){j.selected=true;return}}else{j.selected=n.include(l)}}}function c(i){var h=i.selectedIndex;return h>=0?g(i.options[h]):null}function d(l){var h,m=l.length;if(!m){return null}for(var k=0,h=[];k<m;k++){var j=l.options[k];if(j.selected){h.push(g(j))}}return h}function g(h){return Element.hasAttribute(h,"value")?h.value:h.text}return{input:b,inputSelector:f,textarea:e,select:a,selectOne:c,selectMany:d,optionValue:g,button:e}})();Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,a,b,c){$super(c,b);this.element=$(a);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a)){this.callback(this.element,a);this.lastValue=a}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var a=this.getValue();if(this.lastValue!=a){this.callback(this.element,a);this.lastValue=a}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type){switch(a.type.toLowerCase()){case"checkbox":case"radio":Event.observe(a,"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this));break}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});(function(D){var u=document.createElement("div");var d=document.documentElement;var k="onmouseenter" in d&&"onmouseleave" in d;var L={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45};var z=function(X){return false};if(window.attachEvent){if(window.addEventListener){z=function(X){return !(X instanceof window.Event)}}else{z=function(X){return true}}}var O;function M(Y,X){return Y.which?(Y.which===X+1):(Y.button===X)}var W={0:1,1:4,2:2};function S(Y,X){return Y.button===W[X]}function P(Y,X){switch(X){case 0:return Y.which==1&&!Y.metaKey;case 1:return Y.which==2||(Y.which==1&&Y.metaKey);case 2:return Y.which==3;default:return false}}if(window.attachEvent){if(!window.addEventListener){O=S}else{O=function(Y,X){return z(Y)?S(Y,X):M(Y,X)}}}else{if(Prototype.Browser.WebKit){O=P}else{O=M}}function B(X){return O(X,0)}function i(X){return O(X,1)}function e(X){return O(X,2)}function o(X){return Element.extend(K(X))}function K(Z){Z=L.extend(Z);var Y=Z.target,X=Z.type,aa=Z.currentTarget;if(aa&&aa.tagName){if(X==="load"||X==="error"||(X==="click"&&aa.tagName.toLowerCase()==="input"&&aa.type==="radio")){Y=aa}}return Y.nodeType==Node.TEXT_NODE?Y.parentNode:Y}function j(Z,aa){var Y=K(Z),X=Prototype.Selector;if(!aa){return Element.extend(Y)}while(Y){if(Object.isElement(Y)&&X.match(Y,aa)){return Element.extend(Y)}Y=Y.parentNode}}function t(X){return{x:U(X),y:T(X)}}function U(Z){var Y=document.documentElement,X=document.body||{scrollLeft:0};return Z.pageX||(Z.clientX+(Y.scrollLeft||X.scrollLeft)-(Y.clientLeft||0))}function T(Z){var Y=document.documentElement,X=document.body||{scrollTop:0};return Z.pageY||(Z.clientY+(Y.scrollTop||X.scrollTop)-(Y.clientTop||0))}function r(X){L.extend(X);X.preventDefault();X.stopPropagation();X.stopped=true}L.Methods={isLeftClick:B,isMiddleClick:i,isRightClick:e,element:o,findElement:j,pointer:t,pointerX:U,pointerY:T,stop:r};var H=Object.keys(L.Methods).inject({},function(X,Y){X[Y]=L.Methods[Y].methodize();return X});if(window.attachEvent){function V(Y){var X;switch(Y.type){case"mouseover":case"mouseenter":X=Y.fromElement;break;case"mouseout":case"mouseleave":X=Y.toElement;break;default:return null}return Element.extend(X)}var Q={stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}};L.extend=function(Y,X){if(!Y){return false}if(!z(Y)){return Y}if(Y._extendedByPrototype){return Y}Y._extendedByPrototype=Prototype.emptyFunction;var Z=L.pointer(Y);Object.extend(Y,{target:Y.srcElement||X,relatedTarget:V(Y),pageX:Z.x,pageY:Z.y});Object.extend(Y,H);Object.extend(Y,Q);return Y}}else{L.extend=Prototype.K}if(window.addEventListener){L.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(L.prototype,H)}var v={mouseenter:"mouseover",mouseleave:"mouseout"};function f(X){return v[X]||X}if(k){f=Prototype.K}function R(X){if(X===window){return 0}if(typeof X._prototypeUID==="undefined"){X._prototypeUID=Element.Storage.UID++}return X._prototypeUID}function I(X){if(X===window){return 0}if(X==document){return 1}return X.uniqueID}if("uniqueID" in u){R=I}function x(X){return X.include(":")}L._isCustomEvent=x;function A(Z,Y){var X=D.Event.cache;if(Object.isUndefined(Y)){Y=R(Z)}if(!X[Y]){X[Y]={element:Z}}return X[Y]}function E(Y,X){if(Object.isUndefined(X)){X=R(Y)}delete D.Event.cache[X]}function h(Z,ac,af){var X=A(Z);if(!X[ac]){X[ac]=[]}var ab=X[ac];var aa=ab.length;while(aa--){if(ab[aa].handler===af){return null}}var ad=R(Z);var Y=D.Event._createResponder(ad,ac,af);var ae={responder:Y,handler:af};ab.push(ae);return ae}function s(ac,Z,ad){var Y=A(ac);var X=Y[Z];if(!X){return}var ab=X.length,ae;while(ab--){if(X[ab].handler===ad){ae=X[ab];break}}if(!ae){return}var aa=X.indexOf(ae);X.splice(aa,1);return ae}function c(Z,Y,aa){Z=$(Z);var ab=h(Z,Y,aa);if(ab===null){return Z}var X=ab.responder;if(x(Y)){p(Z,Y,X)}else{m(Z,Y,X)}return Z}function m(aa,Z,Y){var X=f(Z);if(aa.addEventListener){aa.addEventListener(X,Y,false)}else{aa.attachEvent("on"+X,Y)}}function p(Z,Y,X){if(Z.addEventListener){Z.addEventListener("dataavailable",X,false)}else{Z.attachEvent("ondataavailable",X);Z.attachEvent("onlosecapture",X)}}function J(Y,X,Z){Y=$(Y);var ab=!Object.isUndefined(Z),ac=!Object.isUndefined(X);if(!ac&&!ab){y(Y);return Y}if(!ab){G(Y,X);return Y}var aa=s(Y,X,Z);if(!aa){return Y}a(Y,X,aa.responder);return Y}function C(aa,Z,Y){var X=f(Z);if(aa.removeEventListener){aa.removeEventListener(X,Y,false)}else{aa.detachEvent("on"+X,Y)}}function b(Z,Y,X){if(Z.removeEventListener){Z.removeEventListener("dataavailable",X,false)}else{Z.detachEvent("ondataavailable",X);Z.detachEvent("onlosecapture",X)}}function y(ac){var ab=R(ac),Z=D.Event.cache[ab];if(!Z){return}E(ac,ab);var X,aa;for(var Y in Z){if(Y==="element"){continue}X=Z[Y];aa=X.length;while(aa--){a(ac,Y,X[aa].responder)}}}function G(ab,Z){var Y=A(ab);var X=Y[Z];if(!X){return}delete Y[Z];var aa=X.length;while(aa--){a(ab,Z,X[aa].responder)}}function a(Y,X,Z){if(x(X)){b(Y,X,Z)}else{C(Y,X,Z)}}function g(X){if(X!==document){return X}if(document.createEvent&&!X.dispatchEvent){return document.documentElement}return X}function w(aa,Z,Y,X){aa=g($(aa));if(Object.isUndefined(X)){X=true}Y=Y||{};var ab=N(aa,Z,Y,X);return L.extend(ab)}function l(aa,Z,Y,X){var ab=document.createEvent("HTMLEvents");ab.initEvent("dataavailable",X,true);ab.eventName=Z;ab.memo=Y;aa.dispatchEvent(ab);return ab}function n(aa,Z,Y,X){var ab=document.createEventObject();ab.eventType=X?"ondataavailable":"onlosecapture";ab.eventName=Z;ab.memo=Y;aa.fireEvent(ab.eventType,ab);return ab}var N=document.createEvent?l:n;L.Handler=Class.create({initialize:function(Z,Y,X,aa){this.element=$(Z);this.eventName=Y;this.selector=X;this.callback=aa;this.handler=this.handleEvent.bind(this)},start:function(){L.observe(this.element,this.eventName,this.handler);return this},stop:function(){L.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(Y){var X=L.findElement(Y,this.selector);if(X){this.callback.call(this.element,Y,X)}}});function F(Z,Y,X,aa){Z=$(Z);if(Object.isFunction(X)&&Object.isUndefined(aa)){aa=X,X=null}return new L.Handler(Z,Y,X,aa).start()}Object.extend(L,L.Methods);Object.extend(L,{fire:w,observe:c,stopObserving:J,on:F});Element.addMethods({fire:w,observe:c,stopObserving:J,on:F});Object.extend(document,{fire:w.methodize(),observe:c.methodize(),stopObserving:J.methodize(),on:F.methodize(),loaded:false});if(D.Event){Object.extend(window.Event,L)}else{D.Event=L}D.Event.cache={};function q(){D.Event.cache=null}if(window.attachEvent){window.attachEvent("onunload",q)}u=null;d=null})(this);(function(c){var g=document.documentElement;var b="onmouseenter" in g&&"onmouseleave" in g;function f(h){return !b&&(h==="mouseenter"||h==="mouseleave")}function d(i,h,j){if(Event._isCustomEvent(h)){return e(i,h,j)}if(f(h)){return a(i,h,j)}return function(l){if(!Event.cache){return}var k=Event.cache[i].element;Event.extend(l,k);j.call(k,l)}}function e(i,h,j){return function(l){var k=Event.cache[i].element;if(Object.isUndefined(l.eventName)){return false}if(l.eventName!==h){return false}Event.extend(l,k);j.call(k,l)}}function a(i,h,j){return function(m){var k=Event.cache[i].element;Event.extend(m,k);var l=m.relatedTarget;while(l&&l!==k){try{l=l.parentNode}catch(n){l=k}}if(l===k){return}j.call(k,m)}}c.Event._createResponder=d;g=null})(this);(function(a){var e;function b(){if(document.loaded){return}if(e){window.clearTimeout(e)}document.loaded=true;document.fire("dom:loaded")}function d(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",d);b()}}function c(){try{document.documentElement.doScroll("left")}catch(f){e=c.defer();return}b()}if(document.readyState==="complete"){b();return}if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false)}else{document.attachEvent("onreadystatechange",d);if(window==top){e=c.defer()}}Event.observe(window,"load",b)})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(b,a,c){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(b,a,c)}this.xcomp=a;this.ycomp=c;this.offset=Element.cumulativeOffset(b);return(c>=this.offset[1]&&c<this.offset[1]+b.offsetHeight&&a>=this.offset[0]&&a<this.offset[0]+b.offsetWidth)},withinIncludingScrolloffsets:function(b,a,d){var c=Element.cumulativeScrollOffset(b);this.xcomp=a+c[0]-this.deltaX;this.ycomp=d+c[1]-this.deltaY;this.offset=Element.cumulativeOffset(b);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+b.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+b.offsetWidth)},overlap:function(b,a){if(!b){return 0}if(b=="vertical"){return((this.offset[1]+a.offsetHeight)-this.ycomp)/a.offsetHeight}if(b=="horizontal"){return((this.offset[0]+a.offsetWidth)-this.xcomp)/a.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(b,c,a){a=a||{};return Element.clonePosition(c,b,a)}};if(!document.getElementsByClassName){document.getElementsByClassName=function(b){function a(c){return c.blank()?null:"[contains(concat(' ', @class, ' '), ' "+c+" ')]"}b.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(c,e){e=e.toString().strip();var d=/\s/.test(e)?$w(e).map(a).join(""):a(e);return d?document._getElementsByXPath(".//*"+d,c):[]}:function(e,f){f=f.toString().strip();var g=[],h=(/\s/.test(f)?$w(f):null);if(!h&&!f){return g}var c=$(e).getElementsByTagName("*");f=" "+f+" ";for(var d=0,k,j;k=c[d];d++){if(k.className&&(j=" "+k.className+" ")&&(j.include(f)||(h&&h.all(function(i){return !i.toString().blank()&&j.include(" "+i+" ")})))){g.push(Element.extend(k))}}return g};return function(d,c){return $(c||document.body).getElementsByClassName(d)}}(Element.Methods)}Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(b,a){this.element.className.split(/\s+/).select(function(c){return c.length>0})._each(b,a)},set:function(a){this.element.className=a},add:function(a){if(this.include(a)){return}this.set($A(this).concat(a).join(" "))},remove:function(a){if(!this.include(a)){return}this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(f,g){var a=Prototype.Selector.match,d=[];for(var c=0,e=f.length;c<e;c++){var b=f[c];if(a(b,g)){d.push(Element.extend(b))}}return d},findElement:function(f,g,b){b=b||0;var a=0,d;for(var c=0,e=f.length;c<e;c++){d=f[c];if(Prototype.Selector.match(d,g)&&b===a++){return Element.extend(d)}}},findChildElements:function(b,c){var a=c.toArray().join(", ");return Prototype.Selector.select(a,b||document)}})})();/*
//
// Prototype Window Class
//
// Copyright (c) 2006 Sbastien Gruhier (http://xilinus.com, http://itseb.com)
// 
// Permission is hereby granted, free of charge, to any person obtaining
// a copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to
// permit persons to whom the Software is furnished to do so, subject to
// the following conditions:
// 
// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// VERSION 1.3
*/
var Window=Class.create();Window.keepMultiModalWindow=false;Window.hasEffectLib=(typeof Effect!="undefined");Window.resizeEffectDuration=0.4;Window.prototype={initialize:function(){var c;var b=0;if(arguments.length>0){if(typeof arguments[0]=="string"){c=arguments[0];b=1}else{c=arguments[0]?arguments[0].id:null}}if(!c){c="window_"+new Date().getTime()}if($(c)){alert("Window "+c+" is already registered in the DOM! Make sure you use setDestroyOnClose() or destroyOnClose: true in the constructor")}this.options=Object.extend({className:"dialog",blurClassName:null,minWidth:100,minHeight:20,resizable:true,closable:true,minimizable:true,maximizable:true,draggable:true,userData:null,showEffect:(Window.hasEffectLib?Effect.Appear:Element.show),hideEffect:(Window.hasEffectLib?Effect.Fade:Element.hide),showEffectOptions:{},hideEffectOptions:{},effectOptions:null,parent:document.body,title:"&nbsp;",url:null,onload:Prototype.emptyFunction,width:200,height:300,opacity:1,recenterAuto:true,wiredDrag:false,closeCallback:null,destroyOnClose:false,gridX:1,gridY:1},arguments[b]||{});if(this.options.blurClassName){this.options.focusClassName=this.options.className}if(typeof this.options.top=="undefined"&&typeof this.options.bottom=="undefined"){this.options.top=this._round(Math.random()*500,this.options.gridY)}if(typeof this.options.left=="undefined"&&typeof this.options.right=="undefined"){this.options.left=this._round(Math.random()*500,this.options.gridX)}if(this.options.effectOptions){Object.extend(this.options.hideEffectOptions,this.options.effectOptions);Object.extend(this.options.showEffectOptions,this.options.effectOptions);if(this.options.showEffect==Element.Appear){this.options.showEffectOptions.to=this.options.opacity}}if(Window.hasEffectLib){if(this.options.showEffect==Effect.Appear){this.options.showEffectOptions.to=this.options.opacity}if(this.options.hideEffect==Effect.Fade){this.options.hideEffectOptions.from=this.options.opacity}}if(this.options.hideEffect==Element.hide){this.options.hideEffect=function(){Element.hide(this.element);if(this.options.destroyOnClose){this.destroy()}}.bind(this)}if(this.options.parent!=document.body){this.options.parent=$(this.options.parent)}this.element=this._createWindow(c);this.element.win=this;this.eventMouseDown=this._initDrag.bindAsEventListener(this);this.eventMouseUp=this._endDrag.bindAsEventListener(this);this.eventMouseMove=this._updateDrag.bindAsEventListener(this);this.eventOnLoad=this._getWindowBorderSize.bindAsEventListener(this);this.eventMouseDownContent=this.toFront.bindAsEventListener(this);this.eventResize=this._recenter.bindAsEventListener(this);this.topbar=$(this.element.id+"_top");this.bottombar=$(this.element.id+"_bottom");this.content=$(this.element.id+"_content");Event.observe(this.topbar,"mousedown",this.eventMouseDown);Event.observe(this.bottombar,"mousedown",this.eventMouseDown);Event.observe(this.content,"mousedown",this.eventMouseDownContent);Event.observe(window,"load",this.eventOnLoad);Event.observe(window,"resize",this.eventResize);Event.observe(window,"scroll",this.eventResize);Event.observe(this.options.parent,"scroll",this.eventResize);if(this.options.draggable){var a=this;[this.topbar,this.topbar.up().previous(),this.topbar.up().next()].each(function(d){d.observe("mousedown",a.eventMouseDown);d.addClassName("top_draggable")});[this.bottombar.up(),this.bottombar.up().previous(),this.bottombar.up().next()].each(function(d){d.observe("mousedown",a.eventMouseDown);d.addClassName("bottom_draggable")})}if(this.options.resizable){this.sizer=$(this.element.id+"_sizer");Event.observe(this.sizer,"mousedown",this.eventMouseDown)}this.useLeft=null;this.useTop=null;if(typeof this.options.left!="undefined"){this.element.setStyle({left:parseFloat(this.options.left)+"px"});this.useLeft=true}else{this.element.setStyle({right:parseFloat(this.options.right)+"px"});this.useLeft=false}if(typeof this.options.top!="undefined"){this.element.setStyle({top:parseFloat(this.options.top)+"px"});this.useTop=true}else{this.element.setStyle({bottom:parseFloat(this.options.bottom)+"px"});this.useTop=false}this.storedLocation=null;this.setOpacity(this.options.opacity);if(this.options.zIndex){this.setZIndex(this.options.zIndex)}if(this.options.destroyOnClose){this.setDestroyOnClose(true)}this._getWindowBorderSize();this.width=this.options.width;this.height=this.options.height;this.visible=false;this.constraint=false;this.constraintPad={top:0,left:0,bottom:0,right:0};if(this.width&&this.height){this.setSize(this.options.width,this.options.height)}this.setTitle(this.options.title);Windows.register(this)},destroy:function(){this._notify("onDestroy");Event.stopObserving(this.topbar,"mousedown",this.eventMouseDown);Event.stopObserving(this.bottombar,"mousedown",this.eventMouseDown);Event.stopObserving(this.content,"mousedown",this.eventMouseDownContent);Event.stopObserving(window,"load",this.eventOnLoad);Event.stopObserving(window,"resize",this.eventResize);Event.stopObserving(window,"scroll",this.eventResize);Event.stopObserving(this.content,"load",this.options.onload);if(this._oldParent){var c=this.getContent();var a=null;for(var b=0;b<c.childNodes.length;b++){a=c.childNodes[b];if(a.nodeType==1){break}a=null}if(a){this._oldParent.appendChild(a)}this._oldParent=null}if(this.sizer){Event.stopObserving(this.sizer,"mousedown",this.eventMouseDown)}if(this.options.url){this.content.src=null}if(this.iefix){Element.remove(this.iefix)}Element.remove(this.element);Windows.unregister(this)},setCloseCallback:function(a){this.options.closeCallback=a},getContent:function(){return this.content},setContent:function(h,g,b){var a=$(h);if(null==a){throw"Unable to find element '"+h+"' in DOM"}this._oldParent=a.parentNode;var f=null;var e=null;if(g){f=Element.getDimensions(a)}if(b){e=Position.cumulativeOffset(a)}var c=this.getContent();this.setHTMLContent("");c=this.getContent();c.appendChild(a);a.show();if(g){this.setSize(f.width,f.height)}if(b){this.setLocation(e[1]-this.heightN,e[0]-this.widthW)}},setHTMLContent:function(a){if(this.options.url){this.content.src=null;this.options.url=null;var b='<div id="'+this.getId()+'_content" class="'+this.options.className+'_content"> </div>';$(this.getId()+"_table_content").innerHTML=b;this.content=$(this.element.id+"_content")}this.getContent().innerHTML=a},setAjaxContent:function(b,a,d,c){this.showFunction=d?"showCenter":"show";this.showModal=c||false;a=a||{};this.setHTMLContent("");this.onComplete=a.onComplete;if(!this._onCompleteHandler){this._onCompleteHandler=this._setAjaxContent.bind(this)}a.onComplete=this._onCompleteHandler;new Ajax.Request(b,a);a.onComplete=this.onComplete},_setAjaxContent:function(a){Element.update(this.getContent(),a.responseText);if(this.onComplete){this.onComplete(a)}this.onComplete=null;this[this.showFunction](this.showModal)},setURL:function(a){if(this.options.url){this.content.src=null}this.options.url=a;var b="<iframe frameborder='0' name='"+this.getId()+"_content'  id='"+this.getId()+"_content' src='"+a+"' width='"+this.width+"' height='"+this.height+"'> </iframe>";$(this.getId()+"_table_content").innerHTML=b;this.content=$(this.element.id+"_content")},getURL:function(){return this.options.url?this.options.url:null},refresh:function(){if(this.options.url){$(this.element.getAttribute("id")+"_content").src=this.options.url}},setCookie:function(b,c,n,e,a){b=b||this.element.id;this.cookie=[b,c,n,e,a];var l=WindowUtilities.getCookie(b);if(l){var m=l.split(",");var j=m[0].split(":");var i=m[1].split(":");var k=parseFloat(m[2]),f=parseFloat(m[3]);var g=m[4];var d=m[5];this.setSize(k,f);if(g=="true"){this.doMinimize=true}else{if(d=="true"){this.doMaximize=true}}this.useLeft=j[0]=="l";this.useTop=i[0]=="t";this.element.setStyle(this.useLeft?{left:j[1]}:{right:j[1]});this.element.setStyle(this.useTop?{top:i[1]}:{bottom:i[1]})}},getId:function(){return this.element.id},setDestroyOnClose:function(){this.options.destroyOnClose=true},setConstraint:function(a,b){this.constraint=a;this.constraintPad=Object.extend(this.constraintPad,b||{});if(this.useTop&&this.useLeft){this.setLocation(parseFloat(this.element.style.top),parseFloat(this.element.style.left))}},_initDrag:function(b){if(Event.element(b)==this.sizer&&this.isMinimized()){return}if(Event.element(b)!=this.sizer&&this.isMaximized()){return}if(Prototype.Browser.IE&&this.heightN==0){this._getWindowBorderSize()}this.pointer=[this._round(Event.pointerX(b),this.options.gridX),this._round(Event.pointerY(b),this.options.gridY)];if(this.options.wiredDrag){this.currentDrag=this._createWiredElement()}else{this.currentDrag=this.element}if(Event.element(b)==this.sizer){this.doResize=true;this.widthOrg=this.width;this.heightOrg=this.height;this.bottomOrg=parseFloat(this.element.getStyle("bottom"));this.rightOrg=parseFloat(this.element.getStyle("right"));this._notify("onStartResize")}else{this.doResize=false;var a=$(this.getId()+"_close");if(a&&Position.within(a,this.pointer[0],this.pointer[1])){this.currentDrag=null;return}this.toFront();if(!this.options.draggable){return}this._notify("onStartMove")}Event.observe(document,"mouseup",this.eventMouseUp,false);Event.observe(document,"mousemove",this.eventMouseMove,false);WindowUtilities.disableScreen("__invisible__","__invisible__",this.overlayOpacity);document.body.ondrag=function(){return false};document.body.onselectstart=function(){return false};this.currentDrag.show();Event.stop(b)},_round:function(b,a){return a==1?b:b=Math.floor(b/a)*a},_updateDrag:function(b){var a=[this._round(Event.pointerX(b),this.options.gridX),this._round(Event.pointerY(b),this.options.gridY)];var k=a[0]-this.pointer[0];var j=a[1]-this.pointer[1];if(this.doResize){var i=this.widthOrg+k;var d=this.heightOrg+j;k=this.width-this.widthOrg;j=this.height-this.heightOrg;if(this.useLeft){i=this._updateWidthConstraint(i)}else{this.currentDrag.setStyle({right:(this.rightOrg-k)+"px"})}if(this.useTop){d=this._updateHeightConstraint(d)}else{this.currentDrag.setStyle({bottom:(this.bottomOrg-j)+"px"})}this.setSize(i,d);this._notify("onResize")}else{this.pointer=a;if(this.useLeft){var c=parseFloat(this.currentDrag.getStyle("left"))+k;var g=this._updateLeftConstraint(c);this.pointer[0]+=g-c;this.currentDrag.setStyle({left:g+"px"})}else{this.currentDrag.setStyle({right:parseFloat(this.currentDrag.getStyle("right"))-k+"px"})}if(this.useTop){var f=parseFloat(this.currentDrag.getStyle("top"))+j;var e=this._updateTopConstraint(f);this.pointer[1]+=e-f;this.currentDrag.setStyle({top:e+"px"})}else{this.currentDrag.setStyle({bottom:parseFloat(this.currentDrag.getStyle("bottom"))-j+"px"})}this._notify("onMove")}if(this.iefix){this._fixIEOverlapping()}this._removeStoreLocation();Event.stop(b)},_endDrag:function(a){WindowUtilities.enableScreen("__invisible__");if(this.doResize){this._notify("onEndResize")}else{this._notify("onEndMove")}Event.stopObserving(document,"mouseup",this.eventMouseUp,false);Event.stopObserving(document,"mousemove",this.eventMouseMove,false);Event.stop(a);this._hideWiredElement();this._saveCookie();document.body.ondrag=null;document.body.onselectstart=null},_updateLeftConstraint:function(b){if(this.constraint&&this.useLeft&&this.useTop){var a=this.options.parent==document.body?WindowUtilities.getPageSize().windowWidth:this.options.parent.getDimensions().width;if(b<this.constraintPad.left){b=this.constraintPad.left}if(b+this.width+this.widthE+this.widthW>a-this.constraintPad.right){b=a-this.constraintPad.right-this.width-this.widthE-this.widthW}}return b},_updateTopConstraint:function(c){if(this.constraint&&this.useLeft&&this.useTop){var a=this.options.parent==document.body?WindowUtilities.getPageSize().windowHeight:this.options.parent.getDimensions().height;var b=this.height+this.heightN+this.heightS;if(c<this.constraintPad.top){c=this.constraintPad.top}if(c+b>a-this.constraintPad.bottom){c=a-this.constraintPad.bottom-b}}return c},_updateWidthConstraint:function(a){if(this.constraint&&this.useLeft&&this.useTop){var b=this.options.parent==document.body?WindowUtilities.getPageSize().windowWidth:this.options.parent.getDimensions().width;var c=parseFloat(this.element.getStyle("left"));if(c+a+this.widthE+this.widthW>b-this.constraintPad.right){a=b-this.constraintPad.right-c-this.widthE-this.widthW}}return a},_updateHeightConstraint:function(b){if(this.constraint&&this.useLeft&&this.useTop){var a=this.options.parent==document.body?WindowUtilities.getPageSize().windowHeight:this.options.parent.getDimensions().height;var c=parseFloat(this.element.getStyle("top"));if(c+b+this.heightN+this.heightS>a-this.constraintPad.bottom){b=a-this.constraintPad.bottom-c-this.heightN-this.heightS}}return b},_createWindow:function(a){var f=this.options.className;var d=document.createElement("div");d.setAttribute("id",a);d.className="dialog";var e;if(this.options.url){e='<iframe frameborder="0" name="'+a+'_content"  id="'+a+'_content" src="'+this.options.url+'"> </iframe>'}else{e='<div id="'+a+'_content" class="'+f+'_content"> </div>'}var g=this.options.closable?"<div class='"+f+"_close' id='"+a+"_close' onclick='Windows.close(\""+a+"\", event)'> </div>":"";var h=this.options.minimizable?"<div class='"+f+"_minimize' id='"+a+"_minimize' onclick='Windows.minimize(\""+a+"\", event)'> </div>":"";var i=this.options.maximizable?"<div class='"+f+"_maximize' id='"+a+"_maximize' onclick='Windows.maximize(\""+a+"\", event)'> </div>":"";var c=this.options.resizable?"class='"+f+"_sizer' id='"+a+"_sizer'":"class='"+f+"_se'";var b="../themes/default/blank.gif";d.innerHTML=g+h+i+"      <table id='"+a+"_row1' class=\"top table_window\">        <tr>          <td class='"+f+"_nw'></td>          <td class='"+f+"_n'><div id='"+a+"_top' class='"+f+"_title title_window'>"+this.options.title+"</div></td>          <td class='"+f+"_ne'></td>        </tr>      </table>      <table id='"+a+"_row2' class=\"mid table_window\">        <tr>          <td class='"+f+"_w'></td>            <td id='"+a+"_table_content' class='"+f+"_content' valign='top'>"+e+"</td>          <td class='"+f+"_e'></td>        </tr>      </table>        <table id='"+a+"_row3' class=\"bot table_window\">        <tr>          <td class='"+f+"_sw'></td>            <td class='"+f+"_s'><div id='"+a+"_bottom' class='status_bar'><span style='float:left; width:1px; height:1px'></span></div></td>            <td "+c+"></td>        </tr>      </table>    ";Element.hide(d);this.options.parent.insertBefore(d,this.options.parent.firstChild);Event.observe($(a+"_content"),"load",this.options.onload);return d},changeClassName:function(a){var b=this.options.className;var c=this.getId();$A(["_close","_minimize","_maximize","_sizer","_content"]).each(function(d){this._toggleClassName($(c+d),b+d,a+d)}.bind(this));this._toggleClassName($(c+"_top"),b+"_title",a+"_title");$$("#"+c+" td").each(function(d){d.className=d.className.sub(b,a)});this.options.className=a},_toggleClassName:function(c,b,a){if(c){c.removeClassName(b);c.addClassName(a)}},setLocation:function(c,b){c=this._updateTopConstraint(c);b=this._updateLeftConstraint(b);var a=this.currentDrag||this.element;a.setStyle({top:c+"px"});a.setStyle({left:b+"px"});this.useLeft=true;this.useTop=true},getLocation:function(){var a={};if(this.useTop){a=Object.extend(a,{top:this.element.getStyle("top")})}else{a=Object.extend(a,{bottom:this.element.getStyle("bottom")})}if(this.useLeft){a=Object.extend(a,{left:this.element.getStyle("left")})}else{a=Object.extend(a,{right:this.element.getStyle("right")})}return a},getSize:function(){return{width:this.width,height:this.height}},setSize:function(c,b,a){c=parseFloat(c);b=parseFloat(b);if(!this.minimized&&c<this.options.minWidth){c=this.options.minWidth}if(!this.minimized&&b<this.options.minHeight){b=this.options.minHeight}if(this.options.maxHeight&&b>this.options.maxHeight){b=this.options.maxHeight}if(this.options.maxWidth&&c>this.options.maxWidth){c=this.options.maxWidth}if(this.useTop&&this.useLeft&&Window.hasEffectLib&&Effect.ResizeWindow&&a){new Effect.ResizeWindow(this,null,null,c,b,{duration:Window.resizeEffectDuration})}else{this.width=c;this.height=b;var f=this.currentDrag?this.currentDrag:this.element;f.setStyle({width:c+this.widthW+this.widthE+"px"});f.setStyle({height:b+this.heightN+this.heightS+"px"});if(!this.currentDrag||this.currentDrag==this.element){var d=$(this.element.id+"_content");d.setStyle({height:b+"px"});d.setStyle({width:c+"px"})}}},updateHeight:function(){this.setSize(this.width,this.content.scrollHeight,true)},updateWidth:function(){this.setSize(this.content.scrollWidth,this.height,true)},toFront:function(){if(this.element.style.zIndex<Windows.maxZIndex){this.setZIndex(Windows.maxZIndex+1)}if(this.iefix){this._fixIEOverlapping()}},getBounds:function(b){if(!this.width||!this.height||!this.visible){this.computeBounds()}var a=this.width;var c=this.height;if(!b){a+=this.widthW+this.widthE;c+=this.heightN+this.heightS}var d=Object.extend(this.getLocation(),{width:a+"px",height:c+"px"});return d},computeBounds:function(){if(!this.width||!this.height){var a=WindowUtilities._computeSize(this.content.innerHTML,this.content.id,this.width,this.height,0,this.options.className);if(this.height){this.width=a+5}else{this.height=a+5}}this.setSize(this.width,this.height);if(this.centered){this._center(this.centerTop,this.centerLeft)}},show:function(b){this.visible=true;if(b){if(typeof this.overlayOpacity=="undefined"){var a=this;setTimeout(function(){a.show(b)},10);return}Windows.addModalWindow(this);this.modal=true;this.setZIndex(Windows.maxZIndex+1);Windows.unsetOverflow(this)}else{if(!this.element.style.zIndex){this.setZIndex(Windows.maxZIndex+1)}}if(this.oldStyle){this.getContent().setStyle({overflow:this.oldStyle})}this.computeBounds();this._notify("onBeforeShow");if(this.options.showEffect!=Element.show&&this.options.showEffectOptions){this.options.showEffect(this.element,this.options.showEffectOptions)}else{this.options.showEffect(this.element)}this._checkIEOverlapping();WindowUtilities.focusedWindow=this;this._notify("onShow")},showCenter:function(a,c,b){this.centered=true;this.centerTop=c;this.centerLeft=b;this.show(a)},isVisible:function(){return this.visible},_center:function(c,b){var d=WindowUtilities.getWindowScroll(this.options.parent);var a=WindowUtilities.getPageSize(this.options.parent);if(typeof c=="undefined"){c=(a.windowHeight-(this.height+this.heightN+this.heightS))/2}c+=d.top;if(typeof b=="undefined"){b=(a.windowWidth-(this.width+this.widthW+this.widthE))/2}b+=d.left;this.setLocation(c,b);this.toFront()},_recenter:function(b){if(this.centered){var a=WindowUtilities.getPageSize(this.options.parent);var c=WindowUtilities.getWindowScroll(this.options.parent);if(this.pageSize&&this.pageSize.windowWidth==a.windowWidth&&this.pageSize.windowHeight==a.windowHeight&&this.windowScroll.left==c.left&&this.windowScroll.top==c.top){return}this.pageSize=a;this.windowScroll=c;if($("overlay_modal")){$("overlay_modal").setStyle({height:(a.pageHeight+"px")})}if(this.options.recenterAuto){this._center(this.centerTop,this.centerLeft)}}},hide:function(){this.visible=false;if(this.modal){Windows.removeModalWindow(this);Windows.resetOverflow()}this.oldStyle=this.getContent().getStyle("overflow")||"auto";this.getContent().setStyle({overflow:"hidden"});this.options.hideEffect(this.element,this.options.hideEffectOptions);if(this.iefix){this.iefix.hide()}if(!this.doNotNotifyHide){this._notify("onHide")}},close:function(){if(this.visible){if(this.options.closeCallback&&!this.options.closeCallback(this)){return}if(this.options.destroyOnClose){var a=this.destroy.bind(this);if(this.options.hideEffectOptions.afterFinish){var b=this.options.hideEffectOptions.afterFinish;this.options.hideEffectOptions.afterFinish=function(){b();a()}}else{this.options.hideEffectOptions.afterFinish=function(){a()}}}Windows.updateFocusedWindow();this.doNotNotifyHide=true;this.hide();this.doNotNotifyHide=false;this._notify("onClose")}},minimize:function(){if(this.resizing){return}var a=$(this.getId()+"_row2");if(!this.minimized){this.minimized=true;var d=a.getDimensions().height;this.r2Height=d;var c=this.element.getHeight()-d;if(this.useLeft&&this.useTop&&Window.hasEffectLib&&Effect.ResizeWindow){new Effect.ResizeWindow(this,null,null,null,this.height-d,{duration:Window.resizeEffectDuration})}else{this.height-=d;this.element.setStyle({height:c+"px"});a.hide()}if(!this.useTop){var b=parseFloat(this.element.getStyle("bottom"));this.element.setStyle({bottom:(b+d)+"px"})}}else{this.minimized=false;var d=this.r2Height;this.r2Height=null;if(this.useLeft&&this.useTop&&Window.hasEffectLib&&Effect.ResizeWindow){new Effect.ResizeWindow(this,null,null,null,this.height+d,{duration:Window.resizeEffectDuration})}else{var c=this.element.getHeight()+d;this.height+=d;this.element.setStyle({height:c+"px"});a.show()}if(!this.useTop){var b=parseFloat(this.element.getStyle("bottom"));this.element.setStyle({bottom:(b-d)+"px"})}this.toFront()}this._notify("onMinimize");this._saveCookie()},maximize:function(){if(this.isMinimized()||this.resizing){return}if(Prototype.Browser.IE&&this.heightN==0){this._getWindowBorderSize()}if(this.storedLocation!=null){this._restoreLocation();if(this.iefix){this.iefix.hide()}}else{this._storeLocation();Windows.unsetOverflow(this);var g=WindowUtilities.getWindowScroll(this.options.parent);var b=WindowUtilities.getPageSize(this.options.parent);var f=g.left;var e=g.top;if(this.options.parent!=document.body){g={top:0,left:0,bottom:0,right:0};var d=this.options.parent.getDimensions();b.windowWidth=d.width;b.windowHeight=d.height;e=0;f=0}if(this.constraint){b.windowWidth-=Math.max(0,this.constraintPad.left)+Math.max(0,this.constraintPad.right);b.windowHeight-=Math.max(0,this.constraintPad.top)+Math.max(0,this.constraintPad.bottom);f+=Math.max(0,this.constraintPad.left);e+=Math.max(0,this.constraintPad.top)}var c=b.windowWidth-this.widthW-this.widthE;var a=b.windowHeight-this.heightN-this.heightS;if(this.useLeft&&this.useTop&&Window.hasEffectLib&&Effect.ResizeWindow){new Effect.ResizeWindow(this,e,f,c,a,{duration:Window.resizeEffectDuration})}else{this.setSize(c,a);this.element.setStyle(this.useLeft?{left:f}:{right:f});this.element.setStyle(this.useTop?{top:e}:{bottom:e})}this.toFront();if(this.iefix){this._fixIEOverlapping()}}this._notify("onMaximize");this._saveCookie()},isMinimized:function(){return this.minimized},isMaximized:function(){return(this.storedLocation!=null)},setOpacity:function(a){if(Element.setOpacity){Element.setOpacity(this.element,a)}},setZIndex:function(a){this.element.setStyle({zIndex:a});Windows.updateZindex(a,this)},setTitle:function(a){if(!a||a==""){a="&nbsp;"}Element.update(this.element.id+"_top",a)},getTitle:function(){return $(this.element.id+"_top").innerHTML},setStatusBar:function(b){var a=$(this.getId()+"_bottom");if(typeof(b)=="object"){if(this.bottombar.firstChild){this.bottombar.replaceChild(b,this.bottombar.firstChild)}else{this.bottombar.appendChild(b)}}else{this.bottombar.innerHTML=b}},_checkIEOverlapping:function(){if(!this.iefix&&(navigator.appVersion.indexOf("MSIE")>0)&&(navigator.userAgent.indexOf("Opera")<0)&&(this.element.getStyle("position")=="absolute")){new Insertion.After(this.element.id,'<iframe id="'+this.element.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>');this.iefix=$(this.element.id+"_iefix")}if(this.iefix){setTimeout(this._fixIEOverlapping.bind(this),50)}},_fixIEOverlapping:function(){Position.clone(this.element,this.iefix);this.iefix.style.zIndex=this.element.style.zIndex-1;this.iefix.show()},_getWindowBorderSize:function(b){var c=this._createHiddenDiv(this.options.className+"_n");this.heightN=Element.getDimensions(c).height;c.parentNode.removeChild(c);var c=this._createHiddenDiv(this.options.className+"_s");this.heightS=Element.getDimensions(c).height;c.parentNode.removeChild(c);var c=this._createHiddenDiv(this.options.className+"_e");this.widthE=Element.getDimensions(c).width;c.parentNode.removeChild(c);var c=this._createHiddenDiv(this.options.className+"_w");this.widthW=Element.getDimensions(c).width;c.parentNode.removeChild(c);var c=document.createElement("div");c.className="overlay_"+this.options.className;document.body.appendChild(c);var a=this;setTimeout(function(){a.overlayOpacity=($(c).getStyle("opacity"));c.parentNode.removeChild(c)},10);if(Prototype.Browser.IE){this.heightS=$(this.getId()+"_row3").getDimensions().height;this.heightN=$(this.getId()+"_row1").getDimensions().height}if(Prototype.Browser.WebKit&&Prototype.Browser.WebKitVersion<420){this.setSize(this.width,this.height)}if(this.doMaximize){this.maximize()}if(this.doMinimize){this.minimize()}},_createHiddenDiv:function(b){var a=document.body;var c=document.createElement("div");c.setAttribute("id",this.element.id+"_tmp");c.className=b;c.style.display="none";c.innerHTML="";a.insertBefore(c,a.firstChild);return c},_storeLocation:function(){if(this.storedLocation==null){this.storedLocation={useTop:this.useTop,useLeft:this.useLeft,top:this.element.getStyle("top"),bottom:this.element.getStyle("bottom"),left:this.element.getStyle("left"),right:this.element.getStyle("right"),width:this.width,height:this.height}}},_restoreLocation:function(){if(this.storedLocation!=null){this.useLeft=this.storedLocation.useLeft;this.useTop=this.storedLocation.useTop;if(this.useLeft&&this.useTop&&Window.hasEffectLib&&Effect.ResizeWindow){new Effect.ResizeWindow(this,this.storedLocation.top,this.storedLocation.left,this.storedLocation.width,this.storedLocation.height,{duration:Window.resizeEffectDuration})}else{this.element.setStyle(this.useLeft?{left:this.storedLocation.left}:{right:this.storedLocation.right});this.element.setStyle(this.useTop?{top:this.storedLocation.top}:{bottom:this.storedLocation.bottom});this.setSize(this.storedLocation.width,this.storedLocation.height)}Windows.resetOverflow();this._removeStoreLocation()}},_removeStoreLocation:function(){this.storedLocation=null},_saveCookie:function(){if(this.cookie){var a="";if(this.useLeft){a+="l:"+(this.storedLocation?this.storedLocation.left:this.element.getStyle("left"))}else{a+="r:"+(this.storedLocation?this.storedLocation.right:this.element.getStyle("right"))}if(this.useTop){a+=",t:"+(this.storedLocation?this.storedLocation.top:this.element.getStyle("top"))}else{a+=",b:"+(this.storedLocation?this.storedLocation.bottom:this.element.getStyle("bottom"))}a+=","+(this.storedLocation?this.storedLocation.width:this.width);a+=","+(this.storedLocation?this.storedLocation.height:this.height);a+=","+this.isMinimized();a+=","+this.isMaximized();WindowUtilities.setCookie(a,this.cookie)}},_createWiredElement:function(){if(!this.wiredElement){if(Prototype.Browser.IE){this._getWindowBorderSize()}var b=document.createElement("div");b.className="wired_frame "+this.options.className+"_wired_frame";b.style.position="absolute";this.options.parent.insertBefore(b,this.options.parent.firstChild);this.wiredElement=$(b)}if(this.useLeft){this.wiredElement.setStyle({left:this.element.getStyle("left")})}else{this.wiredElement.setStyle({right:this.element.getStyle("right")})}if(this.useTop){this.wiredElement.setStyle({top:this.element.getStyle("top")})}else{this.wiredElement.setStyle({bottom:this.element.getStyle("bottom")})}var a=this.element.getDimensions();this.wiredElement.setStyle({width:a.width+"px",height:a.height+"px"});this.wiredElement.setStyle({zIndex:Windows.maxZIndex+30});return this.wiredElement},_hideWiredElement:function(){if(!this.wiredElement||!this.currentDrag){return}if(this.currentDrag==this.element){this.currentDrag=null}else{if(this.useLeft){this.element.setStyle({left:this.currentDrag.getStyle("left")})}else{this.element.setStyle({right:this.currentDrag.getStyle("right")})}if(this.useTop){this.element.setStyle({top:this.currentDrag.getStyle("top")})}else{this.element.setStyle({bottom:this.currentDrag.getStyle("bottom")})}this.currentDrag.hide();this.currentDrag=null;if(this.doResize){this.setSize(this.width,this.height)}}},_notify:function(a){if(this.options[a]){this.options[a](this)}else{Windows.notify(a,this)}}};var Windows={windows:[],modalWindows:[],observers:[],focusedWindow:null,maxZIndex:0,overlayShowEffectOptions:{duration:0.5},overlayHideEffectOptions:{duration:0.5},addObserver:function(a){this.removeObserver(a);this.observers.push(a)},removeObserver:function(a){this.observers=this.observers.reject(function(b){return b==a})},notify:function(a,b){this.observers.each(function(c){if(c[a]){c[a](a,b)}})},getWindow:function(a){return this.windows.detect(function(b){return b.getId()==a})},getFocusedWindow:function(){return this.focusedWindow},updateFocusedWindow:function(){this.focusedWindow=this.windows.length>=2?this.windows[this.windows.length-2]:null},register:function(a){this.windows.push(a)},addModalWindow:function(a){if(this.modalWindows.length==0){WindowUtilities.disableScreen(a.options.className,"overlay_modal",a.overlayOpacity,a.getId(),a.options.parent)}else{if(Window.keepMultiModalWindow){$("overlay_modal").style.zIndex=Windows.maxZIndex+1;Windows.maxZIndex+=1;WindowUtilities._hideSelect(this.modalWindows.last().getId())}else{this.modalWindows.last().element.hide()}WindowUtilities._showSelect(a.getId())}this.modalWindows.push(a)},removeModalWindow:function(a){this.modalWindows.pop();if(this.modalWindows.length==0){WindowUtilities.enableScreen()}else{if(Window.keepMultiModalWindow){this.modalWindows.last().toFront();WindowUtilities._showSelect(this.modalWindows.last().getId())}else{this.modalWindows.last().element.show()}}},register:function(a){this.windows.push(a)},unregister:function(a){this.windows=this.windows.reject(function(b){return b==a})},closeAll:function(){this.windows.each(function(a){Windows.close(a.getId())})},closeAllModalWindows:function(){WindowUtilities.enableScreen();this.modalWindows.each(function(a){if(a){a.close()}})},minimize:function(c,a){var b=this.getWindow(c);if(b&&b.visible){b.minimize()}Event.stop(a)},maximize:function(c,a){var b=this.getWindow(c);if(b&&b.visible){b.maximize()}Event.stop(a)},close:function(c,a){var b=this.getWindow(c);if(b){b.close()}if(a){Event.stop(a)}},blur:function(b){var a=this.getWindow(b);if(!a){return}if(a.options.blurClassName){a.changeClassName(a.options.blurClassName)}if(this.focusedWindow==a){this.focusedWindow=null}a._notify("onBlur")},focus:function(b){var a=this.getWindow(b);if(!a){return}if(this.focusedWindow){this.blur(this.focusedWindow.getId())}if(a.options.focusClassName){a.changeClassName(a.options.focusClassName)}this.focusedWindow=a;a._notify("onFocus")},unsetOverflow:function(a){this.windows.each(function(b){b.oldOverflow=b.getContent().getStyle("overflow")||"auto";b.getContent().setStyle({overflow:"hidden"})});if(a&&a.oldOverflow){a.getContent().setStyle({overflow:a.oldOverflow})}},resetOverflow:function(){this.windows.each(function(a){if(a.oldOverflow){a.getContent().setStyle({overflow:a.oldOverflow})}})},updateZindex:function(a,b){if(a>this.maxZIndex){this.maxZIndex=a;if(this.focusedWindow){this.blur(this.focusedWindow.getId())}}this.focusedWindow=b;if(this.focusedWindow){this.focus(this.focusedWindow.getId())}}};var Dialog={dialogId:null,onCompleteFunc:null,callFunc:null,parameters:null,confirm:function(d,c){if(d&&typeof d!="string"){Dialog._runAjaxRequest(d,c,Dialog.confirm);return}d=d||"";c=c||{};var f=c.okLabel?c.okLabel:"Ok";var a=c.cancelLabel?c.cancelLabel:"Cancel";c=Object.extend(c,c.windowParameters||{});c.windowParameters=c.windowParameters||{};c.className=c.className||"alert";var b="class ='"+(c.buttonClass?c.buttonClass+" ":"")+" ok_button'";var e="class ='"+(c.buttonClass?c.buttonClass+" ":"")+" cancel_button'";var d="      <div class='"+c.className+"_message'>"+d+"</div>        <div class='"+c.className+"_buttons'>          <input type='button' value='"+f+"' onclick='Dialog.okCallback()' "+b+"/>          <input type='button' value='"+a+"' onclick='Dialog.cancelCallback()' "+e+"/>        </div>    ";return this._openDialog(d,c)},alert:function(c,b){if(c&&typeof c!="string"){Dialog._runAjaxRequest(c,b,Dialog.alert);return}c=c||"";b=b||{};var d=b.okLabel?b.okLabel:"Ok";b=Object.extend(b,b.windowParameters||{});b.windowParameters=b.windowParameters||{};b.className=b.className||"alert";var a="class ='"+(b.buttonClass?b.buttonClass+" ":"")+" ok_button'";var c="      <div class='"+b.className+"_message'>"+c+"</div>        <div class='"+b.className+"_buttons'>          <input type='button' value='"+d+"' onclick='Dialog.okCallback()' "+a+"/>        </div>";return this._openDialog(c,b)},info:function(b,a){if(b&&typeof b!="string"){Dialog._runAjaxRequest(b,a,Dialog.info);return}b=b||"";a=a||{};a=Object.extend(a,a.windowParameters||{});a.windowParameters=a.windowParameters||{};a.className=a.className||"alert";var b="<div id='modal_dialog_message' class='"+a.className+"_message'>"+b+"</div>";if(a.showProgress){b+="<div id='modal_dialog_progress' class='"+a.className+"_progress'>  </div>"}a.ok=null;a.cancel=null;return this._openDialog(b,a)},setInfoMessage:function(a){$("modal_dialog_message").update(a)},closeInfo:function(){Windows.close(this.dialogId)},_openDialog:function(e,d){var c=d.className;if(!d.height&&!d.width){d.width=WindowUtilities.getPageSize(d.options.parent||document.body).pageWidth/2}if(d.id){this.dialogId=d.id}else{var b=new Date();this.dialogId="modal_dialog_"+b.getTime();d.id=this.dialogId}if(!d.height||!d.width){var a=WindowUtilities._computeSize(e,this.dialogId,d.width,d.height,5,c);if(d.height){d.width=a+5}else{d.height=a+5}}d.effectOptions=d.effectOptions;d.resizable=d.resizable||false;d.minimizable=d.minimizable||false;d.maximizable=d.maximizable||false;d.draggable=d.draggable||false;d.closable=d.closable||false;var f=new Window(d);f.getContent().innerHTML=e;f.showCenter(true,d.top,d.left);f.setDestroyOnClose();f.cancelCallback=d.onCancel||d.cancel;f.okCallback=d.onOk||d.ok;return f},_getAjaxContent:function(a){Dialog.callFunc(a.responseText,Dialog.parameters)},_runAjaxRequest:function(c,b,a){if(c.options==null){c.options={}}Dialog.onCompleteFunc=c.options.onComplete;Dialog.parameters=b;Dialog.callFunc=a;c.options.onComplete=Dialog._getAjaxContent;new Ajax.Request(c.url,c.options)},okCallback:function(){var a=Windows.focusedWindow;if(!a.okCallback||a.okCallback(a)){$$("#"+a.getId()+" input").each(function(b){b.onclick=null});a.close()}},cancelCallback:function(){var a=Windows.focusedWindow;$$("#"+a.getId()+" input").each(function(b){b.onclick=null});a.close();if(a.cancelCallback){a.cancelCallback(a)}}};if(Prototype.Browser.WebKit){var array=navigator.userAgent.match(new RegExp(/AppleWebKit\/([\d\.\+]*)/));Prototype.Browser.WebKitVersion=parseFloat(array[1])}var WindowUtilities={getWindowScroll:function(parent){var T,L,W,H;parent=parent||document.body;if(parent!=document.body){T=parent.scrollTop;L=parent.scrollLeft;W=parent.scrollWidth;H=parent.scrollHeight}else{var w=window;with(w.document){if(w.document.documentElement&&documentElement.scrollTop){T=documentElement.scrollTop;L=documentElement.scrollLeft}else{if(w.document.body){T=body.scrollTop;L=body.scrollLeft}}if(w.innerWidth){W=w.innerWidth;H=w.innerHeight}else{if(w.document.documentElement&&documentElement.clientWidth){W=documentElement.clientWidth;H=documentElement.clientHeight}else{W=body.offsetWidth;H=body.offsetHeight}}}}return{top:T,left:L,width:W,height:H}},getPageSize:function(d){d=d||document.body;var c,g;var e,b;if(d!=document.body){c=d.getWidth();g=d.getHeight();b=d.scrollWidth;e=d.scrollHeight}else{var f,a;if(window.innerHeight&&window.scrollMaxY){f=document.body.scrollWidth;a=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){f=document.body.scrollWidth;a=document.body.scrollHeight}else{f=document.body.offsetWidth;a=document.body.offsetHeight}}if(self.innerHeight){c=self.innerWidth;g=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){c=document.documentElement.clientWidth;g=document.documentElement.clientHeight}else{if(document.body){c=document.body.clientWidth;g=document.body.clientHeight}}}if(a<g){e=g}else{e=a}if(f<c){b=c}else{b=f}}return{pageWidth:b,pageHeight:e,windowWidth:c,windowHeight:g}},disableScreen:function(c,a,d,e,b){WindowUtilities.initLightbox(a,c,function(){this._disableScreen(c,a,d,e)}.bind(this),b||document.body)},_disableScreen:function(c,b,e,f){var d=$(b);var a=WindowUtilities.getPageSize(d.parentNode);if(f&&Prototype.Browser.IE){WindowUtilities._hideSelect();WindowUtilities._showSelect(f)}d.style.height=(a.pageHeight+"px");d.style.display="none";if(b=="overlay_modal"&&Window.hasEffectLib&&Windows.overlayShowEffectOptions){d.overlayOpacity=e;new Effect.Appear(d,Object.extend({from:0,to:e},Windows.overlayShowEffectOptions))}else{d.style.display="block"}},enableScreen:function(b){b=b||"overlay_modal";var a=$(b);if(a){if(b=="overlay_modal"&&Window.hasEffectLib&&Windows.overlayHideEffectOptions){new Effect.Fade(a,Object.extend({from:a.overlayOpacity,to:0},Windows.overlayHideEffectOptions))}else{a.style.display="none";a.parentNode.removeChild(a)}if(b!="__invisible__"){WindowUtilities._showSelect()}}},_hideSelect:function(a){if(Prototype.Browser.IE){a=a==null?"":"#"+a+" ";$$(a+"select").each(function(b){if(!WindowUtilities.isDefined(b.oldVisibility)){b.oldVisibility=b.style.visibility?b.style.visibility:"visible";b.style.visibility="hidden"}})}},_showSelect:function(a){if(Prototype.Browser.IE){a=a==null?"":"#"+a+" ";$$(a+"select").each(function(b){if(WindowUtilities.isDefined(b.oldVisibility)){try{b.style.visibility=b.oldVisibility}catch(c){b.style.visibility="visible"}b.oldVisibility=null}else{if(b.style.visibility){b.style.visibility="visible"}}})}},isDefined:function(a){return typeof(a)!="undefined"&&a!=null},initLightbox:function(e,c,a,b){if($(e)){Element.setStyle(e,{zIndex:Windows.maxZIndex+1});Windows.maxZIndex++;a()}else{var d=document.createElement("div");d.setAttribute("id",e);d.className="overlay_"+c;d.style.display="none";d.style.position="absolute";d.style.top="0";d.style.left="0";d.style.zIndex=Windows.maxZIndex+1;Windows.maxZIndex++;d.style.width="100%";b.insertBefore(d,b.firstChild);if(Prototype.Browser.WebKit&&e=="overlay_modal"){setTimeout(function(){a()},10)}else{a()}}},setCookie:function(b,a){document.cookie=a[0]+"="+escape(b)+((a[1])?"; expires="+a[1].toGMTString():"")+((a[2])?"; path="+a[2]:"")+((a[3])?"; domain="+a[3]:"")+((a[4])?"; secure":"")},getCookie:function(c){var b=document.cookie;var e=c+"=";var d=b.indexOf("; "+e);if(d==-1){d=b.indexOf(e);if(d!=0){return null}}else{d+=2}var a=document.cookie.indexOf(";",d);if(a==-1){a=b.length}return unescape(b.substring(d+e.length,a))},_computeSize:function(e,a,b,g,d,f){var i=document.body;var c=document.createElement("div");c.setAttribute("id",a);c.className=f+"_content";if(g){c.style.height=g+"px"}else{c.style.width=b+"px"}c.style.position="absolute";c.style.top="0";c.style.left="0";c.style.display="none";c.innerHTML=e;i.insertBefore(c,i.firstChild);var h;if(g){h=$(c).getDimensions().width+d}else{h=$(c).getDimensions().height+d}i.removeChild(c);return h}};/*
 * @description		prototype.js based context menu
 * @author        Juriy Zaytsev; kangax [at] gmail [dot] com; http://thinkweb2.com/projects/prototype/
 * @version       0.6
 * @date          12/03/07
 * @requires      prototype.js 1.6
 * @license:      MIT License
*/
if(Object.isUndefined(Proto)){var Proto={}}Proto.Menu=Class.create({initialize:function(){var b=Prototype.emptyFunction;this.ie=Prototype.Browser.IE;this.options=Object.extend({selector:".contextmenu",className:"protoMenu",pageOffset:25,fade:false,zIndex:100,beforeShow:b,beforeHide:b,beforeSelect:b},arguments[0]||{});this.shim=new Element("iframe",{style:"position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);display:none",src:"javascript:false;",frameborder:0});this.options.fade=this.options.fade&&!Object.isUndefined(Effect);this.container=new Element("div",{className:this.options.className,style:"display:none"});var a=new Element("ul");this.options.menuItems.each(function(c){a.insert(new Element("li",{className:c.separator?"separator":""}).insert(c.separator?"":Object.extend(new Element("a",{href:"#",title:c.name,className:(c.className||"")+(c.disabled?" disabled":" enabled")}),{_callback:c.callback}).observe("click",this.onClick.bind(this)).observe("contextmenu",Event.stop).update(c.name)))}.bind(this));$(document.body).insert(this.container.insert(a).observe("contextmenu",Event.stop));if(this.ie){$(document.body).insert(this.shim)}document.observe("click",function(c){if(this.container.visible()&&!c.isRightClick()){this.options.beforeHide(c);if(this.ie){this.shim.hide()}this.container.hide()}}.bind(this));document.observe(Prototype.Browser.Opera?"click":"contextmenu",function(f){if(Prototype.Browser.Opera&&!f.ctrlKey){return}var c=Event.element(f);var d=null;if(Element.match(c,this.options.selector)){d=c}else{d=Element.up(c,this.options.selector)}if(!d){return}f.contextMenuElement=d;f.contextMenuContainerElement=this.container;this.show(f)}.bind(this))},show:function(g){g.stop();this.options.beforeShow(g);var b=Event.pointer(g).x,h=Event.pointer(g).y,d=document.viewport.getDimensions(),f=document.viewport.getScrollOffsets(),a=this.container.getDimensions(),c={left:((b+a.width+this.options.pageOffset)>d.width?(d.width-a.width-this.options.pageOffset):b)+"px",top:((h-f.top+a.height)>d.height&&(h-f.top)>a.height?(h-a.height):h)+"px"};this.container.setStyle(c).setStyle({zIndex:this.options.zIndex});if(this.ie){this.shim.setStyle(Object.extend(Object.extend(a,c),{zIndex:this.options.zIndex-1})).show()}this.options.fade?Effect.Appear(this.container,{duration:0.25}):this.container.show();this.event=g},onClick:function(a){a.stop();if(a.target._callback&&!a.target.hasClassName("disabled")){this.options.beforeSelect(a);if(this.ie){this.shim.hide()}this.container.hide();a.target._callback(this.event)}}});/*
 
 ColorZilla persistence library
 
 Copyright (c) Alex Sirota 2010, All Rights Reserved

 Please do not use without permission

*/
if(typeof ColorZilla=="undefined"){var ColorZilla={}}ColorZilla.Cookie={set:function(c,f,b,e,g){if(typeof e=="undefined"){e=".colorzilla.com"}if(typeof g=="undefined"){g="/"}var a="";if(b!=undefined){var h=new Date();h.setTime(h.getTime()+(86400000*parseFloat(b)));a="; expires="+h.toGMTString()}e="; domain="+e;g="; path="+g;return(document.cookie=escape(c)+"="+escape(f||"")+a+e+g)},get:function(a){var b=document.cookie.match(new RegExp("(^|;)\\s*"+escape(a)+"=([^;\\s]*)"));return(b?unescape(b[2]):null)},remove:function(a){var b=ColorZilla.Cookie.get(a)||true;ColorZilla.Cookie.set(a,"",-1);return b}};ColorZilla.Persist={_cookieName:"persist",_dict:{},_fromCookie:function(){this._dict={};var e=ColorZilla.Cookie.get(this._cookieName);if(!e){return{}}var a=e.split("&");for(var c=0;c<a.length;c++){var d=a[c].split("=");if(d.length!=2){continue}var b=unescape(d[0]);var e=unescape(d[1]);this._dict[b]=e}return this._dict},_toCookie:function(){var a="";for(key in this._dict){if(a!=""){a+="&"}a+=escape(key)+"="+escape(this._dict[key])}ColorZilla.Cookie.set(this._cookieName,a,365*30)},get:function(a,b){this._fromCookie();return(typeof this._dict[a]=="undefined")?b:this._dict[a]},set:function(a,b){this._fromCookie();this._dict[a]=b;this._toCookie()},remove:function(a,b){this._fromCookie();if(typeof this._dict[a]!="undefined"){delete this._dict[a]}this._toCookie()},setAndReload:function(a,b){this.set(a,b);window.location.reload(true)}};ColorZilla.LocalStorage={isSupported:function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}},get:function(a,d){if(!this.isSupported()){return d}try{var c=localStorage.getItem(a);return(c!=null)?c:d}catch(b){return d}},set:function(a,c){if(!this.isSupported()){return false}try{localStorage.setItem(a,c);return true}catch(b){return false}},remove:function(a,c){if(!this.isSupported()){return false}try{localStorage.removeItem(a,c);return true}catch(b){return false}}};/* 
 * CSS Gradient Editor Gradient Database
 */
if(typeof Gradient=="undefined"){var Gradient={}}Gradient.DB={UltimateWeb2:{name:"Ultimate Web 2.0 Gradients",license:'derived from <a target="_blank" href="http://www.dezinerfolio.com/2007/05/06/ultimate-web-20-layer-styles">deziner folio</a>, <a target="_blank" href="http://sglider12.blogspot.com/">SGlider12</a> <a target="_blank" href="http://creativecommons.org/licenses/by-sa/2.5/in/">(cc) by-sa</a>',gradients:[{name:"Blue Gloss Default",stops:[{color:"#1E5799",position:"0%"},{color:"#2989D8",position:"50%"},{color:"#207cca",position:"51%"},{color:"#7db9e8",position:"100%"}]},{name:"Black Gloss #1",stops:[{color:"#4c4c4c",position:"0%"},{color:"#595959",position:"12%"},{color:"#666666",position:"25%"},{color:"#474747",position:"39%"},{color:"#2c2c2c",position:"50%"},{color:"#000000",position:"51%"},{color:"#111111",position:"60%"},{color:"#2b2b2b",position:"76%"},{color:"#1c1c1c",position:"91%"},{color:"#131313",position:"100%"}]},{name:"Blue 3D # 16",stops:[{color:"#87e0fd",position:"0%"},{color:"#53cbf1",position:"40%"},{color:"#05abe0",position:"100%"}]},{name:"Blue 3D #13",stops:[{color:"#f0f9ff",position:"0%"},{color:"#cbebff",position:"47%"},{color:"#a1dbff",position:"100%"}]},{name:"Blue 3D #14",stops:[{color:"#7abcff",position:"0%"},{color:"#60abf8",position:"44%"},{color:"#4096ee",position:"100%"}]},{name:"Blue to Transparent",stops:[{color:"#1E5799",position:"0%"},{color:"#7db9e8",position:"100%"}],opacityStops:[{opacity:1,position:"0%"},{opacity:0,position:"100%"}]},{name:"Blue to Transparent Sharp",stops:[{color:"#1E5799",position:"0%"},{color:"#7db9e8",position:"100%"}],opacityStops:[{opacity:1,position:"0%"},{opacity:1,position:"62%"},{opacity:0.7,position:"68%"},{opacity:0,position:"100%"}]},{name:"Blue Two Sided Transparent",stops:[{color:"#1E5799",position:"20%"},{color:"#2989D8",position:"50%"},{color:"#1E5799",position:"80%"}],opacityStops:[{opacity:0,position:"0%"},{opacity:0.8,position:"15%"},{opacity:1,position:"19%"},{opacity:1,position:"81%"},{opacity:0.8,position:"85%"},{opacity:0,position:"100%"}]},{name:"Neutral Density",stops:[{color:"#000000",position:"0%"},{color:"#000000",position:"100%"}],opacityStops:[{opacity:"0.65",position:"0%"},{opacity:"0",position:"100%"}]},{name:"White to Transparent",stops:[{color:"#ffffff",position:"0%"},{color:"#ffffff",position:"100%"}],opacityStops:[{opacity:"1",position:"0%"},{opacity:"0",position:"100%"}]},{name:"Blue 3D #15",stops:[{color:"#00b7ea",position:"0%"},{color:"#009ec3",position:"100%"}]},{name:"Blue 3D #17",stops:[{color:"#88bfe8",position:"0%"},{color:"#70b0e0",position:"100%"}]},{name:"Blue 3D #18",stops:[{color:"#feffff",position:"0%"},{color:"#ddf1f9",position:"35%"},{color:"#a0d8ef",position:"100%"}]},{name:"Blue Flat #1",stops:[{color:"#258dc8",position:"0%"},{color:"#258dc8",position:"100%"}]},{name:"Blue Flat #2",stops:[{color:"#4096ee",position:"0%"},{color:"#4096ee",position:"100%"}]},{name:"Blue Gloss #1",stops:[{color:"#b8e1fc",position:"0%"},{color:"#a9d2f3",position:"10%"},{color:"#90bae4",position:"25%"},{color:"#90bcea",position:"37%"},{color:"#90bff0",position:"50%"},{color:"#6ba8e5",position:"51%"},{color:"#a2daf5",position:"83%"},{color:"#bdf3fd",position:"100%"}]},{name:"Blue Gloss #2",stops:[{color:"#3b679e",position:"0%"},{color:"#2b88d9",position:"50%"},{color:"#207cca",position:"51%"},{color:"#7db9e8",position:"100%"}]},{name:"Blue Gloss #3",stops:[{color:"#6db3f2",position:"0%"},{color:"#54a3ee",position:"50%"},{color:"#3690f0",position:"51%"},{color:"#1e69de",position:"100%"}]},{name:"Blue Gloss #4",stops:[{color:"#ebf1f6",position:"0%"},{color:"#abd3ee",position:"50%"},{color:"#89c3eb",position:"51%"},{color:"#d5ebfb",position:"100%"}]},{name:"Blue Gloss #5",stops:[{color:"#e4f5fc",position:"0%"},{color:"#bfe8f9",position:"50%"},{color:"#9fd8ef",position:"51%"},{color:"#2ab0ed",position:"100%"}]},{name:"Blue Gloss",stops:[{color:"#cedbe9",position:"0%"},{color:"#aac5de",position:"17%"},{color:"#6199c7",position:"50%"},{color:"#3a84c3",position:"51%"},{color:"#419ad6",position:"59%"},{color:"#4bb8f0",position:"71%"},{color:"#3a8bc2",position:"84%"},{color:"#26558b",position:"100%"}]},{name:"Blue Grey 3D",stops:[{color:"#a7c7dc",position:"0%"},{color:"#85b2d3",position:"100%"}]},{name:"Blue Grey Flat",stops:[{color:"#3f4c6b",position:"0%"},{color:"#3f4c6b",position:"100%"}]},{name:"Blue Pipe #1",stops:[{color:"#d0e4f7",position:"0%"},{color:"#73b1e7",position:"24%"},{color:"#0a77d5",position:"50%"},{color:"#539fe1",position:"79%"},{color:"#87bcea",position:"100%"}]},{name:"Blue Pipe #2",stops:[{color:"#e1ffff",position:"0%"},{color:"#e1ffff",position:"7%"},{color:"#e1ffff",position:"12%"},{color:"#fdffff",position:"12%"},{color:"#e6f8fd",position:"30%"},{color:"#c8eefb",position:"54%"},{color:"#bee4f8",position:"75%"},{color:"#b1d8f5",position:"100%"}]},{name:"Blue Pipe",stops:[{color:"#b3dced",position:"0%"},{color:"#29b8e5",position:"50%"},{color:"#bce0ee",position:"100%"}]},{name:"Brown 3D",stops:[{color:"#d5cea6",position:"0%"},{color:"#c9c190",position:"40%"},{color:"#b7ad70",position:"100%"}]},{name:"Brown Gloss",stops:[{color:"#f0b7a1",position:"0%"},{color:"#8c3310",position:"50%"},{color:"#752201",position:"51%"},{color:"#bf6e4e",position:"100%"}]},{name:"Brown Red 3D",stops:[{color:"#a90329",position:"0%"},{color:"#8f0222",position:"44%"},{color:"#6d0019",position:"100%"}]},{name:"Gold 3D",stops:[{color:"#fefcea",position:"0%"},{color:"#f1da36",position:"100%"}]},{name:"Green 3D #1",stops:[{color:"#b4ddb4",position:"0%"},{color:"#83c783",position:"17%"},{color:"#52b152",position:"33%"},{color:"#008a00",position:"67%"},{color:"#005700",position:"83%"},{color:"#002400",position:"100%"}]},{name:"Green 3D #2",stops:[{color:"#cdeb8e",position:"0%"},{color:"#a5c956",position:"100%"}]},{name:"Green 3D #3",stops:[{color:"#c9de96",position:"0%"},{color:"#8ab66b",position:"44%"},{color:"#398235",position:"100%"}]},{name:"Green 3D #4",stops:[{color:"#f8ffe8",position:"0%"},{color:"#e3f5ab",position:"33%"},{color:"#b7df2d",position:"100%"}]},{name:"Green 3D #2",stops:[{color:"#a9db80",position:"0%"},{color:"#96c56f",position:"100%"}]},{name:"Green 3D",stops:[{color:"#b4e391",position:"0%"},{color:"#61c419",position:"50%"},{color:"#b4e391",position:"100%"}]},{name:"Green Flat #1",stops:[{color:"#299a0b",position:"0%"},{color:"#299a0b",position:"100%"}]},{name:"Green Flat #2",stops:[{color:"#8fc800",position:"0%"},{color:"#8fc800",position:"100%"}]},{name:"Green Flat #3",stops:[{color:"#006e2e",position:"0%"},{color:"#006e2e",position:"100%"}]},{name:"Green Flat #4",stops:[{color:"#6bba70",position:"0%"},{color:"#6bba70",position:"100%"}]},{name:"Green Flat #5",stops:[{color:"#cdeb8b",position:"0%"},{color:"#cdeb8b",position:"100%"}]},{name:"Green Flat #6",stops:[{color:"#8fc400",position:"0%"},{color:"#8fc400",position:"100%"}]},{name:"Green Flat",stops:[{color:"#b6e026",position:"0%"},{color:"#abdc28",position:"100%"}]},{name:"Green Gloss #1",stops:[{color:"#9dd53a",position:"0%"},{color:"#a1d54f",position:"50%"},{color:"#80c217",position:"51%"},{color:"#7cbc0a",position:"100%"}]},{name:"Green Gloss #2",stops:[{color:"#e6f0a3",position:"0%"},{color:"#d2e638",position:"50%"},{color:"#c3d825",position:"51%"},{color:"#dbf043",position:"100%"}]},{name:"Green Gloss",stops:[{color:"#bfd255",position:"0%"},{color:"#8eb92a",position:"50%"},{color:"#72aa00",position:"51%"},{color:"#9ecb2d",position:"100%"}]},{name:"Green Semi Flat",stops:[{color:"#b4df5b",position:"0%"},{color:"#b4df5b",position:"100%"}]},{name:"Gren 3D",stops:[{color:"#eeeeee",position:"0%"},{color:"#cccccc",position:"100%"}]},{name:"Grey 3D #1",stops:[{color:"#cedce7",position:"0%"},{color:"#596a72",position:"100%"}]},{name:"Grey 3D #2",stops:[{color:"#606c88",position:"0%"},{color:"#3f4c6b",position:"100%"}]},{name:"Grey 3D #3",stops:[{color:"#b0d4e3",position:"0%"},{color:"#88bacf",position:"100%"}]},{name:"Grey 3D #4",stops:[{color:"#f2f5f6",position:"0%"},{color:"#e3eaed",position:"37%"},{color:"#c8d7dc",position:"100%"}]},{name:"Grey 3D",stops:[{color:"#d8e0de",position:"0%"},{color:"#aebfbc",position:"22%"},{color:"#99afab",position:"33%"},{color:"#8ea6a2",position:"50%"},{color:"#829d98",position:"67%"},{color:"#4e5c5a",position:"82%"},{color:"#0e0e0e",position:"100%"}]},{name:"Grey Black 3D",stops:[{color:"#b5bdc8",position:"0%"},{color:"#828c95",position:"36%"},{color:"#28343b",position:"100%"}]},{name:"Grey Blue 3D #1",stops:[{color:"#b8c6df",position:"0%"},{color:"#6d88b7",position:"100%"}]},{name:"Grey Blue 3D",stops:[{color:"#cfe7fa",position:"0%"},{color:"#6393c1",position:"100%"}]},{name:"Grey Blue Gloss #1",stops:[{color:"#d2dfed",position:"0%"},{color:"#c8d7eb",position:"26%"},{color:"#bed0ea",position:"51%"},{color:"#a6c0e3",position:"51%"},{color:"#afc7e8",position:"62%"},{color:"#bad0ef",position:"75%"},{color:"#99b5db",position:"88%"},{color:"#799bc8",position:"100%"}]},{name:"Grey Flat",stops:[{color:"#eeeeee",position:"0%"},{color:"#eeeeee",position:"100%"}]},{name:"Grey Gloss #1",stops:[{color:"#e2e2e2",position:"0%"},{color:"#dbdbdb",position:"50%"},{color:"#d1d1d1",position:"51%"},{color:"#fefefe",position:"100%"}]},{name:"Grey Gloss #2",stops:[{color:"#f2f6f8",position:"0%"},{color:"#d8e1e7",position:"50%"},{color:"#b5c6d0",position:"51%"},{color:"#e0eff9",position:"100%"}]},{name:"Grey Gloss",stops:[{color:"#d4e4ef",position:"0%"},{color:"#86aecc",position:"100%"}]},{name:"Grey Pipe",stops:[{color:"#f5f6f6",position:"0%"},{color:"#dbdce2",position:"21%"},{color:"#b8bac6",position:"49%"},{color:"#dddfe3",position:"80%"},{color:"#f5f6f6",position:"100%"}]},{name:"L Brown 3D",stops:[{color:"#f3e2c7",position:"0%"},{color:"#c19e67",position:"50%"},{color:"#b68d4c",position:"51%"},{color:"#e9d4b3",position:"100%"}]},{name:"L Green 3D",stops:[{color:"#f9fcf7",position:"0%"},{color:"#f5f9f0",position:"100%"}]},{name:"Lavender 3D",stops:[{color:"#c3d9ff",position:"0%"},{color:"#b1c8ef",position:"41%"},{color:"#98b0d9",position:"100%"}]},{name:"Neon",stops:[{color:"#d2ff52",position:"0%"},{color:"#91e842",position:"100%"}]},{name:"Olive 3D #1",stops:[{color:"#fefefd",position:"0%"},{color:"#dce3c4",position:"42%"},{color:"#aebf76",position:"100%"}]},{name:"Olive 3D #2",stops:[{color:"#e4efc0",position:"0%"},{color:"#abbd73",position:"100%"}]},{name:"Olive 3D #3",stops:[{color:"#a4b357",position:"0%"},{color:"#75890c",position:"100%"}]},{name:"Olive 3D",stops:[{color:"#627d4d",position:"0%"},{color:"#1f3b08",position:"100%"}]},{name:"Olive Flat",stops:[{color:"#73880a",position:"0%"},{color:"#73880a",position:"100%"}]},{name:"Orange 3D #1",stops:[{color:"#ffaf4b",position:"0%"},{color:"#ff920a",position:"100%"}]},{name:"Orange 3D #2",stops:[{color:"#fac695",position:"0%"},{color:"#f5ab66",position:"47%"},{color:"#ef8d31",position:"100%"}]},{name:"Orange 3D #3",stops:[{color:"#ffc578",position:"0%"},{color:"#fb9d23",position:"100%"}]},{name:"Orange 3D #4",stops:[{color:"#f9c667",position:"0%"},{color:"#f79621",position:"100%"}]},{name:"Orange 3D #5",stops:[{color:"#fceabb",position:"0%"},{color:"#fccd4d",position:"50%"},{color:"#f8b500",position:"51%"},{color:"#fbdf93",position:"100%"}]},{name:"Orange 3D",stops:[{color:"#ffa84c",position:"0%"},{color:"#ff7b0d",position:"100%"}]},{name:"Orange Flat #1",stops:[{color:"#ff670f",position:"0%"},{color:"#ff670f",position:"100%"}]},{name:"Orange Flat",stops:[{color:"#ff7400",position:"0%"},{color:"#ff7400",position:"100%"}]},{name:"Orange Gloss",stops:[{color:"#ffb76b",position:"0%"},{color:"#ffa73d",position:"50%"},{color:"#ff7c00",position:"51%"},{color:"#ff7f04",position:"100%"}]},{name:"Pink 3D #1",stops:[{color:"#ff5db1",position:"0%"},{color:"#ef017c",position:"100%"}]},{name:"Pink 3D #2",stops:[{color:"#fb83fa",position:"0%"},{color:"#e93cec",position:"100%"}]},{name:"Pink 3D #3",stops:[{color:"#e570e7",position:"0%"},{color:"#c85ec7",position:"47%"},{color:"#a849a3",position:"100%"}]},{name:"Pink 3D",stops:[{color:"#cb60b3",position:"0%"},{color:"#ad1283",position:"50%"},{color:"#de47ac",position:"100%"}]},{name:"Pink Flat",stops:[{color:"#ff0084",position:"0%"},{color:"#ff0084",position:"100%"}]},{name:"Pink Gloss #2",stops:[{color:"#fcecfc",position:"0%"},{color:"#fba6e1",position:"50%"},{color:"#fd89d7",position:"51%"},{color:"#ff7cd8",position:"100%"}]},{name:"Pink Gloss",stops:[{color:"#cb60b3",position:"0%"},{color:"#c146a1",position:"50%"},{color:"#a80077",position:"51%"},{color:"#db36a4",position:"100%"}]},{name:"Purple 3D #1",stops:[{color:"#ebe9f9",position:"0%"},{color:"#d8d0ef",position:"50%"},{color:"#cec7ec",position:"51%"},{color:"#c1bfea",position:"100%"}]},{name:"Purple 3D",stops:[{color:"#8989ba",position:"0%"},{color:"#8989ba",position:"100%"}]},{name:"Red 3D #1",stops:[{color:"#febbbb",position:"0%"},{color:"#fe9090",position:"45%"},{color:"#ff5c5c",position:"100%"}]},{name:"Red 3D #2",stops:[{color:"#f2825b",position:"0%"},{color:"#e55b2b",position:"50%"},{color:"#f07146",position:"100%"}]},{name:"Red 3D",stops:[{color:"#ff3019",position:"0%"},{color:"#cf0404",position:"100%"}]},{name:"Red Flat #1",stops:[{color:"#ff1a00",position:"0%"},{color:"#ff1a00",position:"100%"}]},{name:"Red Flat",stops:[{color:"#cc0000",position:"0%"},{color:"#cc0000",position:"100%"}]},{name:"Red Gloss #1",stops:[{color:"#f85032",position:"0%"},{color:"#f16f5c",position:"50%"},{color:"#f6290c",position:"51%"},{color:"#f02f17",position:"71%"},{color:"#e73827",position:"100%"}]},{name:"Red Gloss #2",stops:[{color:"#feccb1",position:"0%"},{color:"#f17432",position:"50%"},{color:"#ea5507",position:"51%"},{color:"#fb955e",position:"100%"}]},{name:"Red Gloss #3",stops:[{color:"#efc5ca",position:"0%"},{color:"#d24b5a",position:"50%"},{color:"#ba2737",position:"51%"},{color:"#f18e99",position:"100%"}]},{name:"Red Gloss",stops:[{color:"#f3c5bd",position:"0%"},{color:"#e86c57",position:"50%"},{color:"#ea2803",position:"51%"},{color:"#ff6600",position:"75%"},{color:"#c72200",position:"100%"}]},{name:"Shape 1 Style",stops:[{color:"#b7deed",position:"0%"},{color:"#71ceef",position:"50%"},{color:"#21b4e2",position:"51%"},{color:"#b7deed",position:"100%"}]},{name:"Shape 2 Style",stops:[{color:"#e0f3fa",position:"0%"},{color:"#d8f0fc",position:"50%"},{color:"#b8e2f6",position:"51%"},{color:"#b6dffd",position:"100%"}]},{name:"Wax 3D #1",stops:[{color:"#feffe8",position:"0%"},{color:"#d6dbbf",position:"100%"}]},{name:"Wax 3D #2",stops:[{color:"#fcfff4",position:"0%"},{color:"#e9e9ce",position:"100%"}]},{name:"Wax 3D #3",stops:[{color:"#fcfff4",position:"0%"},{color:"#dfe5d7",position:"40%"},{color:"#b3bead",position:"100%"}]},{name:"Wax 3D",stops:[{color:"#e5e696",position:"0%"},{color:"#d1d360",position:"100%"}]},{name:"Wax Flat",stops:[{color:"#eaefb5",position:"0%"},{color:"#e1e9a0",position:"100%"}]},{name:"Black 3D #1",stops:[{color:"#45484d",position:"0%"},{color:"#000000",position:"100%"}]},{name:"Black 3D",stops:[{color:"#7d7e7d",position:"0%"},{color:"#0e0e0e",position:"100%"}]},{name:"Black Gloss Pipe",stops:[{color:"#959595",position:"0%"},{color:"#0d0d0d",position:"46%"},{color:"#010101",position:"50%"},{color:"#0a0a0a",position:"53%"},{color:"#4e4e4e",position:"76%"},{color:"#383838",position:"87%"},{color:"#1b1b1b",position:"100%"}]},{name:"Black Gloss",stops:[{color:"#aebcbf",position:"0%"},{color:"#6e7774",position:"50%"},{color:"#0a0e0a",position:"51%"},{color:"#0a0809",position:"100%"}]},{name:"Web 2.0 Blue 3D #1",stops:[{color:"#c5deea",position:"0%"},{color:"#8abbd7",position:"31%"},{color:"#066dab",position:"100%"}]},{name:"Blue 3D #1",stops:[{color:"#f7fbfc",position:"0%"},{color:"#d9edf2",position:"40%"},{color:"#add9e4",position:"100%"}]},{name:"Blue 3D",stops:[{color:"#d6f9ff",position:"0%"},{color:"#9ee8fa",position:"100%"}]},{name:"Blue 3D #3",stops:[{color:"#e9f6fd",position:"0%"},{color:"#d3eefb",position:"100%"}]},{name:"Blue 3D #4",stops:[{color:"#63b6db",position:"0%"},{color:"#309dcf",position:"100%"}]},{name:"Blue 3D #2",stops:[{color:"#2c539e",position:"0%"},{color:"#2c539e",position:"100%"}]},{name:"Ble 3D #5",stops:[{color:"#a9e4f7",position:"0%"},{color:"#0fb4e7",position:"100%"}]},{name:"Blue 3D #5",stops:[{color:"#93cede",position:"0%"},{color:"#75bdd1",position:"41%"},{color:"#49a5bf",position:"100%"}]},{name:"Blue 3D #6",stops:[{color:"#b2e1ff",position:"0%"},{color:"#66b6fc",position:"100%"}]},{name:"Blue 3D #9",stops:[{color:"#4f85bb",position:"0%"},{color:"#4f85bb",position:"100%"}]},{name:"Blue 3D #10",stops:[{color:"#deefff",position:"0%"},{color:"#98bede",position:"100%"}]},{name:"Blue 3D #11",stops:[{color:"#49c0f0",position:"0%"},{color:"#2cafe3",position:"100%"}]},{name:"Blue 3D #12",stops:[{color:"#feffff",position:"0%"},{color:"#d2ebf9",position:"100%"}]},{name:"Blue 3d #8",stops:[{color:"#a7cfdf",position:"0%"},{color:"#23538a",position:"100%"}]},{name:"Blue 3d #7",stops:[{color:"#499bea",position:"0%"},{color:"#207ce5",position:"100%"}]},{name:"Blue Flat",stops:[{color:"#356aa0",position:"0%"},{color:"#356aa0",position:"100%"}]},{name:"White 3D #1",stops:[{color:"#ffffff",position:"0%"},{color:"#f6f6f6",position:"47%"},{color:"#ededed",position:"100%"}]},{name:"White 3D #2",stops:[{color:"#f2f9fe",position:"0%"},{color:"#d6f0fd",position:"100%"}]},{name:"White 3D",stops:[{color:"#ffffff",position:"0%"},{color:"#e5e5e5",position:"100%"}]},{name:"White Gloss #1",stops:[{color:"#ffffff",position:"0%"},{color:"#f1f1f1",position:"50%"},{color:"#e1e1e1",position:"51%"},{color:"#f6f6f6",position:"100%"}]},{name:"White Gloss #2",stops:[{color:"#ffffff",position:"0%"},{color:"#f3f3f3",position:"50%"},{color:"#ededed",position:"51%"},{color:"#ffffff",position:"100%"}]},{name:"White Gloss",stops:[{color:"#f6f8f9",position:"0%"},{color:"#e5ebee",position:"50%"},{color:"#d7dee3",position:"51%"},{color:"#f5f7f9",position:"100%"}]},{name:"Yellow 3D #1",stops:[{color:"#f6e6b4",position:"0%"},{color:"#ed9017",position:"100%"}]},{name:"Yellow 3D #2",stops:[{color:"#eab92d",position:"0%"},{color:"#c79810",position:"100%"}]},{name:"Yellow 3D #2",stops:[{color:"#ffd65e",position:"0%"},{color:"#febf04",position:"100%"}]},{name:"Yellow 3D",stops:[{color:"#f1e767",position:"0%"},{color:"#feb645",position:"100%"}]},{name:"Yellow Flat #1",stops:[{color:"#ffff88",position:"0%"},{color:"#ffff88",position:"100%"}]},{name:"Yellow Flat",stops:[{color:"#febf01",position:"0%"},{color:"#febf01",position:"100%"}]}]}};Gradient.DB.Default=Gradient.DB.UltimateWeb2;/*
 
 CSS Gradient Editor
 
 Written by Alex Sirota (alex @ iosart.com)

 Copyright (c) Alex Sirota 2010, All Rights Reserved

 Please do not use without permission

*/
if(typeof Gradient=="undefined"){var Gradient={}}Gradient.Editor=function(b){var c=this;if(navigator.appVersion.indexOf("Mac")!=-1){$$("body")[0].addClassName("macos")}this.gradientControl=$(b);this.gradientPanelElem=this.gradientControl.select(".gradient-panel")[0];this.gradientMarkersContainerElem=this.gradientControl.select(".stop-markers-color")[0];this.gradientMarkerDeleterElem=this.gradientControl.select(".stop-markers-color-deleter")[0];this.stopDetailsPanel=this.gradientControl.select(".stop-details-color")[0];var g={gradientEditor:this,gradientControl:this.gradientControl,gradientPanelElem:this.gradientPanelElem,gradientMarkersContainerElem:this.gradientMarkersContainerElem,gradientMarkerDeleterElem:this.gradientMarkerDeleterElem,stopDetailsPanel:this.stopDetailsPanel,onStopActivatedCallback:this.onStopActivated.bind(this)};this.colorStopsHandler=new Gradient.StopsHandler("color",g);this.gradientOpacityMarkersContainerElem=this.gradientControl.select(".stop-markers-opacity")[0];this.gradientOpacityMarkerDeleterElem=this.gradientControl.select(".stop-markers-opacity-deleter")[0];this.opacityStopDetailsPanel=this.gradientControl.select(".stop-details-opacity")[0];var g={gradientEditor:this,gradientControl:this.gradientControl,gradientPanelElem:this.gradientPanelElem,gradientMarkersContainerElem:this.gradientOpacityMarkersContainerElem,gradientMarkerDeleterElem:this.gradientOpacityMarkerDeleterElem,stopDetailsPanel:this.opacityStopDetailsPanel,onStopActivatedCallback:this.onStopActivated.bind(this)};this.opacityStopsHandler=new Gradient.StopsHandler("opacity",g);this.cssTextElem=this.gradientControl.select(".css-output-text")[0];this.cssCopyButtonContainerElem=this.gradientControl.select(".copy-button-container")[0];this.cssCopyButtonElem=this.cssCopyButtonContainerElem.select(".copy-button")[0];this.cssCopyStatusElem=this.gradientControl.select(".copy-status")[0];this.cssNotesElem=this.gradientControl.select(".css-notes")[0];this.cssNotesTextElem=this.cssNotesElem.select(".css-notes-text")[0];this.cssCompatNotesElem=$$(".browser-compatibility .css-notes")[0];this.cssCompatNotesTextElem=this.cssCompatNotesElem.select(".css-notes-text")[0];this.cssNotesCloseButton=this.cssNotesElem.select(".small-close-button")[0];this.cssNotesCloseButton.observe("click",function(){c.cssNotesElem.hide()});this.cssCompatNotesCloseButton=this.cssCompatNotesElem.select(".small-close-button")[0];this.cssCompatNotesCloseButton.observe("click",function(){c.cssCompatNotesElem.hide()});this.currentOutputFormatElem=this.gradientControl.select(".current-output-format")[0];this.switchOutputFormatElem=this.gradientControl.select(".switch-output-format")[0];this.previewBackgroundElem=this.gradientControl.select(".preview-panel-background")[0];this.previewElem=this.gradientControl.select(".preview-panel")[0];this.previewHandleElem=this.gradientControl.select(".preview-panel-handle")[0];this.orientationSelectorElem=this.gradientControl.select(".output-options .orientation")[0];this.previewDimensionWidthElem=this.gradientControl.select(".output-options .dimension-width")[0];this.previewDimensionHeightElem=this.gradientControl.select(".output-options .dimension-height")[0];this.previewAsIECheckboxElem=this.gradientControl.select(".output-options input.preview-as-ie")[0];this.presetsContainerElem=this.gradientControl.select(".presets .presets-container")[0];this.gradientNameBoxElem=this.gradientControl.select(".gradient-name .name-input")[0];this.saveNewPresetButtonElem=this.gradientControl.select(".gradient-name .save-new-preset")[0];function a(i,h){c.previewDimensionsWidth=i-2;c.previewDimensionsHeight=h-2;c.previewDimensionWidthElem.value=c.previewDimensionsWidth;c.previewDimensionHeightElem.value=c.previewDimensionsHeight;ColorZilla.Persist.set("preview-width",c.previewDimensionsWidth);ColorZilla.Persist.set("preview-height",c.previewDimensionsHeight)}Gradient.UIUtils.makeResizable(this.previewBackgroundElem,this.previewHandleElem,a);this.colorFormatSelectorElem=this.gradientControl.select(".css-options .color-format")[0];this.includeCSSCommentsCheckboxElem=this.gradientControl.select(".css-options input#css-comments")[0];this.supportIE9CheckboxElem=$$("input#css-ie9-support")[0];this.maximizeCssCompatibilityElem=$$("input#maximize-css-compatibility")[0];this.supportIE9HelpElem=$$(".css-ie9-support-help a")[0];this.colorPickerElem=$("colorpicker-1");this.gradientPanelElemWidth=Element.getWidth(this.gradientPanelElem);this.gradientPanelElemWidth-=2;this.cssTextElem.observe("dblclick",function(){Gradient.Utils.selectTextInNode(c.cssTextElem);Gradient.Utils.sendEvent("generated-output","text-select")});this.orientationSelectorElem.observe("change",this.onOrientationSelectorChange.bind(this));this.previewDimensionWidthElem.observe("change",this.onPreviewDimensionsChange.bind(this));this.previewDimensionHeightElem.observe("change",this.onPreviewDimensionsChange.bind(this));this.previewAsIECheckboxElem.observe("change",this.onPreviewAsIECheckboxChange.bind(this));this.colorFormatSelectorElem.observe("change",this.onColorFormatSelectorChange.bind(this));this.includeCSSCommentsCheckboxElem.observe("change",this.onIncludeCSSCommentsCheckboxChange.bind(this));this.saveNewPresetButtonElem.observe("click",this.onSaveNewPresetButtonClick.bind(this));this.supportIE9CheckboxElem.observe("change",this.onSupportIE9CheckboxChange.bind(this));this.supportIE9HelpElem.observe("click",function(h){Event.stop(h);c.showIE9SupportInstructions()});this.maximizeCssCompatibilityElem.observe("change",this.onMaximizeCssCompatibilityCheckboxChange.bind(this));this.importFromCSSButton=this.gradientControl.select("a.import-css")[0];this.importFromCSSButton.observe("click",this.onImportFromCSSButtonClicked.bind(this));this.importFromCSSPanel=this.gradientControl.select(".import-css-input-panel")[0];this.importFromCSSPanelOkButton=this.gradientControl.select(".import-css-input-panel button.ok")[0];this.importFromCSSPanelOkButton.observe("click",this.onImportFromCSSPanelOkButtonClick.bind(this));this.importFromCSSPanelCancelButton=this.gradientControl.select(".import-css-input-panel button.cancel")[0];this.importFromCSSPanelCancelButton.observe("click",this.onImportFromCSSPanelCancelButtonClick.bind(this));this.importFromCSSTextElem=this.gradientControl.select(".import-css-input-panel .import-css-text")[0];this.importFromImageButton=this.gradientControl.select("a.import-image")[0];this.importFromImageButton.observe("click",this.onImportFromImageButtonClicked.bind(this));this.importFromImagePanel=this.gradientControl.select(".import-image-input-panel")[0];this.importFromImageForm=this.gradientControl.select(".import-image-form")[0];this.importFromImagePanelOkButton=this.gradientControl.select(".import-image-input-panel button.ok")[0];this.importFromImagePanelOkButton.observe("click",this.onImportFromImagePanelOkButtonClick.bind(this));this.importFromImagePanelCancelButton=this.gradientControl.select(".import-image-input-panel button.cancel")[0];this.importFromImagePanelCancelButton.observe("click",this.onImportFromImagePanelCancelButtonClick.bind(this));this.importFromImageFileInputElem=this.gradientControl.select(".import-image-input-panel input.import-image-file-input")[0];this.importFromImageURLInputElem=this.gradientControl.select(".import-image-input-panel input.import-image-url-input")[0];this.switchOutputFormatElem.observe("click",this.onSwitchOutputFormatClicked.bind(this));this.permalinkElem=this.gradientControl.select(".permalink-panel .permalink")[0];this.permalinkElem.observe("mousedown",function(){Gradient.Utils.sendEvent("permalink","click")});this.cssImporter=null;this.lastUsedColor="#ffffff";this.outputOrientation=ColorZilla.Persist.get("output-orientation","vertical");this.orientationSelectorElem.value=this.outputOrientation;this.previewDimensionsWidth=ColorZilla.Persist.get("preview-width","370");this.previewDimensionsHeight=ColorZilla.Persist.get("preview-height","50");this.previewDimensionWidthElem.value=this.previewDimensionsWidth;this.previewDimensionHeightElem.value=this.previewDimensionsHeight;this.previewAsIE=false;this.cssColorFormat=ColorZilla.Persist.get("css-color-format","hex");this.colorFormatSelectorElem.value=this.cssColorFormat;this.includeCSSComments=(ColorZilla.Persist.get("include-css-comments","true")=="true");this.includeCSSCommentsCheckboxElem.checked=this.includeCSSComments;this.supportIE9=(ColorZilla.Persist.get("support-ie9","false")=="true");this.supportIE9CheckboxElem.checked=this.supportIE9;this.updateIE9CompatibilityDisplay(this.supportIE9);this.maximizeCSSCompatibility=(ColorZilla.Persist.get("maximize-css-compatibility","false")=="true");this.maximizeCssCompatibilityElem.checked=this.maximizeCSSCompatibility;this.updateMaximizeCSSCompatibilityDisplay(this.maximizeCSSCompatibility);this.outputFormat=ColorZilla.Persist.get("output-format","css");this.switchToPresetSet("Default");this.userGradientPresets=Gradient.UserPresets.get();this.userGradientPresetsIDCounter=this.userGradientPresets.length;this.addUserPresets(this.userGradientPresets);function f(){Refresh.Web.DefaultColorPickerSettings.clientFilesPath="../colorpicker/images/";c.colorPicker=new Refresh.Web.ColorPicker("cp1",{startHex:"ffcc00",startMode:"s"});c.colorPicker.updateColorZilla=function(){var k=Refresh.Web.ColorMethods.normalizeHex($("cp1_Hex").value);c.colorStopsHandler.changeActiveStopValue("#"+k)};c.colorPickerDialogWin=new Window({top:170,left:400,maximizable:false,resizable:false,minimizable:false,hideEffect:Element.hide,showEffect:Element.show});c.colorPickerDialogWin.setContent("colorpicker-1",true,false);var j=c.colorPickerElem.select(".dialog-button.ok-button")[0];var i=c.colorPickerElem.select(".dialog-button.cancel-button")[0];j.observe("click",function(){c.invalidateCurrentPreset();var k=Refresh.Web.ColorMethods.normalizeHex($("cp1_Hex").value);c.lastUsedColor="#"+k;c.colorPickerDialogWin.close()});i.observe("click",function(){c.colorPickerDialogWin.close()});Event.observe(window,"keypress",function(k){if((k.keyCode==Event.KEY_ESC)&&c.colorPickerDialogWin.visible){c.colorPickerDialogWin.close()}});myObserver={onClose:function(k,l){if(l==c.colorPickerDialogWin){c.colorStopsHandler.changeActiveStopValue(c.lastUsedColor)}}};Windows.addObserver(myObserver);var h=[{name:"Save Current Gradient",callback:function(k){c.onSaveNewPresetButtonClick()},className:"new-preset"},{name:"Delete Gradient",callback:function(k){c.deleteUserPreset(k.contextMenuElement)},className:"delete-preset"},];new Proto.Menu({beforeShow:function(l){var k=l.contextMenuContainerElement.select(".delete-preset")[0];if(!l.contextMenuElement.hasClassName("user-preset")){k.addClassName("disabled");k.removeClassName("enabled")}else{k.addClassName("enabled");k.removeClassName("disabled")}},selector:".has-preset-contextmenu",className:"menu desktop preset-context-menu",menuItems:h});c.updateOutputFormatHeaders();c.initCopyToClipboard()}setTimeout(f,10);setTimeout(function(){c.gradientAdjuster=new Gradient.Adjustments(c)},10);var d=this.getGradientFromPermalinkHash(window.location.hash);var e;if(d){e=d;Gradient.Utils.sendEvent("permalink","loaded",e.name)}else{if(this.userGradientPresets.length>0){e=this.userGradientPresets[this.userGradientPresets.length-1]}else{e=Gradient.DB.Default.gradients[0]}}this.setCurrentPreset(e.name,Gradient.Utils.deepClone(e.stops),Gradient.Utils.deepClone(this.getGradientPresetOpacityStops(e)));Event.observe(window,"hashchange",this.onHashChanged.bind(this));this.uiUpdateTimerID=0};Gradient.Editor.prototype={cssGradientsSupported:function(){var b="background-image:gradient(linear,left top,right bottom,from(#222),to(#444));background-image:-o-gradient(linear,left top,right bottom,from(#222),to(#444));background-image:-moz-gradient(linear,left top,right bottom,from(#222),to(#444));background-image:-ms-gradient(linear,left top,right bottom,from(#222),to(#444));background-image:-webkit-gradient(linear,left top,right bottom,from(#222),to(#444));background-image:-khtml-gradient(linear,left top,right bottom,from(#222),to(#444));background-image:linear-gradient(left top,#222, #444);background-image:-o-linear-gradient(left top,#222, #444);background-image:-moz-linear-gradient(left top,#222, #444);background-image:-ms-linear-gradient(left top,#222, #444);background-image:-webkit-linear-gradient(left top,#222, #444);background-image:-khtml-linear-gradient(left top,#222, #444);";var a=document.createElement("div");a.style.cssText=b;return a.style.backgroundImage.indexOf("gradient")!==-1},formatCSSColor:function(a,c,d){if((d=="hex")||((d=="iehex")&&(c==1))){return a.toLowerCase()}if(d=="iehex"){a=a.toLowerCase();if(a.substr(0,1)=="#"){a=a.substring(1)}c=Math.round(c*255);c=Gradient.Utils.decimalToHexa(c);return"#"+c+a}var b=Gradient.Utils.hexaToRGB(a);if(d=="rgb"){return Gradient.Utils.rbgToRGBCSS(b)}if(d=="rgba"){return Gradient.Utils.rbgAndAlphaToRGBACSS(b,c)}if(d=="hsl"){return Gradient.Utils.rgbToHSLCSS(b)}if(d=="hsla"){return Gradient.Utils.rgbToHSLCSS(b,c)}return a},generateCSSRules:function(k,g,v){var m=k;if(typeof(g)=="undefined"){g="horizontal"}if(typeof(v)=="undefined"){v="hex"}var s,a,f,z,e,x,y;var n="linear";var C=false;switch(g){case"horizontal":s="left top, right top";a="left";f="GradientType=1";z="horizontal";e="left";x="left";y="to right";break;case"vertical":s="left top, left bottom";a="top";f="GradientType=0";z="vertical";e="top";x="top";y="to bottom";break;case"diagonal":s="left top, right bottom";a="-45deg";f="GradientType=1";z="horizontal";e="-45deg";C=true;x="left top";y="135deg";break;case"diagonal-bottom":s="left bottom, right top";a="45deg";f="GradientType=1";z="horizontal";e="45deg";C=true;x="left bottom";y="45deg";break;case"radial":n="radial";s="center center, 0px, center center, 100%";a="center, ellipse cover";f="GradientType=1";z="horizontal";e="center, ellipse cover";x="center, ellipse cover";C=true;y="ellipse at center";break}var B=(v=="rgba")?"rgb":((v!="hex")&&(v!="rgb")?"hex":v);var l=this.formatCSSColor(m[0].color,1,B);var r=[];var d=[];var o=[];var c=this.formatCSSColor(m[0].color,m[0].opacity,"iehex");var q=this.formatCSSColor(m[m.length-1].color,m[m.length-1].opacity,"iehex");ieCSS="startColorstr='"+c+"', endColorstr='"+q+"'";for(var w=0;w<m.length;w++){var u=this.formatCSSColor(m[w].color,m[w].opacity,v);var D=m[w].position;r.push(u+" "+D);d.push("color-stop("+D+","+u+")")}var E=r;var A=a;var o=E;r=r.join(", ");r="-moz-"+n+"-gradient("+a+",  "+r+")";d=d.join(", ");d="-webkit-gradient("+n+", "+s+", "+d+")";ieCSS="progid:DXImageTransform.Microsoft.gradient( "+ieCSS+","+f+" )";o="-o-"+n+"-gradient("+e+",  "+o+")";var t="-webkit-"+n+"-gradient("+A+",  "+E+")";var h="-ms-"+n+"-gradient("+A+",  "+E+")";var p=E;var E=n+"-gradient("+y+",  "+E+")";var j=n+"-gradient("+x+",  "+p+")";var b="filter-gradient("+c+", "+q+", "+z+");";return{kind:n,solid:l,moz:r,webkit:d,newWebkit:t,ie:ieCSS,ieCSSIsFallback:C,ieCSS3:h,opera:o,w3Standard:E,standardSCSS:j,ieSCSS:b}},generateSVGRule:function(a,c){var b=this.generateSVG(a,c);var d=Gradient.Utils.dataURIEncode(b,"image/svg+xml");return"url("+d+")"},generateSVG:function(n,b){var m=n;var j;var k="linear";var h='x="0" y="0" width="1" height="1"';switch(b){case"horizontal":j='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"vertical":j='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"diagonal":j='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"diagonal-bottom":j='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"radial":k="radial";j='cx="50%" cy="50%" r="75%"';h='x="-50" y="-50" width="101" height="101"';break}var l=new Date;var a="ucgg-generated";var f=[];f.push('<?xml version="1.0" ?>');f.push('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none">');f.push("  <"+k+'Gradient id="grad-'+a+'" gradientUnits="userSpaceOnUse" '+j+">");for(var d=0;d<m.length;d++){var c=m[d].color.toLowerCase();var g=m[d].opacity;var e=m[d].position;f.push('    <stop offset="'+e+'" stop-color="'+c+'" stop-opacity="'+g+'"/>')}f.push("  </"+k+"Gradient>");f.push("  <rect "+h+' fill="url(#grad-'+a+')" />');f.push("</svg>");f=f.join("\n");return f},setElementGradientBackground:function(b,a){try{b.style.background=a.solid}catch(c){}try{b.style.background=a.moz}catch(c){}try{b.style.background=a.webkit}catch(c){}try{b.style.background=a.newWebkit}catch(c){}try{b.style.background=a.opera}catch(c){}try{b.style.background=a.ieCSS3}catch(c){}try{b.style.filter=a.ie}catch(c){}try{b.style.background=a.w3Standard}catch(c){}},setColorStops:function(a){this.colorStopsHandler.setStops(a);this.updateAllUI()},setAllStops:function(b,a){this.colorStopsHandler.setStops(b);if((typeof a=="undefined")||(!a)){this.opacityStopsHandler.setStops(this.opacityStopsHandler.defaultStops)}else{this.opacityStopsHandler.setStops(a)}this.updateAllUI()},getColorStops:function(){return this.colorStopsHandler.getStops()},getOpacityStops:function(){return this.opacityStopsHandler.getStops()},currentGradientHasOpacity:function(){var a=this.getOpacityStops();return Gradient.StopUtils.gradientHasOpacity({stops:a})},getMergedStops:function(){if(this.currentGradientHasOpacity()){return Gradient.StopUtils.mergeStops(this.getColorStops(),this.getOpacityStops())}else{var b=Gradient.Utils.deepClone(this.getColorStops());for(var a=0;a<b.length;a++){b[a].opacity=1}return b}},getGradientPresetOpacityStops:function(a){return"opacityStops" in a?a.opacityStops:this.opacityStopsHandler.defaultStops},setNewStopColor:function(a){this.lastUsedColor=a},updateAllUI:function(){this.mergedStops=this.getMergedStops();this.updateGradientPanel();this.colorStopsHandler.updateStopMarkers();this.opacityStopsHandler.updateStopMarkers();this.switchToOpacitySupportingColorModeIfNeeded();this.cssRules=this.generateCSSRules(this.mergedStops,this.outputOrientation,this.cssColorFormat);this.updatePreviewElement();var a=this;clearTimeout(this.uiUpdateTimerID);this.uiUpdateTimerID=setTimeout(function(){if(a.supportIE9){a.cssRules.svg=a.generateSVGRule(a.mergedStops,a.outputOrientation)}a.updatePermalink();a.updateCSSOutput()},50)},switchToOpacitySupportingColorModeIfNeeded:function(){if(this.currentGradientHasOpacity()&&(this.cssColorFormat!="rgba")&&(this.cssColorFormat!="hsla")){this.cssColorFormat=this.cssColorFormat=="hsl"?"hsla":"rgba";this.colorFormatSelectorElem.value=this.cssColorFormat;this.cssNotesTextElem.innerHTML="Current gradient has opacity, switching color format to '"+this.cssColorFormat+"'";this.cssNotesElem.show();ColorZilla.Persist.set("css-color-format",this.cssColorFormat)}},adjustCopyButtonPositionForScrollbar:function(){if(typeof this.scrollbarWidth=="undefined"){var b=$$(".scrollbar-measure")[0];this.scrollbarWidth=(b.offsetWidth-b.clientWidth);this.cssCopyButtonElemLastMargin=-1}var a=(this.cssTextElem.scrollHeight>this.cssTextElem.getHeight())?this.scrollbarWidth:1;if(a!=this.cssCopyButtonElemLastMargin){this.cssCopyButtonElemLastMargin=a;this.cssCopyButtonElem.style.marginRight=a+"px"}},getPermalink:function(){return"http://colorzilla.com/gradient-editor/#"+this.currentGradientToHash()},updatePermalink:function(){this.permalinkElem.setAttribute("href",this.getPermalink())},updateGradientPanel:function(){var b=this.mergedStops;var a=this.generateCSSRules(b,"horizontal","rgba");this.setElementGradientBackground(this.gradientPanelElem,a)},updateCSSOutput:function(){var b=this.cssRules;var a=[];var d=[];var f="IE9 SVG, needs conditional override of 'filter' to 'none'";var c="IE6-9";if(this.supportIE9){c="IE6-8"}if(b.ieCSSIsFallback){c+=" fallback on horizontal gradient"}var e;if(this.outputFormat=="css"){if(this.includeCSSComments){a.push("/* Permalink - use to edit and share this gradient: "+this.getPermalink()+" */")}if(!this.currentGradientHasOpacity()){a.push("background: "+b.solid+";"+(this.includeCSSComments?" /* Old browsers */":""))}if(this.supportIE9){if(this.includeCSSComments){a.push("/* "+f+" */")}a.push("background: "+b.svg+";")}a.push("background: "+b.moz+";"+(this.includeCSSComments?" /* FF3.6-15 */":""));if(this.maximizeCSSCompatibility){a.push("background: "+b.webkit+";"+(this.includeCSSComments?" /* Chrome4-9,Safari4-5 */":""))}a.push("background: "+b.newWebkit+";"+(this.includeCSSComments?" /* Chrome10-25,Safari5.1-6 */":""));if(this.maximizeCSSCompatibility){a.push("background: "+b.opera+";"+(this.includeCSSComments?" /* Opera "+(b.kind=="linear"?"11.10-11.50":"12+")+" */":""));a.push("background: "+b.ieCSS3+";"+(this.includeCSSComments?" /* IE10 preview */":""))}a.push("background: "+b.w3Standard+";"+(this.includeCSSComments?" /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */":""));a.push("filter: "+b.ie+";"+(this.includeCSSComments?" /* "+c+" */":""));e=a}else{if(this.includeCSSComments){d.push("// Needs latest Compass, add '@import \"compass\"' to your scss");d.push("// Permalink - use to edit and share this gradient:");d.push("// "+this.getPermalink())}if(!this.currentGradientHasOpacity()){d.push("background-color: "+b.solid+";"+(this.includeCSSComments?" // Old browsers":""))}d.push("@include "+b.ieSCSS+(this.includeCSSComments?" // "+c:""));if(this.supportIE9){if(this.includeCSSComments){d.push("// "+f)}d.push("$experimental-support-for-svg: true;")}d.push("@include background-image("+b.standardSCSS+");");e=d}this.cssTextElem.innerHTML="<div>"+e.join("</div><div>")+"</div>";if(typeof this.initialStateRemoved=="undefined"){this.cssTextElem.removeClassName("initial");this.initialStateRemoved=true}this.adjustCopyButtonPositionForScrollbar()},updatePreviewElement:function(){var b;if(!this.previewAsIE){b=this.cssRules}else{var d=this.getMergedStops();var a=[d[0],d[d.length-1]];var c=(this.outputOrientation.substr(0,8)!="diagonal")&&(this.outputOrientation!="radial")?this.outputOrientation:"horizontal";b=this.generateCSSRules(a,c,"rgba")}this.setElementGradientBackground(this.previewElem,b);this.previewBackgroundElem.style.width=this.previewDimensionsWidth+"px";this.previewBackgroundElem.style.height=this.previewDimensionsHeight+"px"},updateOutputFormatHeaders:function(){if(this.outputFormat=="scss"){currentFormatStr="SCSS (Sass)";switchToNewFormatStr="switch to css"}else{currentFormatStr="CSS";switchToNewFormatStr="switch to scss"}this.currentOutputFormatElem.innerHTML=currentFormatStr;this.switchOutputFormatElem.innerHTML=switchToNewFormatStr},setLastUsedColorFromCurrentGradient:function(){var a=this.getColorStops();this.lastUsedColor=a[0].color},onHashChanged:function(){var b=window.location.hash;if(!b||(b=="#")){return}var a=this.getGradientFromPermalinkHash(b);if(!a){return}this.setCurrentPreset(a.name,Gradient.Utils.deepClone(a.stops),Gradient.Utils.deepClone(this.getGradientPresetOpacityStops(a)))},resetURLHash:function(){var a=window.location.hash;if(a&&(a.length>6)){window.location.hash="#_"}},getGradientFromPermalinkHash:function(f){if(!f||!f.match(/,/)){return null}if(f.substr(0,1)=="#"){f=f.substring(1)}f=f.replace(/&amp;/g,"&");var d=f.split(";");var a=d.length>1?decodeURIComponent(d[1]):"Custom";a=a.replace(/\+/g," ");a=a.replace(/[^0-9a-zA-Z \-_\.#]/g," ");var b=d[0];var n=b.split("&");b=n[0];var k=(n.length==2)?n[1]:null;var j=b.split(",");var p=[];for(var e=0;e<j.length;e++){var m=j[e].split("+");var c=m[0];if(!c.match(/^[0-9a-fA-F]{6}$/)){c="ffffff"}c="#"+c;var l=m[1];if(!l.match(/^\d{1,3}$/)){l="0"}l+="%";p.push({color:c,position:l})}var g=null;if(k){var j=k.split(",");g=[];for(var e=0;e<j.length;e++){var m=j[e].split("+");var h=m[0];if(!h.match(/^[0-9\.]+$/)){h=1}var l=m[1];if(!l.match(/^\d{1,3}$/)){l="0"}l+="%";g.push({opacity:h,position:l})}}var o={name:a,stops:p};if(g){o.opacityStops=g}return o},currentGradientToHash:function(){var c=[];var j=this.getColorStops();for(var e=0;e<j.length;e++){var h=j[e];var b=h.color.toLowerCase();if(b.substr(0,1)=="#"){b=b.substring(1)}var g=parseInt(h.position);c.push(b+"+"+g)}var d=c.join(",");if(this.currentGradientHasOpacity()){var c=[];var j=this.getOpacityStops();for(var e=0;e<j.length;e++){var h=j[e];var f=h.opacity;var g=parseInt(h.position);c.push(f+"+"+g)}d+="&"+c.join(",")}var a=encodeURIComponent(this.getCurrentPresetName());if(a!="Custom"){a=a.replace(/%20/g,"+");d+=";"+a}return d},openColorPickerAndGetColor:function(b){var a=window.prompt("Enter new color");if(a!==null){b(a)}},initCopyToClipboard:function(){if(!FlashDetect.installed){this.cssCopyButtonElem.addClassName("no-flash");return}ZeroClipboard.setMoviePath("http://cdn.colorzilla.net/gradient-editor/js/v1/ZeroClipboard.swf");var b=new ZeroClipboard.Client();b.setHandCursor(true);var a=this;b.addEventListener("load",function(c){});b.addEventListener("mouseOver",function(c){var d=a.cssTextElem.innerHTML;d=d.replace(/<div[^>]*>/g,"");d=d.replace(/<\/div>/g,"\r\n");d=d.replace(/&amp;/g,"&");b.setText(d)});b.addEventListener("complete",function(c,d){a.cssCopyStatusElem.show();setTimeout(function(){a.cssCopyStatusElem.hide()},2000);Gradient.Utils.sendEvent("generated-output","text-copy")});b.glue(this.cssCopyButtonElem,this.cssCopyButtonContainerElem)},openColorPicker:function(a,c){this.colorPickerDialogWin.show(true);$("cp1_Hex").focus();var b=this.lastUsedColor.substring(1);this.colorPicker._cvp._hexInput.value=b;this.colorPicker._cvp.setValuesFromHex();this.colorPicker.positionMapAndSliderArrows();this.colorPicker.updateVisuals()},switchToPresetSet:function(b){this.clearPresets();var a=Gradient.DB[b];if(typeof(a)=="undefined"){return}if(typeof(a.license)!="undefined"){}for(var c=0;c<a.gradients.length;c++){this.addPreset(a.gradients[c])}},addUserPresets:function(a){for(var b=0;b<a.length;b++){this.addPreset(a[b],true,true)}},clearPresets:function(){var a=this.presetsContainerElem;if(!a.hasChildNodes()){return}while(a.childNodes.length>=1){a.removeChild(a.firstChild)}},addPreset:function(i,l,d){var j=i.stops;var a=i.name;var c=this.getGradientPresetOpacityStops(i);var e=document.createElement("div");e.className="preset-item-background gradient-background";var b=document.createElement("div");var g="preset-item  has-preset-contextmenu";if(d){g+=" user-preset";if("uniqueID" in i){b.setAttribute("preset-id",i.uniqueID)}}b.className=g;var k=Gradient.StopUtils.mergeStops(j,c);var f=this.generateCSSRules(k,"diagonal","rgba");this.setElementGradientBackground(b,f);var h=this;var j=Gradient.Utils.deepClone(j);var c=Gradient.Utils.deepClone(c);Element.extend(b);b.observe("click",function(m){if(!Event.isLeftClick(m)){return}h.resetURLHash();h.setCurrentPreset(a,j,c);Gradient.Utils.sendEvent("preset","select",a)});e.appendChild(b);if(!l||!this.presetsContainerElem.firstChild){this.presetsContainerElem.appendChild(e)}else{this.presetsContainerElem.insertBefore(e,this.presetsContainerElem.firstChild)}},deletePreset:function(b){var a=b.up(".preset-item-background");a.parentNode.removeChild(a)},deleteUserPreset:function(d){this.deletePreset(d);var c=d.getAttribute("preset-id");var b=[];for(var a=0;a<this.userGradientPresets.length;a++){if(c!=this.userGradientPresets[a].uniqueID){b.push(this.userGradientPresets[a])}}this.userGradientPresets=b;Gradient.UserPresets.persist(this.userGradientPresets)},getCurrentPresetName:function(a){return this.gradientNameBoxElem.value},setPresetName:function(a){this.gradientNameBoxElem.value=a},setCurrentPreset:function(b,c,a){this.setPresetName(b);this.setAllStops(c,a);if(this.gradientAdjuster){this.gradientAdjuster.resetAllAdjustments()}this.setLastUsedColorFromCurrentGradient()},invalidateCurrentPreset:function(a){this.setPresetName("Custom");this.resetURLHash();if(!a&&this.gradientAdjuster){this.gradientAdjuster.resetAllAdjustments()}},saveNewPreset:function(){var a={name:this.getCurrentPresetName(),stops:this.getColorStops()};if(this.currentGradientHasOpacity()){a.opacityStops=this.getOpacityStops()}a.uniqueID=this.userGradientPresetsIDCounter;this.userGradientPresetsIDCounter++;this.addPreset(a,true,true);a=Gradient.Utils.deepClone(a);this.userGradientPresets.push(a);Gradient.UserPresets.persist(this.userGradientPresets);Gradient.Utils.sendEvent("preset","save",a.name)},toggleImportCSSPanel:function(){this.showHideImportImagePanel(false);this.gradientAdjuster.onAdjustHueSaturationPanelCancelButtonClick(null,true);Element.toggle(this.importFromCSSPanel)},toggleImportImagePanel:function(){this.showHideImportCSSPanel(false);this.gradientAdjuster.onAdjustHueSaturationPanelCancelButtonClick(null,true);Element.toggle(this.importFromImagePanel)},showHideImportPanel:function(b,a){if(a){Element.show(b)}else{Element.hide(b)}},showHideImportCSSPanel:function(a){this.showHideImportPanel(this.importFromCSSPanel,a)},showHideImportImagePanel:function(a){this.showHideImportPanel(this.importFromImagePanel,a)},showIE9SupportInstructions:function(){var a=[];a.push('Support for full multi-stop gradients with IE9 (using SVG).<p>Add a "gradient" class to all your elements that have a gradient,');a.push("and add the following override to your HTML to complete the IE9 support:");a.push("<pre>&lt;!--[if gte IE 9]&gt;");a.push('  &lt;style type="text/css"&gt;');a.push("    .gradient {");a.push("       filter: none;");a.push("    }");a.push("  &lt;/style&gt;");a.push("&lt;![endif]--&gt;</pre>");this.cssCompatNotesTextElem.innerHTML=a.join("\n");this.cssCompatNotesElem.show()},exportToImageDataURL:function(){var a=this.previewDimensionsWidth;var l=this.previewDimensionsHeight;var c=document.createElement("canvas");c.setAttribute("width",a);c.setAttribute("height",l);var m=c.getContext("2d");var j=this.outputOrientation=="horizontal"?a:0;var h=this.outputOrientation=="horizontal"?0:l;var b=m.createLinearGradient(0,0,j,h);var k=this.getColorStops();for(var e=0;e<k.length;e++){var g=k[e];var f=parseInt(g.position)/100;b.addColorStop(f,g.color)}m.fillStyle=b;m.fillRect(0,0,a,l);var d=c.toDataURL("image/png");return d},onStopActivated:function(a){if(a=="color"){this.opacityStopsHandler.setActiveStopMakerElemAndUpdateDetailsPanel(null)}else{this.colorStopsHandler.setActiveStopMakerElemAndUpdateDetailsPanel(null)}},onOrientationSelectorChange:function(b){var a=Event.element(b);this.outputOrientation=a.value;this.updateAllUI();ColorZilla.Persist.set("output-orientation",this.outputOrientation);Gradient.Utils.sendEvent("generated-output","change-orientation",this.outputOrientation)},onPreviewDimensionsChange:function(a){this.previewDimensionsWidth=Math.min(parseInt(this.previewDimensionWidthElem.value),370);this.previewDimensionsHeight=Math.min(parseInt(this.previewDimensionHeightElem.value),350);this.previewDimensionWidthElem.value=this.previewDimensionsWidth;this.previewDimensionHeightElem.value=this.previewDimensionsHeight;this.updatePreviewElement();ColorZilla.Persist.set("preview-width",this.previewDimensionsWidth);ColorZilla.Persist.set("preview-height",this.previewDimensionsHeight)},onPreviewAsIECheckboxChange:function(b){var a=Event.element(b);this.previewAsIE=a.checked;this.updatePreviewElement()},onColorFormatSelectorChange:function(b){var a=Event.element(b);this.cssColorFormat=a.value;this.cssNotesElem.hide();this.updateAllUI();ColorZilla.Persist.set("css-color-format",this.cssColorFormat);Gradient.Utils.sendEvent("generated-output","change-color-format",this.cssColorFormat)},onIncludeCSSCommentsCheckboxChange:function(b){var a=Event.element(b);this.includeCSSComments=a.checked;this.updateAllUI();ColorZilla.Persist.set("include-css-comments",this.includeCSSComments?"true":"false");Gradient.Utils.sendEvent("generated-output","change-include-comments",this.includeCSSComments?"true":"false")},updateIE9CompatibilityDisplay:function(b){var a=$$(".browser-compatibility .ie9-support-mode")[0];if(b){a.removeClassName("partial")}else{a.addClassName("partial")}},updateMaximizeCSSCompatibilityDisplay:function(b){var a=$$(".browser-compatibility .compatibility-mode");if(b){a.each(function(c){c.removeClassName("not-supported")})}else{a.each(function(c){c.addClassName("not-supported")})}},onSupportIE9CheckboxChange:function(b){var a=Event.element(b);this.supportIE9=a.checked;this.updateAllUI();ColorZilla.Persist.set("support-ie9",this.supportIE9?"true":"false");if(this.supportIE9){this.showIE9SupportInstructions()}else{this.cssNotesElem.hide();this.cssCompatNotesElem.hide()}this.updateIE9CompatibilityDisplay(this.supportIE9);Gradient.Utils.sendEvent("generated-output","change-support-ie9",this.supportIE9?"true":"false")},onMaximizeCssCompatibilityCheckboxChange:function(b){var a=Event.element(b);this.maximizeCSSCompatibility=a.checked;this.updateAllUI();ColorZilla.Persist.set("maximize-css-compatibility",this.maximizeCSSCompatibility?"true":"false");this.updateMaximizeCSSCompatibilityDisplay(this.maximizeCSSCompatibility);Gradient.Utils.sendEvent("generated-output","change-maximize-css-compatibility",this.maximizeCSSCompatibility?"true":"false")},onImportFromCSSButtonClicked:function(a){this.importFromCSSTextElem.value="";this.toggleImportCSSPanel();Gradient.Utils.sendEvent("import-css","open")},onImportFromImageButtonClicked:function(a){this.importFromImageForm.reset();this.toggleImportImagePanel();Gradient.Utils.sendEvent("import-image","open")},onImportFromCSSPanelOkButtonClick:function(b){var a=this.importFromCSSTextElem.value;if(!a){this.showHideImportCSSPanel(false);Gradient.Utils.sendEvent("import-css","close","error-empty");return}if(!this.cssImporter){this.cssImporter=new Gradient.Importer()}var c=this.cssImporter.parseCSS(a);if(!c){alert("Couldn't parse gradient CSS.\nPlease check the format and try again.");Gradient.Utils.sendEvent("import-css","close","parse-fail");return}this.setAllStops(c.stops,c.opacityStops);this.invalidateCurrentPreset();this.showHideImportCSSPanel(false);Gradient.Utils.sendEvent("import-css","close","success")},onImportFromImagePanelOkButtonClick:function(b){if(!this.importFromImageFileInputElem.value&&!this.importFromImageURLInputElem.value){alert("Please specify file to upload or URL");Gradient.Utils.sendEvent("import-image","close","empty");return}this.importFromImageForm.target="import-image-upload-target";this.importFromImageForm.submit();var a=this;window.importFromImageCallback=function(c){a.onImportFromImageCallback(c)};Gradient.Utils.sendEvent("import-image","start-import")},onImportFromImageCallback:function(a){if(!a){alert("There was an error importing the gradient.\nPlease verify that you provided a valid gradient image and try again.");Gradient.Utils.sendEvent("import-image","close","fail-no-resp");return}else{var b=a.evalJSON(true);if(!b){alert("There was an error in the gradient data.\nPlease verify that you provided a valid gradient image and try again.");Gradient.Utils.sendEvent("import-image","close","fail-cannot-parse");return}this.setAllStops(b.stops,"opacityStops" in b?b.opacityStops:null);this.invalidateCurrentPreset();this.showHideImportImagePanel(false);Gradient.Utils.sendEvent("import-image","close","success")}},onImportFromCSSPanelCancelButtonClick:function(a){this.showHideImportCSSPanel(false);Gradient.Utils.sendEvent("import-css","close","cancel")},onImportFromImagePanelCancelButtonClick:function(a){this.showHideImportImagePanel(false);Gradient.Utils.sendEvent("import-image","close","cancel")},onSaveNewPresetButtonClick:function(a){this.saveNewPreset()},onSwitchOutputFormatClicked:function(c){Event.stop(c);var b,a;if(this.outputFormat=="css"){this.outputFormat="scss"}else{this.outputFormat="css"}this.updateOutputFormatHeaders();ColorZilla.Persist.set("output-format",this.outputFormat);this.updateAllUI();Gradient.Utils.sendEvent("generated-output","change-output-format",this.outputFormat)},};Gradient.Adjustments=function(b){this.gradientEditor=b;this.gradientControl=this.gradientEditor.gradientControl;var h=this.gradientControl.select(".gradient-adjustments-panel")[0];this.adjustments=["hue","sat","light"];this.adjustmentSliderElems={};this.adjustmentEditBoxElems={};this.adjustmentRanges={hue:{min:-180,max:180},sat:{min:-100,max:100},light:{min:-100,max:100},};for(var c=0;c<this.adjustments.length;c++){var k=this.adjustments[c];var g=h.select("."+k+"-adjust-bar-container")[0];var f=g.select("."+k+"-adjust-bar")[0];var l=h.select("."+k+"-adjust-value")[0];var a=Gradient.Utils.blankURI;var d=new Refresh.Web.Slider(f,{xMinValue:1,xMaxValue:this.adjustmentRanges[k].max*2,yMinValue:1,yMaxValue:1,arrowImage:a},g);this.adjustmentSliderElems[k]=d;this.adjustmentEditBoxElems[k]=l;d.onValuesChanged=this.onSliderValueChanged.bind(this,d,k);l.observe("keyup",this.onAdjustValueEntryBoxKeyUp.bindAsEventListener(this,k));l.observe("keydown",this.onAdjustValueEntryBoxKeyDown.bindAsEventListener(this,k));l.observe("blur",this.onAdjustValueEntryBoxBlur.bindAsEventListener(this,k))}this.adjustHueSaturationPanel=h.select(".adjust-hue-saturation-panel")[0];this.adjustHueSaturationPanelOkButton=this.adjustHueSaturationPanel.select("button.ok")[0];this.adjustHueSaturationPanelOkButton.observe("click",this.onAdjustHueSaturationPanelOkButtonClick.bind(this));this.adjustHueSaturationPanelCancelButton=this.adjustHueSaturationPanel.select("button.cancel")[0];this.adjustHueSaturationPanelCancelButton.observe("click",this.onAdjustHueSaturationPanelCancelButtonClick.bind(this));var e=h.select("a.adjust-reverse")[0];e.observe("click",this.onReverseGradientButtonClick.bind(this));var j=h.select("a.adjust-hue-sat")[0];j.observe("click",this.onAdjustHueSaturationButtonClick.bind(this));this.resetAllAdjustments()};Gradient.Adjustments.prototype={resetSpecificAdjustment:function(a){this.adjustmentEditBoxElems[a].value=0;this.adjustmentSliderElems[a].xValue=this.adjustmentRanges[a].max;this.adjustmentSliderElems[a].setArrowPositionFromValues()},resetAllAdjustments:function(b){if(!this.adjustmentsMade&&(typeof b=="undefined")){return}this.adjustmentsMade=false;this.preAdjustmentStops=null;for(var a=0;a<this.adjustments.length;a++){this.resetSpecificAdjustment(this.adjustments[a])}this.currentAdjustments={hue:0,sat:0,light:0}},startAdjusting:function(){if(this.adjustmentsMade){return}this.preAdjustmentStops=Gradient.Utils.deepClone(this.gradientEditor.getColorStops());this.adjustmentsMade=true;this.gradientEditor.invalidateCurrentPreset(true)},setGradientAdjustment:function(b,a){this.startAdjusting();this.currentAdjustments[a]=b;this.adjustGradient()},adjustGradient:function(){var h=Gradient.Utils.deepClone(this.preAdjustmentStops);var a=this.currentAdjustments.sat;var c=this.currentAdjustments.light;function f(k,i){if(i>0){k+=Math.floor((((255-k)*i)/100)+0.5)}else{if(i<0){k+=Math.floor(((k*i)/100)+0.5)}}if(k<0){k=0}if(k>255){k=255}return k}for(var b=0;b<h.length;b++){var e=h[b];var d=Gradient.Utils.hexaToRGB(e.color);var j=Gradient.Utils.rgbToHSL(d.red,d.green,d.blue);j.hue+=this.currentAdjustments.hue;j.hue=(((j.hue%360)+360)%360);j.sat=f(j.sat,a);j.light=f(j.light,c);var d=Gradient.Utils.hslToRGB(j.hue,j.sat,j.light);var g=Gradient.Utils.rgbToHexa(d.red,d.green,d.blue);e.color=g}this.gradientEditor.setColorStops(h)},revertGradientToPreAdjustmentState:function(){if(!this.adjustmentsMade){return}this.gradientEditor.setColorStops(this.preAdjustmentStops)},revertStops:function(c){var d=[];for(var b=c.length-1;b>=0;b--){var a=c[b];var e=100-parseInt(a.position);e+="%";a.position=e;d.push(a)}return d},onAdjustHueSaturationButtonClick:function(a){if(Element.visible(this.adjustHueSaturationPanel)){return}this.gradientEditor.showHideImportImagePanel(false);this.gradientEditor.showHideImportCSSPanel(false);Element.show(this.adjustHueSaturationPanel);this.resetAllAdjustments(true);Gradient.Utils.sendEvent("adjust","hue-sat-open")},onAdjustHueSaturationPanelOkButtonClick:function(b,a){this.resetAllAdjustments();Element.hide(this.adjustHueSaturationPanel);if(!a){Gradient.Utils.sendEvent("adjust","hue-sat-close","ok")}},onAdjustHueSaturationPanelCancelButtonClick:function(b,a){if(this.adjustmentsMade){this.revertGradientToPreAdjustmentState()}this.onAdjustHueSaturationPanelOkButtonClick(b,true);if(!a){Gradient.Utils.sendEvent("adjust","hue-sat-close","cancel")}},onReverseGradientButtonClick:function(d){var b=Gradient.Utils.deepClone(this.gradientEditor.getColorStops());var e=this.revertStops(b);var a=Gradient.Utils.deepClone(this.gradientEditor.getOpacityStops());var c=this.revertStops(a);this.gradientEditor.setAllStops(e,c);this.gradientEditor.invalidateCurrentPreset();Gradient.Utils.sendEvent("adjust","reverse")},onSliderValueChanged:function(c,b){var e=c.xValue;var d=e-this.adjustmentRanges[b].max;var a=(d>0)?"+"+d:d;this.adjustmentEditBoxElems[b].value=a;this.setGradientAdjustment(d,b)},onAdjustValueEntryBoxKeyUp:function(c,a){var b=Event.element(c);this.handleAdjustmentEntryBoxKeyEvent(b,a)},onAdjustValueEntryBoxKeyDown:function(d,a){var b=Event.element(d);var f=parseInt(b.value);if(isNaN(f)){return}var e=38;var c=40;var g=d.keyCode;if(g==e){f++}if(g==c){f--}b.value=f;this.handleAdjustmentEntryBoxKeyEvent(b,a)},onAdjustValueEntryBoxBlur:function(c,a){var b=Event.element(c);var d=b.value;if(isNaN(d)){b.value=0}this.handleAdjustmentEntryBoxKeyEvent(b,a)},handleAdjustmentEntryBoxKeyEvent:function(d,b){var e=parseInt(d.value);if(isNaN(e)){return}var c=this.adjustmentRanges[b].min;var a=this.adjustmentRanges[b].max;if(e<c){e=c}if(e>a){e=a}this.setGradientAdjustment(e,b);this.adjustmentSliderElems[b].xValue=e+a;this.adjustmentSliderElems[b].setArrowPositionFromValues();if(e>0){e="+"+e}d.value=e},};Gradient.Utils={blankURI:"data:image/gif,GIF89a%01%00%01%00%80%00%00%00%00%00%00%00%00!%F9%04%01%00%00%00%00%2C%00%00%00%00%01%00%01%00%00%02%02D%01%00%3B",dataURIEncode:function(b,a){var c=Gradient.Utils.btoa(b);return"data:"+a+";base64,"+c},decimalToHexa:function(b){b=1*b;var a=b.toString(16);if(a.length<2){a="0"+a}return a},intToPercent:function(a){return Math.floor(((a*100)/255)+0.5)},hexaToRGB:function(b){var d=b.substr(1,2);var c=b.substr(3,2);var a=b.substr(5,2);d=parseInt(d,16);c=parseInt(c,16);a=parseInt(a,16);return{red:d,green:c,blue:a}},rgbToHexa:function(e,d,a){var c=Gradient.Utils.decimalToHexa(e)+Gradient.Utils.decimalToHexa(d)+Gradient.Utils.decimalToHexa(a);c="#"+c;return c},rbgToRGBCSS:function(a){var b=a.red+","+a.green+","+a.blue;return"rgb("+b+")"},rbgAndAlphaToRGBACSS:function(a,c){var b=a.red+","+a.green+","+a.blue+","+c;return"rgba("+b+")"},rgbToHSLCSS:function(c,e){var b=Gradient.Utils.rgbToHSL(c.red,c.green,c.blue);var d=b.hue+","+Gradient.Utils.intToPercent(b.sat)+"%,"+Gradient.Utils.intToPercent(b.light)+"%";var a=(typeof e!="undefined");if(a){d+=","+e}return"hsl"+(a?"a":"")+"("+d+")"},rgbToHSL:function(a,f,i){a/=255;f/=255;i/=255;var j=Math.max(a,f,i);var d=Math.min(a,f,i);var c=(j+d)/2;var e,m;if(j==d){e=m=0}else{var k=j-d;m=k/((c>0.5)?(2-j-d):(j+d));switch(j){case a:e=(f-i)/k+(f<i?6:0);break;case f:e=(i-a)/k+2;break;case i:e=(a-f)/k+4;break}e/=6}e=Math.round(e*360);m=Math.round(m*255);c=Math.round(c*255);return{hue:e,sat:m,light:c}},hslToRGB:function(d,m,c){d/=360;m/=255;c/=255;var j=(c<=0.5)?c*(m+1):(c+m)-(c*m);var k=c*2-j;function i(g,b,l){if(l<0){l++}if(l>1){l--}if(l*6<1){return g+(b-g)*l*6}if(l*2<1){return b}if(l*3<2){return g+(b-g)*(2/3-l)*6}return g}var a=i(k,j,d+1/3);var e=i(k,j,d);var f=i(k,j,d-1/3);a=Math.round(a*255);e=Math.round(e*255);f=Math.round(f*255);return{red:a,green:e,blue:f}},rgbToHSV:function(i,h,c){var e,d,j;var a,f;a=Math.max(i,h,c);f=a-Math.min(i,h,c);d=(a==0)?0:(255*f/a);if(d==0){e=0}else{if(i==a){e=60*(h-c)/f}else{if(h==a){e=120+60*(c-i)/f}else{if(c==a){e=240+60*(i-h)/f}}}}if(e<0){e+=360}e=Math.round((e*255)/360);d=Math.round(d);j=a;return{hue:e,sat:d,val:j}},hsvToRGB:function(l,h,e){var a,k,n;var j,m,d,c,o;if(h==0){a=k=n=e}else{l=((l*359)/(255*60));h/=255;e/=255;j=Math.floor(l);m=l-j;d=e*(1-h);c=e*(1-(h*m));o=e*(1-h*(1-m));switch(j){case 0:a=e;k=o;n=d;break;case 1:a=c;k=e;n=d;break;case 2:a=d;k=e;n=o;break;case 3:a=d;k=c;n=e;break;case 4:a=o;k=d;n=e;break;default:a=e;k=d;n=c}a=Math.round(a*255);k=Math.round(k*255);n=Math.round(n*255)}return{red:a,green:k,blue:n}},deepClone:function(a){return Object.toJSON(a).evalJSON(true)},selectTextInNode:function(c){if(("getSelection" in window)&&("createRange" in document)){var b=window.getSelection();var a=document.createRange();a.selectNodeContents(c);b.removeAllRanges();b.addRange(a)}else{if(("selection" in document)&&("createTextRange" in document.body)){document.selection.empty();var a=document.body.createTextRange();a.moveToElementText(el);a.select()}}},sendEvent:function(b,d,a,c){setTimeout(function(){try{ga("send","event","ugg-"+b,d,a,c)}catch(f){}},10)}};Gradient.UIUtils={showHideLinkTrigger:function(c,a){var d=Event.element(c);var b=$$(a);if(b.length==0){return false}b[0].toggle();d.parentNode.toggleClassName("showing");return false},makeResizable:function(a,f,h){var e;var c;function g(j){Event.stop(j);var i=[Event.pointerX(j),Event.pointerY(j)];var l=[i[0]-e[0],i[1]-e[1]];var k=[c[0]+l[0],c[1]+l[1]];a.style.width=k[0]+"px";a.style.height=k[1]+"px";if(h){h(a.getWidth(),a.getHeight())}}function d(i){Event.stop(i);e=[Event.pointerX(i),Event.pointerY(i)];c=[a.getWidth(),a.getHeight()];Event.observe($$("body")[0],"mousemove",g);Event.observe($$("body")[0],"mouseup",b)}function b(i){Event.stop(i);Event.stopObserving($$("body")[0],"mousemove",g);Event.stopObserving($$("body")[0],"mouseup",b)}Event.observe(f,"mousedown",d)},};Gradient.Importer=function(){this.testElem=document.createElement("div");this.testElem.style.display="none";document.documentElement.appendChild(this.testElem);this.roundAlpha=true};Gradient.Importer.prototype={setRoundAlpha:function(a){this.roundAlpha=a},trim:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},cssSplit:function(g,e){var d=[];var a="";var f=0;for(var b=0;b<g.length;b++){var c=g.charAt(b);if(c=="("){f++}if(c==")"){f--}if((c==e)&&(f==0)){d.push(a);a=""}else{a+=c}}if(a){d.push(a)}return d},isColor:function(b){if(!b){return false}var a=this.testElem;a.style.color="inherit";a.style.color=b;return a.style.color!="inherit"},addPositionsToStopsIfNeeded:function(f){for(var b=0;b<f.length;b++){var a=f[b];if(a.position===null){if(b==0){a.position="0%"}else{if(b==(f.length-1)){a.position="100%"}else{var e=f[b-1].position;var g=f[b+1].position;var h;if(e&&g){h=Math.round((parseInt(e)+parseInt(g))/2)}else{var c=f.length-1;var d=100/c;h=Math.round(b*d)}a.position=h+"%"}}}}return f},parseRGBCSSColor:function(i){if(!i){return null}var c=i.replace(/rgba?/,"");c=c.replace(/[() ]/g,"");var j=c.split(",");if(j.length<3){return null}var d=(j.length==4)?j[3]:1;if(this.roundAlpha){d*=100;d=Math.round(d);d/=100}d=d*1;var h=j[0];var f=j[1];var a=j[2];var e=Gradient.Utils.decimalToHexa(h)+Gradient.Utils.decimalToHexa(f)+Gradient.Utils.decimalToHexa(a);e="#"+e;return{value:e,opacity:d}},parseHSLCSSColor:function(j){if(!j){return null}var c=j.replace(/hsla?/,"");c=c.replace(/[() ]/g,"");var d=c.split(",");if(d.length<3){return null}var f=(d.length==4)?d[3]:1;if(this.roundAlpha){f*=100;f=Math.round(f);f/=100}f=f*1;var e=d[0];var i=parseInt(d[1])*255/100;var b=parseInt(d[2])*255/100;var g=Gradient.Utils.hslToRGB(e,i,b);var a=Gradient.Utils.decimalToHexa(g.red)+Gradient.Utils.decimalToHexa(g.green)+Gradient.Utils.decimalToHexa(g.blue);a="#"+a;return{value:a,opacity:f}},resolveColor:function(c){if(!this.isColor(c)){return null}var d=this.testElem;d.style.color="inherit";d.style.color=c;var b=document.defaultView.getComputedStyle(d,null);var a=b.color;var e=null;if(a=="transparent"){if(c.match(/rgba/)){e=this.parseRGBCSSColor(c)}else{if(c.match(/hsla/)){e=this.parseHSLCSSColor(c)}}}else{e=this.parseRGBCSSColor(a)}return e},parseStopCSSMozilla:function(d){d=this.trim(d);var a=null;var b=d;var e=d.split(" ");if(e.length>1){var c=e[e.length-1];if(c.match(/^ *[0-9]+% *$|/)){a=this.trim(c);b=this.trim(e.slice(0,-1).join(" "))}}b=this.resolveColor(b);if(!b){b={color:null,opacity:null}}return{color:b.value,opacity:b.opacity,position:a}},parseCSSMozilla:function(e,a){var g=this.cssSplit(e,",");if(g.length<2){return null}for(var c=0;c<a;c++){var f=this.trim(g[0]);var b=this.parseStopCSSMozilla(f);if(!this.isColor(b.color)){g=g.slice(1)}else{break}}var d=[];for(var c=0;c<g.length;c++){var b=this.parseStopCSSMozilla(g[c]);if(!b){return null}d.push(b)}this.addPositionsToStopsIfNeeded(d);return{stops:d}},parseStopCSSWebkit:function(d){d=d.replace(/ /g,"");d=d.replace(/from\(/,"color-stop(0.0,");d=d.replace(/to\(/,"color-stop(1.0,");var b=d.match(/color-stop\((.+)\)/);if(!b){return null}var e=b[1];var f=this.cssSplit(e,",");if(f.length<2){return null}var a=f[0];if(a.indexOf("%")==-1){a=Math.round(a*100);a=a+"%"}var c=f[1];c=this.resolveColor(c);if(!c){c={color:null,opacity:null}}return{color:c.value,opacity:c.opacity,position:a}},parseCSSWebkit:function(g,d){var h=this.cssSplit(g,",");if(h.length<4){return null}var f=this.trim(h[0]);var c=this.trim(h[1]);h=h.slice(d);var e=[];for(var b=0;b<h.length;b++){var a=this.parseStopCSSWebkit(h[b]);if(!a){return null}e.push(a)}return{stops:e,startPoint:f,endPoint:c}},parseCSSIE:function(g){var f=null;var b=null;var d=g.split(",");for(var e=0;e<d.length;e++){var a=d[e];if(result=a.match(/startColorstr *= *'?([^']*)'?/i)){f=result[1].toLowerCase()}else{if(result=a.match(/endColorstr *= *'?([^']*)'?/i)){b=result[1].toLowerCase()}}}if(!f||!b){return null}var j=1;var c=1;if(f.length==9){j=f.substr(1,2);j=Math.round((parseInt(j,16)/255)*100)/100;f="#"+f.substr(3)}if(b.length==9){c=b.substr(1,2);c=Math.round((parseInt(c,16)/255)*100)/100;b="#"+b.substr(3)}var h=[{color:f,opacity:j,position:"0%"},{color:b,opacity:c,position:"100%"},];return{stops:h}},parseCSS:function(a){var b=null;a=a.replace(/[\n\r]/g,"");a=a.replace(/[;]/g,"\n");if(result=a.match(/linear-gradient *\((.+)\)/)){b=this.parseCSSMozilla(result[1],1)}else{if(result=a.match(/-webkit-gradient *\( *linear *, *(.+)\)/)){b=this.parseCSSWebkit(result[1],2)}else{if(result=a.match(/progid:DXImageTransform.Microsoft.gradient *\((.+)\)/)){b=this.parseCSSIE(result[1])}else{if(result=a.match(/radial-gradient *\((.+)\)/)){b=this.parseCSSMozilla(result[1],2)}else{if(result=a.match(/-webkit-gradient *\( *radial *, *(.+)\)/)){b=this.parseCSSWebkit(result[1],4)}}}}}if(!b){return null}if(b&&Gradient.StopUtils.gradientHasOpacity(b)){b=Gradient.StopUtils.splitStopsIntoColorAndOpacity(b)}else{b=Gradient.StopUtils.extractColorOnlyStops(b);b.opacityStops=null}return b},};Gradient.UserPresets={get:function(){var a=ColorZilla.LocalStorage.get("user-gradient-presets",null);if(!a){return[]}a=a.evalJSON(true);for(var b=0;b<a.length;b++){a[b].uniqueID=b}return a},persist:function(a){var b=Object.toJSON(a);return ColorZilla.LocalStorage.set("user-gradient-presets",b)}}
/* base-64 URL encoder/decoder from webtoolkit
         http://www.webtoolkit.info/javascript-base64.html 
         http://creativecommons.org/licenses/by/2.0/uk/
     */
;Gradient.Utils.btoa=function(d){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a="";var l,j,g,k,h,f,e;var c=0;while(c<d.length){l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a=a+b.charAt(k)+b.charAt(h)+b.charAt(f)+b.charAt(e)}return a};Gradient.StopsHandler=function(c,e){this.gradientEditor=e.gradientEditor;this.gradientControl=e.gradientControl;this.gradientPanelElem=e.gradientPanelElem;this.gradientMarkersContainerElem=e.gradientMarkersContainerElem;this.gradientMarkerDeleterElem=e.gradientMarkerDeleterElem;this.stopDetailsPanel=e.stopDetailsPanel;this.onStopActivatedCallback=e.onStopActivatedCallback;this.type=c;this.stopDetailsColorPanel=null;this.opacityValueElem=null;if(this.type=="color"){this.stopDetailsColorPanel=this.gradientControl.select(".stop-details .color")[0];this.stopDetailsColorPanel.observe("click",this.onStopDetailsColorPanelClick.bind(this))}else{this.opacityValueElem=this.gradientControl.select(".stop-details .opacity-value")[0];this.opacityValueElem.observe("keyup",this.onOpacityDetailsEntryBoxKeyUp.bind(this));this.opacityValueElem.observe("keydown",this.onOpacityDetailsEntryBoxKeyDown.bind(this));this.opacityValueElem.observe("blur",this.onOpacityDetailsEntryBoxBlur.bind(this));this.opacityAdjustOpenButtonElem=this.gradientControl.select(".stop-details .opacity-adjust-open-button")[0];this.opacityAdjustOpenButtonElem.observe("click",this.onOpacityAdjustOpenButtonClick.bind(this))}this.stopDetailsPositionEntryBox=this.stopDetailsPanel.select(".position")[0];this.stopDetailsDeleteButton=this.stopDetailsPanel.select(".delete-button button")[0];this.setDisableStopDetailsPanel(true);this.onGradientControlMouseUpHandler=this.onGradientControlMouseUp.bind(this);this.onGradientControlMouseMoveHandler=this.onGradientControlMouseMove.bind(this);this.onStopMarkerDeleterMouseOverHandler=this.onStopMarkerDeleterMouseOver.bind(this);this.stopDetailsDeleteButton.observe("click",this.onStopDetailsDeleteButtonClick.bind(this));this.stopDetailsPositionEntryBox.observe("keyup",this.onStopDetailsPositionEntryBoxKeyUp.bind(this));this.stopDetailsPositionEntryBox.observe("keydown",this.onStopDetailsPositionEntryBoxKeyDown.bind(this));this.stopDetailsPositionEntryBox.observe("blur",this.onStopDetailsPositionEntryBoxBlur.bind(this));this.gradientMarkersContainerElem.observe("click",this.onGradientMarkersContainerClick.bind(this));this.activeStopMarkerElem=null;this.draggingStopMarkerElem=null;this.opacityStopAdjustContainerElem=null;if(this.type=="opacity"){this.defaultStops=[{opacity:1,position:"0%"},{opacity:1,position:"100%"},];this.stops=Gradient.Utils.deepClone(this.defaultStops);var d=Gradient.Utils.blankURI;this.opacityStopAdjustContainerElem=$$(".opacity-stop-adjust-container")[0];this.transparentScreen=$("transparent-screen");var a=this.opacityStopAdjustContainerElem.select(".opacity-slider-container")[0];var b=this.opacityStopAdjustContainerElem.select(".opacity-slider-bar")[0];this.opacityAdjustSlider=new Refresh.Web.Slider(b,{xMinValue:1,xMaxValue:100,yMinValue:1,yMaxValue:1,arrowImage:d},a);this.onDocumentClickToHideOpacityPanelHandler=this.onDocumentClickToHideOpacityPanel.bind(this);this.opacityAdjustSlider.onValuesChanged=this.onOpacityAdjustSliderValueChanged.bind(this)}this.lastUsedOpacity=1};Gradient.StopsHandler.prototype={setStops:function(b,a){this.stops=b;this.setActiveStopMakerElemAndUpdateDetailsPanel(null);if((typeof a!="undefined")&&a){this.gradientEditor.updateAllUI()}},getStops:function(){return this.stops},getStopPositionFromMouseEvent:function(c){var b=Element.cumulativeOffset(this.gradientMarkersContainerElem)[0];var d=c-b;var a=Math.round((d*100)/this.gradientEditor.gradientPanelElemWidth);a=a+"%";return a},updateStopMarkers:function(){var c=this.stops;for(var b=0;b<c.length;b++){var a=this.gradientMarkersContainerElem.select(".stop-marker-"+b);if(a.length==0){this.createStopMarker(b)}this.updateStopMarker(b,this.getStopValue(c[b]),c[b].position)}this.removeUnusedMarkers()},updateStopMarker:function(e,c,a){a=parseInt(a);var b=this.findStopMarkerElemByIndex(e);var d=Math.round(((this.gradientEditor.gradientPanelElemWidth*a)/100)-5.5);b.style.left=d+"px";if(this.type=="color"){b.select(".color")[0].style.background=c;b.setAttribute("color",c)}else{b.select(".color")[0].style.background=this.opacityToStopColor(c);b.setAttribute("stop-opacity",c)}b.setAttribute("position",a);b.setAttribute("imarker",e)},removeUnusedMarkers:function(){var a=this.gradientMarkersContainerElem.select(".stop-marker");for(var c=0;c<a.length;c++){var b=a[c];var d=b.getAttribute("imarker");if(d>=this.stops.length){b.parentNode.removeChild(b)}}},opacityToStopColor:function(a){var b=255-Math.round(a*255);return Gradient.Utils.rgbToHexa(b,b,b)},createStopMarker:function(c){var a=document.createElement("div");a.className="stop-marker stop-marker-"+c;var b=document.createElement("div");b.className="color";a.appendChild(b);this.gradientMarkersContainerElem.appendChild(a);Element.extend(a);a.observe("mousedown",this.onStopMarkerMouseDown.bind(this));a.observe("dblclick",this.onStopMarkerDoubleClick.bind(this));a.setAttribute("title",this.type=="color"?"Color stop":"Opacity stop")},setActiveStopMakerElem:function(a){if(this.activeStopMarkerElem){this.activeStopMarkerElem.removeClassName("active")}this.activeStopMarkerElem=a;if(this.activeStopMarkerElem){this.activeStopMarkerElem.addClassName("active");if(this.type=="color"){this.gradientEditor.lastUsedColor=this.activeStopMarkerElem.getAttribute("color")}else{this.lastUsedOpacity=this.activeStopMarkerElem.getAttribute("stop-opacity")}}},setActiveStopMakerElemAndUpdateDetailsPanel:function(b){if(b&&this.onStopActivatedCallback){this.onStopActivatedCallback(this.type)}this.setActiveStopMakerElem(b);if(b){this.setDisableStopDetailsPanel(false);if(this.stopDetailsColorPanel){this.stopDetailsColorPanel.style.background=b.getAttribute("color");this.stopDetailsPositionEntryBox.focus()}else{if(this.opacityValueElem){var a=b.getAttribute("stop-opacity");this.opacityValueElem.value=Math.round(a*100);this.opacityValueElem.select();this.opacityValueElem.focus()}}this.stopDetailsPositionEntryBox.value=b.getAttribute("position");if(this.type=="color"){this.stopDetailsPositionEntryBox.select()}}else{this.setDisableStopDetailsPanel(true)}},getActiveStopMarkerElemIndex:function(){if(this.activeStopMarkerElem){return this.activeStopMarkerElem.getAttribute("imarker")}else{return null}},getDraggingStopMarkerElemIndex:function(){if(this.draggingStopMarkerElem){return this.draggingStopMarkerElem.getAttribute("imarker")}else{return null}},deleteStop:function(c){this.gradientEditor.invalidateCurrentPreset();var a=this.findStopMarkerElemByIndex(c);a.parentNode.removeChild(a);var d=[];for(var b=0;b<this.stops.length;b++){if(b!=c){d.push(this.stops[b])}}this.setStops(d,true);this.setActiveStopMakerElemAndUpdateDetailsPanel(null)},sortStopsByPosition:function(){function a(e,c){var d=parseInt(e.position);var f=parseInt(c.position);return d-f}this.stops.sort(a)},getStopValue:function(a){return(this.type=="color")?a.color:a.opacity},findStopIndexByPositionAndValue:function(d,c){d=parseInt(d);for(var b=0;b<this.stops.length;b++){var a=this.getStopValue(this.stops[b]);if((parseInt(this.stops[b].position)==d)&&(a==c)){return b}}return null},findStopMarkerElemByIndex:function(a){return this.gradientMarkersContainerElem.select(".stop-marker-"+a)[0]},changeActiveStopValue:function(a){var b=this.getActiveStopMarkerElemIndex();if(b===null){return}if(this.stopDetailsColorPanel){this.stopDetailsColorPanel.style.background=a}else{if(this.opacityValueElem){}}if(this.type=="color"){this.stops[b].color=a}else{this.stops[b].opacity=a}this.gradientEditor.updateAllUI()},updateStopPosition:function(b,a){this.stops[b].position=a;var c=this.getStopValue(this.stops[b]);this.sortStopsByPosition();this.gradientEditor.invalidateCurrentPreset();this.gradientEditor.updateAllUI();var e=this.findStopIndexByPositionAndValue(a,c);var d=this.findStopMarkerElemByIndex(e);this.setActiveStopMakerElem(d);if(this.draggingStopMarkerElem){this.draggingStopMarkerElem=d}},setDisableStopDetailsPanel:function(a){if(a){this.stopDetailsPanel.addClassName("disabled");this.stopDetailsPositionEntryBox.value="";this.stopDetailsPositionEntryBox.setAttribute("disabled","true");this.stopDetailsDeleteButton.setAttribute("disabled","true");if(this.stopDetailsColorPanel){this.stopDetailsColorPanel.style.background="#efefef"}else{if(this.opacityValueElem){this.opacityValueElem.value="";this.opacityValueElem.setAttribute("disabled","true");this.opacityAdjustOpenButtonElem.addClassName("disabled")}}}else{this.stopDetailsPanel.removeClassName("disabled");this.stopDetailsPositionEntryBox.removeAttribute("disabled");if(this.stops.length>2){this.stopDetailsDeleteButton.removeAttribute("disabled")}else{this.stopDetailsDeleteButton.setAttribute("disabled","true")}if(this.opacityValueElem){this.opacityValueElem.removeAttribute("disabled");this.opacityAdjustOpenButtonElem.removeClassName("disabled")}}},showOpacityStopAdjustPanel:function(a,d,b){this.transparentScreen.show();var c=$$("body")[0].getHeight();this.transparentScreen.style.height=c+"px";this.opacityStopAdjustContainerElem.show();this.opacityStopAdjustContainerElem.style.left=a+"px";this.opacityStopAdjustContainerElem.style.top=d+"px";this.opacityAdjustSlider.xValue=Math.round(b*100);this.opacityAdjustSlider.setArrowPositionFromValues();document.observe("mousedown",this.onDocumentClickToHideOpacityPanelHandler)},hideOpacityStopAdjustPanel:function(){this.transparentScreen.hide();this.opacityStopAdjustContainerElem.hide();document.stopObserving("mousedown",this.onDocumentClickToHideOpacityPanelHandler)},opacityStopAdjustPanelIsVisible:function(){return this.opacityStopAdjustContainerElem&&this.opacityStopAdjustContainerElem.visible()},registerDraggingEvents:function(){this.gradientControl.observe("mouseup",this.onGradientControlMouseUpHandler);this.gradientControl.observe("mousemove",this.onGradientControlMouseMoveHandler);this.gradientMarkerDeleterElem.observe("mouseover",this.onStopMarkerDeleterMouseOverHandler);this.gradientPanelElem.observe("mouseover",this.onStopMarkerDeleterMouseOverHandler)},unregisterDraggingEvents:function(){this.gradientControl.stopObserving("mouseup",this.onGradientControlMouseUpHandler);this.gradientControl.stopObserving("mousemove",this.onGradientControlMouseMoveHandler);this.gradientMarkerDeleterElem.stopObserving("mouseover",this.onStopMarkerDeleterMouseOverHandler);this.gradientPanelElem.stopObserving("mouseover",this.onStopMarkerDeleterMouseOverHandler)},onStopMarkerMouseDown:function(b){Event.stop(b);var a=Event.element(b);if(!a.hasClassName("stop-marker")){a=a.up(".stop-marker")}this.setActiveStopMakerElemAndUpdateDetailsPanel(a);this.draggingStopMarkerElem=a;this.registerDraggingEvents()},onGradientControlMouseUp:function(a){this.draggingStopMarkerElem=null;this.unregisterDraggingEvents();if(this.type=="color"){this.stopDetailsPositionEntryBox.select()}},onGradientControlMouseMove:function(c){if(!this.draggingStopMarkerElem){return}Event.stop(c);var d=Event.pointerX(c);var b=this.getStopPositionFromMouseEvent(d);var a=parseInt(b);if((a<0)||(a>100)){return}var e=this.getDraggingStopMarkerElemIndex();this.updateStopPosition(e,b);this.stopDetailsPositionEntryBox.value=parseInt(b)},onStopMarkerDeleterMouseOver:function(b){var a=Event.element(b);if(this.draggingStopMarkerElem){if(this.stops.length>2){var c=this.getDraggingStopMarkerElemIndex();this.deleteStop(c)}this.draggingStopMarkerElem=null;this.unregisterDraggingEvents()}},onStopDetailsDeleteButtonClick:function(a){if(this.activeStopMarkerElem){if(this.stops.length>2){var b=this.getActiveStopMarkerElemIndex();this.deleteStop(b)}this.setActiveStopMakerElemAndUpdateDetailsPanel(null)}},handleStopDetailsPositionEntryBoxKeyEvent:function(b){var c=parseInt(b.value);if(isNaN(c)){return}if(c<0){c=0}if(c>100){c=100}b.value=c;if(this.activeStopMarkerElem){var d=this.getActiveStopMarkerElemIndex();var a=c;this.updateStopPosition(d,a+"%")}},onStopDetailsPositionEntryBoxKeyUp:function(b){var a=Event.element(b);this.handleStopDetailsPositionEntryBoxKeyEvent(a)},onStopDetailsPositionEntryBoxKeyDown:function(c){var a=Event.element(c);var e=parseInt(a.value);if(isNaN(e)){return}var d=38;var b=40;var f=c.keyCode;if(f==d){e++}if(f==b){e--}a.value=e;this.handleStopDetailsPositionEntryBoxKeyEvent(a)},onStopDetailsPositionEntryBoxBlur:function(b){var a=Event.element(b);var d=parseInt(a.value);if(isNaN(d)&&this.activeStopMarkerElem){var e=this.getActiveStopMarkerElemIndex();var c=this.stops[e].position;a.value=parseInt(c)}},handleOpacityDetailsEntryBoxKeyEvent:function(a){var b=parseInt(a.value);if(isNaN(b)){return}if(b<0){b=0}if(b>100){b=100}a.value=b;if(this.activeStopMarkerElem){var c=b/100;this.changeActiveStopValue(c);this.lastUsedOpacity=c}},onOpacityDetailsEntryBoxKeyUp:function(b){var a=Event.element(b);this.handleOpacityDetailsEntryBoxKeyEvent(a)},onOpacityDetailsEntryBoxKeyDown:function(c){var a=Event.element(c);var a=Event.element(c);var e=parseInt(a.value);if(isNaN(e)){return}var d=38;var b=40;var f=c.keyCode;if(f==d){e++}if(f==b){e--}a.value=e;this.handleOpacityDetailsEntryBoxKeyEvent(a)},onOpacityDetailsEntryBoxBlur:function(c){var b=Event.element(c);var d=parseInt(b.value);if(isNaN(d)&&this.activeStopMarkerElem){var e=this.getActiveStopMarkerElemIndex();var a=this.stops[e].opacity;b.value=Math.round(a*100)}},onStopDetailsColorPanelClick:function(c){if(!this.activeStopMarkerElem){return}var a=Event.element(c);var d=Event.pointerX(c);var b=Event.pointerY(c);this.gradientEditor.openColorPicker(d,b)},onStopMarkerDoubleClick:function(b){var a=Event.element(b);if(this.type=="color"){this.gradientEditor.openColorPicker()}else{var c=a.cumulativeOffset();this.showOpacityStopAdjustPanel(c[0]+6,c[1]-35,this.lastUsedOpacity)}},onOpacityAdjustOpenButtonClick:function(b){if(!this.activeStopMarkerElem){return}var a=Event.element(b);var c=a.cumulativeOffset();this.showOpacityStopAdjustPanel(c[0]+10,c[1]-10,this.lastUsedOpacity)},onDocumentClickToHideOpacityPanel:function(b){if(!this.opacityStopAdjustPanelIsVisible()){return}Event.stop(b);var a=Event.element(b);if(a.hasClassName("opacity-stop-adjust-container")||a.up(".opacity-stop-adjust-container")){return}this.hideOpacityStopAdjustPanel()},onOpacityAdjustSliderValueChanged:function(){var a=this.opacityAdjustSlider.xValue;var b=a/100;if(this.activeStopMarkerElem){this.changeActiveStopValue(b);this.lastUsedOpacity=b;this.opacityValueElem.value=a}},onGradientMarkersContainerClick:function(d){var c=Event.element(d);if(c!=this.gradientMarkersContainerElem){return}var f=Event.pointerX(d);var a=this.getStopPositionFromMouseEvent(f);var g;var b;if(this.type=="color"){g=this.gradientEditor.lastUsedColor;b={color:g,position:a}}else{g=this.lastUsedOpacity;b={opacity:g,position:a}}this.stops.push(b);this.sortStopsByPosition();this.gradientEditor.updateAllUI();var h=this.findStopIndexByPositionAndValue(a,g);var e=this.findStopMarkerElemByIndex(h);this.setActiveStopMakerElemAndUpdateDetailsPanel(e)},};Gradient.StopUtils={interpolateStopsProperty:function(n,m,r,b){var d=parseInt(n.position);var l=parseInt(m.position);var g=r;var i=l-d;var j=g-d;var f=j/i;var a=1-f;if(b=="color"){var p=Gradient.Utils.hexaToRGB(n.color);var c=Gradient.Utils.hexaToRGB(m.color);var e=Math.round(p.red*a+c.red*f);var h=Math.round(p.green*a+c.green*f);var k=Math.round(p.blue*a+c.blue*f);return{red:e,green:h,blue:k}}else{var q=n.opacity;var o=m.opacity;return Math.round((q*a+o*f)*100)/100}},interpolateStopsColor:function(e,c,b,d){var a=Gradient.StopUtils.interpolateStopsProperty(e,c,b,"color");if((typeof d==="undefined")||(d=="hex")){return Gradient.Utils.rgbToHexa(a.red,a.green,a.blue)}return a},interpolateStopsOpacity:function(c,b,a){return Gradient.StopUtils.interpolateStopsProperty(c,b,a,"opacity")},getColorForOpacityOnlyStop:function(k,f,b,c){var e=k;var a=null;for(var d=e+1;d<f.length;d++){if("color" in b[f[d]]){a=b[f[d]];break}}var g=null;for(var d=e-1;d>=0;d--){if("color" in b[f[d]]){g=b[f[d]];break}}if(!g){g=a}if(!a){a=g}var h=g.color;if(g!=a){h=Gradient.StopUtils.interpolateStopsColor(g,a,parseInt(f[k]),c)}return h},getOpacityForColorOnlyStop:function(h,c,g){var e=h;var b=null;for(var d=e+1;d<c.length;d++){if("opacity" in g[c[d]]){b=g[c[d]];break}}var a=null;for(var d=e-1;d>=0;d--){if("opacity" in g[c[d]]){a=g[c[d]];break}}if(!a){a=b}if(!b){b=a}var f=a.opacity;if(a!=b){var f=Gradient.StopUtils.interpolateStopsOpacity(a,b,parseInt(c[h]))}return f},mergeStops:function(d,c){var k=Gradient.Utils.deepClone(d);var g=Gradient.Utils.deepClone(c);k=k.concat(g);function a(n,i){var m=parseInt(n.position);var o=parseInt(i.position);return m-o}k.sort(a);var f=[];var b={};for(var e=0;e<k.length;e++){var j=k[e];var h=j.position;if(!(h in b)){f.push(h);b[h]={position:h}}if("color" in j){b[h].color=j.color}if("opacity" in j){b[h].opacity=j.opacity}}var l=[];for(var e=0;e<f.length;e++){var j=b[f[e]];if(!("color" in j)){j.color=Gradient.StopUtils.getColorForOpacityOnlyStop(e,f,b,"hex")}if(!("opacity" in j)){j.opacity=Gradient.StopUtils.getOpacityForColorOnlyStop(e,f,b)}l.push(j)}return l},extractStopByType:function(a,b){if(b=="color"){return{position:a.position,color:a.color}}else{if(b=="opacity"){return{position:a.position,opacity:a.opacity}}}return null},splitStopsIntoColorAndOpacity:function(k){var m=k.stops;if(m.length<2){return null}var a=[];var e=[];for(var c=1;c<m.length-1;c++){var j=m[c];var f=m[c-1];var l=m[c+1];var b=Gradient.Utils.hexaToRGB(j.color);var n=Gradient.StopUtils.interpolateStopsColor(f,l,parseInt(j.position),"rgb");var o=n.red;var d=n.green;var g=n.blue;var h=Gradient.StopUtils.interpolateStopsOpacity(f,l,parseInt(j.position));if((Math.abs(o-b.red)>1)||(Math.abs(d-b.green)>1)||(Math.abs(g-b.blue)>1)){a.push(Gradient.StopUtils.extractStopByType(j,"color"))}if(Math.abs(h-(Math.round(j.opacity*100)/100))>0.05){e.push(Gradient.StopUtils.extractStopByType(j,"opacity"))}}if(a.length==0){a=[Gradient.StopUtils.extractStopByType(m[0],"color"),Gradient.StopUtils.extractStopByType(m[m.length-1],"color")]}else{if(m[0].color!=a[0].color){a.unshift(Gradient.StopUtils.extractStopByType(m[0],"color"))}if(m[m.length-1].color!=a[a.length-1].color){a.push(Gradient.StopUtils.extractStopByType(m[m.length-1],"color"))}}if(e.length==0){e=[Gradient.StopUtils.extractStopByType(m[0],"opacity"),Gradient.StopUtils.extractStopByType(m[m.length-1],"opacity")]}else{if(m[0].opacity!=e[0].opacity){e.unshift(Gradient.StopUtils.extractStopByType(m[0],"opacity"))}if(m[m.length-1].opacity!=e[e.length-1].opacity){e.push(Gradient.StopUtils.extractStopByType(m[m.length-1],"opacity"))}}k.stops=Gradient.Utils.deepClone(a);k.opacityStops=Gradient.Utils.deepClone(e);return k},gradientHasOpacity:function(c){if(!c){return false}if(!c.stops){return false}for(var b=0;b<c.stops.length;b++){var a=c.stops[b];if(("opacity" in a)&&(a.opacity!=1)){return true}}return false},extractColorOnlyStops:function(b){if(!b){return}if(!b.stops){return}for(var a=0;a<b.stops.length;a++){b.stops[a]=Gradient.StopUtils.extractStopByType(b.stops[a],"color")}return b},};/*
ColorPicker
Copyright (c) 2007 John Dyer (http://johndyer.name)
MIT style license
*/
if(!window.Refresh){Refresh={}}if(!Refresh.Web){Refresh.Web={}}Refresh.Web.Color=function(b){var a={r:0,g:0,b:0,h:0,s:0,v:0,hex:"",setRgb:function(e,d,c){this.r=e;this.g=d;this.b=c;var f=Refresh.Web.ColorMethods.rgbToHsv(this);this.h=f.h;this.s=f.s;this.v=f.v;this.hex=Refresh.Web.ColorMethods.rgbToHex(this)},setHsv:function(e,d,c){this.h=e;this.s=d;this.v=c;var f=Refresh.Web.ColorMethods.hsvToRgb(this);this.r=f.r;this.g=f.g;this.b=f.b;this.hex=Refresh.Web.ColorMethods.rgbToHex(f)},setHex:function(c){this.hex=c;var e=Refresh.Web.ColorMethods.hexToRgb(this.hex);this.r=e.r;this.g=e.g;this.b=e.b;var d=Refresh.Web.ColorMethods.rgbToHsv(e);this.h=d.h;this.s=d.s;this.v=d.v}};if(b){if("hex" in b){a.setHex(b.hex)}else{if("r" in b){a.setRgb(b.r,b.g,b.b)}else{if("h" in b){a.setHsv(b.h,b.s,b.v)}}}}return a};Refresh.Web.ColorMethods={hexToRgb:function(e){e=this.validateHex(e);var d="00",c="00",a="00";if(e.length==6){d=e.substring(0,2);c=e.substring(2,4);a=e.substring(4,6)}else{if(e.length>4){d=e.substring(4,e.length);e=e.substring(0,4)}if(e.length>2){c=e.substring(2,e.length);e=e.substring(0,2)}if(e.length>0){a=e.substring(0,e.length)}}return{r:this.hexToInt(d),g:this.hexToInt(c),b:this.hexToInt(a)}},validateHex:function(a){a=new String(a).toUpperCase();a=a.replace(/[^A-F0-9]/g,"0");if(a.length>6){a=a.substring(0,6)}return a},webSafeDec:function(a){a=Math.round(a/51);a*=51;return a},hexToWebSafe:function(e){var d,c,a;if(e.length==3){d=e.substring(0,1);c=e.substring(1,1);a=e.substring(2,1)}else{d=e.substring(0,2);c=e.substring(2,4);a=e.substring(4,6)}return intToHex(this.webSafeDec(this.hexToInt(d)))+this.intToHex(this.webSafeDec(this.hexToInt(c)))+this.intToHex(this.webSafeDec(this.hexToInt(a)))},rgbToWebSafe:function(a){return{r:this.webSafeDec(a.r),g:this.webSafeDec(a.g),b:this.webSafeDec(a.b)}},rgbToHex:function(a){return this.intToHex(a.r)+this.intToHex(a.g)+this.intToHex(a.b)},intToHex:function(b){var a=(parseInt(b).toString(16));if(a.length==1){a=("0"+a)}return a.toUpperCase()},hexToInt:function(a){return(parseInt(a,16))},rgbToHsv:function(d){var h=d.r/255;var f=d.g/255;var c=d.b/255;hsv={h:0,s:0,v:0};var e=0;var a=0;if(h>=f&&h>=c){a=h;e=(f>c)?c:f}else{if(f>=c&&f>=h){a=f;e=(h>c)?c:h}else{a=c;e=(f>h)?h:f}}hsv.v=a;hsv.s=(a)?((a-e)/a):0;if(!hsv.s){hsv.h=0}else{delta=a-e;if(h==a){hsv.h=(f-c)/delta}else{if(f==a){hsv.h=2+(c-h)/delta}else{hsv.h=4+(h-f)/delta}}hsv.h=parseInt(hsv.h*60);if(hsv.h<0){hsv.h+=360}}hsv.s=parseInt(hsv.s*100);hsv.v=parseInt(hsv.v*100);return hsv},hsvToRgb:function(e){rgb={r:0,g:0,b:0};var d=e.h;var l=e.s;var j=e.v;if(l==0){if(j==0){rgb.r=rgb.g=rgb.b=0}else{rgb.r=rgb.g=rgb.b=parseInt(j*255/100)}}else{if(d==360){d=0}d/=60;l=l/100;j=j/100;var c=parseInt(d);var g=d-c;var b=j*(1-l);var a=j*(1-(l*g));var k=j*(1-(l*(1-g)));switch(c){case 0:rgb.r=j;rgb.g=k;rgb.b=b;break;case 1:rgb.r=a;rgb.g=j;rgb.b=b;break;case 2:rgb.r=b;rgb.g=j;rgb.b=k;break;case 3:rgb.r=b;rgb.g=a;rgb.b=j;break;case 4:rgb.r=k;rgb.g=b;rgb.b=j;break;case 5:rgb.r=j;rgb.g=b;rgb.b=a;break}rgb.r=parseInt(rgb.r*255);rgb.g=parseInt(rgb.g*255);rgb.b=parseInt(rgb.b*255)}return rgb},normalizeHex:function(a){return this.rgbToHex(this.hexToRgb(a))}};/*
ColorPicker
Copyright (c) 2007 John Dyer (http://johndyer.name)
MIT style license
*/
if(!window.Refresh){Refresh={}}if(!Refresh.Web){Refresh.Web={}}Refresh.Web.ColorValuePicker=Class.create();Refresh.Web.ColorValuePicker.prototype={initialize:function(a){this.id=a;this.onValuesChanged=null;this._hueInput=$(this.id+"_Hue");this._valueInput=$(this.id+"_Brightness");this._saturationInput=$(this.id+"_Saturation");this._redInput=$(this.id+"_Red");this._greenInput=$(this.id+"_Green");this._blueInput=$(this.id+"_Blue");this._hexInput=$(this.id+"_Hex");this._event_onHsvKeyUp=this._onHsvKeyUp.bindAsEventListener(this);this._event_onHsvBlur=this._onHsvBlur.bindAsEventListener(this);this._event_onRgbKeyUp=this._onRgbKeyUp.bindAsEventListener(this);this._event_onRgbBlur=this._onRgbBlur.bindAsEventListener(this);this._event_onHexKeyUp=this._onHexKeyUp.bindAsEventListener(this);Event.observe(this._hueInput,"keyup",this._event_onHsvKeyUp);Event.observe(this._valueInput,"keyup",this._event_onHsvKeyUp);Event.observe(this._saturationInput,"keyup",this._event_onHsvKeyUp);Event.observe(this._hueInput,"blur",this._event_onHsvBlur);Event.observe(this._valueInput,"blur",this._event_onHsvBlur);Event.observe(this._saturationInput,"blur",this._event_onHsvBlur);Event.observe(this._redInput,"keyup",this._event_onRgbKeyUp);Event.observe(this._greenInput,"keyup",this._event_onRgbKeyUp);Event.observe(this._blueInput,"keyup",this._event_onRgbKeyUp);Event.observe(this._redInput,"blur",this._event_onRgbBlur);Event.observe(this._greenInput,"blur",this._event_onRgbBlur);Event.observe(this._blueInput,"blur",this._event_onRgbBlur);Event.observe(this._hexInput,"keyup",this._event_onHexKeyUp);this.color=new Refresh.Web.Color();if(this._hexInput.value!=""){this.color.setHex(this._hexInput.value)}this._hexInput.value=this.color.hex;this._redInput.value=this.color.r;this._greenInput.value=this.color.g;this._blueInput.value=this.color.b;this._hueInput.value=this.color.h;this._saturationInput.value=this.color.s;this._valueInput.value=this.color.v},_onHsvKeyUp:function(a){if(a.target.value==""){return}this.validateHsv(a);this.setValuesFromHsv();if(this.onValuesChanged){this.onValuesChanged(this)}},_onRgbKeyUp:function(a){if(a.target.value==""){return}this.validateRgb(a);this.setValuesFromRgb();if(this.onValuesChanged){this.onValuesChanged(this)}},_onHexKeyUp:function(a){if(a.target.value==""){return}this.validateHex(a);this.setValuesFromHex();if(this.onValuesChanged){this.onValuesChanged(this)}},_onHsvBlur:function(a){if(a.target.value==""){this.setValuesFromRgb()}},_onRgbBlur:function(a){if(a.target.value==""){this.setValuesFromHsv()}},HexBlur:function(a){if(a.target.value==""){this.setValuesFromHsv()}},validateRgb:function(a){if(!this._keyNeedsValidation(a)){return a}this._redInput.value=this._setValueInRange(this._redInput.value,0,255);this._greenInput.value=this._setValueInRange(this._greenInput.value,0,255);this._blueInput.value=this._setValueInRange(this._blueInput.value,0,255)},validateHsv:function(a){if(!this._keyNeedsValidation(a)){return a}this._hueInput.value=this._setValueInRange(this._hueInput.value,0,359);this._saturationInput.value=this._setValueInRange(this._saturationInput.value,0,100);this._valueInput.value=this._setValueInRange(this._valueInput.value,0,100)},validateHex:function(b){if(!this._keyNeedsValidation(b)){return b}var a=new String(this._hexInput.value).toUpperCase();if(a.substr(0,1)=="#"){a=a.substring(1)}a=a.replace(/[^A-F0-9]/g,"0");if(a.length>6){a=a.substring(0,6)}this._hexInput.value=a},_keyNeedsValidation:function(a){if(a.keyCode==9||a.keyCode==16||a.keyCode==38||a.keyCode==29||a.keyCode==40||a.keyCode==37||(a.ctrlKey&&(a.keyCode=="c".charCodeAt()||a.keyCode=="v".charCodeAt()))){return false}return true},_setValueInRange:function(c,b,a){if(c==""||isNaN(c)){return b}c=parseInt(c);if(c>a){return a}if(c<b){return b}return c},setValuesFromRgb:function(){this.color.setRgb(this._redInput.value,this._greenInput.value,this._blueInput.value);this._hexInput.value=this.color.hex;this._hueInput.value=this.color.h;this._saturationInput.value=this.color.s;this._valueInput.value=this.color.v},setValuesFromHsv:function(){this.color.setHsv(this._hueInput.value,this._saturationInput.value,this._valueInput.value);this._hexInput.value=this.color.hex;this._redInput.value=this.color.r;this._greenInput.value=this.color.g;this._blueInput.value=this.color.b},setValuesFromHex:function(){this.color.setHex(this._hexInput.value);this._redInput.value=this.color.r;this._greenInput.value=this.color.g;this._blueInput.value=this.color.b;this._hueInput.value=this.color.h;this._saturationInput.value=this.color.s;this._valueInput.value=this.color.v}};/*
ColorPicker
Copyright (c) 2007 John Dyer (http://johndyer.name)
MIT style license
*/
if(!window.Refresh){Refresh={}}if(!Refresh.Web){Refresh.Web={}}Refresh.Web.SlidersList=[];Refresh.Web.DefaultSliderSettings={xMinValue:0,xMaxValue:100,yMinValue:0,yMaxValue:100,arrowImage:"images/rangearrows.gif"};Refresh.Web.Slider=Class.create();Refresh.Web.Slider.prototype={_container:null,_bar:null,_arrow:null,initialize:function(d,b,a){this.id=d;this.settings=Object.extend(Object.extend({},Refresh.Web.DefaultSliderSettings),b||{});this.xValue=0;this.yValue=0;this._bar=$(this.id);this._arrow=document.createElement("img");this._arrow.border=0;this._arrow.src=this.settings.arrowImage;this._arrow.margin=0;this._arrow.padding=0;this._arrow.style.position="absolute";this._arrow.style.zIndex="5";this._arrow.style.top="0px";this._arrow.style.left="0px";if(a){a.appendChild(this._arrow);this._container=a}else{document.body.appendChild(this._arrow)}var c=this;this.setPositioningVariables();this._event_docMouseMove=this._docMouseMove.bindAsEventListener(this);this._event_docMouseUp=this._docMouseUp.bindAsEventListener(this);this._event_docMouseOut=this._docMouseOut.bindAsEventListener(this);Event.observe(this._bar,"mousedown",this._bar_mouseDown.bindAsEventListener(this));Event.observe(this._arrow,"mousedown",this._arrow_mouseDown.bindAsEventListener(this));this.setArrowPositionFromValues();if(this.onValuesChanged){this.onValuesChanged(this)}Refresh.Web.SlidersList.push(this)},setPositioningVariables:function(){this._barWidth=this._bar.getWidth();this._barHeight=this._bar.getHeight();var a=this._bar.cumulativeOffset();this._barTop=a.top;this._barLeft=a.left;this._barBottom=this._barTop+this._barHeight;this._barRight=this._barLeft+this._barWidth;this._arrow=$(this._arrow);this._arrowWidth=this._arrow.getWidth();this._arrowHeight=this._arrow.getHeight();this.MinX=this._barLeft;this.MinY=this._barTop;this.MaxX=this._barRight;this.MinY=this._barBottom},setArrowPositionFromValues:function(g){this.setPositioningVariables();var b=0;var a=0;if(this.settings.xMinValue!=this.settings.xMaxValue){if(this.xValue==this.settings.xMinValue){b=0}else{if(this.xValue==this.settings.xMaxValue){b=this._barWidth-1}else{var h=this.settings.xMaxValue;if(this.settings.xMinValue<1){h=h+Math.abs(this.settings.xMinValue)+1}var d=this.xValue;if(this.xValue<1){d=d+1}b=d/h*this._barWidth;if(parseInt(b)==(h-1)){b=h}else{b=parseInt(b)}if(this.settings.xMinValue<1){b=b-Math.abs(this.settings.xMinValue)-1}}}}if(this.settings.yMinValue!=this.settings.yMaxValue){if(this.yValue==this.settings.yMinValue){a=0}else{if(this.yValue==this.settings.yMaxValue){a=this._barHeight-1}else{var f=this.settings.yMaxValue;if(this.settings.yMinValue<1){f=f+Math.abs(this.settings.yMinValue)+1}var c=this.yValue;if(this.yValue<1){c=c+1}var a=c/f*this._barHeight;if(parseInt(a)==(f-1)){a=f}else{a=parseInt(a)}if(this.settings.yMinValue<1){a=a-Math.abs(this.settings.yMinValue)-1}}}}this._setArrowPosition(b,a)},_setArrowPosition:function(a,d){if(a<0){a=0}if(a>this._barWidth){a=this._barWidth}if(d<0){d=0}if(d>this._barHeight){d=this._barHeight}if(!this._container){var c=this._barLeft+a;var b=this._barTop+d}else{var c=a;var b=d}if(this._arrowWidth>this._barWidth){c=c-(this._arrowWidth/2-this._barWidth/2)}else{c=c-parseInt(this._arrowWidth/2)}if(this._arrowHeight>this._barHeight){b=b-(this._arrowHeight/2-this._barHeight/2)}else{b=b-parseInt(this._arrowHeight/2)}this._arrow.style.left=c+"px";this._arrow.style.top=b+"px"},_bar_mouseDown:function(a){this._mouseDown(a)},_arrow_mouseDown:function(a){this._mouseDown(a)},_mouseDown:function(a){Refresh.Web.ActiveSlider=this;this.setValuesFromMousePosition(a);Event.observe(document,"mousemove",this._event_docMouseMove);Event.observe(document,"mouseup",this._event_docMouseUp);Event.observe(document,"mouseout",this._event_docMouseOut);Event.stop(a)},_docMouseOut:function(a){if(a.target.tagName=="HTML"){this._docMouseUp(a)}},_docMouseMove:function(a){this.setValuesFromMousePosition(a);Event.stop(a)},_docMouseUp:function(a){Event.stopObserving(document,"mouseup",this._event_docMouseUp);Event.stopObserving(document,"mousemove",this._event_docMouseMove);Event.stopObserving(document,"mouseout",this._event_docMouseOut);Event.stop(a)},setValuesFromMousePosition:function(g){this.setPositioningVariables();var a=Event.pointer(g);var d=0;var b=0;if(a.x<this._barLeft){d=0}else{if(a.x>this._barRight){d=this._barWidth}else{d=a.x-this._barLeft+1}}if(a.y<this._barTop){b=0}else{if(a.y>this._barBottom){b=this._barHeight}else{b=a.y-this._barTop+1}}var f=parseInt(d/this._barWidth*this.settings.xMaxValue);var c=parseInt(b/this._barHeight*this.settings.yMaxValue);this.xValue=f;this.yValue=c;if(this.settings.xMaxValue==this.settings.xMinValue){d=0}if(this.settings.yMaxValue==this.settings.yMinValue){b=0}this._setArrowPosition(d,b);if(this.onValuesChanged){this.onValuesChanged(this)}}};/*
ColorPicker
Copyright (c) 2007 John Dyer (http://johndyer.name)
MIT style license
*/
if(!window.Refresh){Refresh={}}if(!Refresh.Web){Refresh.Web={}}Refresh.Web.DefaultColorPickerSettings={startMode:"h",startHex:"ff0000",clientFilesPath:"images/"};Refresh.Web.ColorPicker=Class.create();Refresh.Web.ColorPicker.prototype={initialize:function(d,b){this.id=d;this.settings=Object.extend(Object.extend({},Refresh.Web.DefaultColorPickerSettings),b||{});this._hueRadio=$(this.id+"_HueRadio");this._saturationRadio=$(this.id+"_SaturationRadio");this._valueRadio=$(this.id+"_BrightnessRadio");this._redRadio=$(this.id+"_RedRadio");this._greenRadio=$(this.id+"_GreenRadio");this._blueRadio=$(this.id+"_BlueRadio");this._hueRadio.value="h";this._saturationRadio.value="s";this._valueRadio.value="v";this._redRadio.value="r";this._greenRadio.value="g";this._blueRadio.value="b";this._event_onRadioClicked=this._onRadioClicked.bindAsEventListener(this);Event.observe(this._hueRadio,"click",this._event_onRadioClicked);Event.observe(this._saturationRadio,"click",this._event_onRadioClicked);Event.observe(this._valueRadio,"click",this._event_onRadioClicked);Event.observe(this._redRadio,"click",this._event_onRadioClicked);Event.observe(this._greenRadio,"click",this._event_onRadioClicked);Event.observe(this._blueRadio,"click",this._event_onRadioClicked);this._preview=$(this.id+"_Preview");this._mapBase=$(this.id+"_ColorMap");this._mapBase.style.width="256px";this._mapBase.style.height="256px";this._mapBase.style.padding=0;this._mapBase.style.margin=0;this._mapBase.style.border="solid 1px #000";this._mapBase.style.position="relative";this._mapL1=new Element("img",{src:this.settings.clientFilesPath+"blank.gif",width:256,height:256});this._mapL1.style.margin="0px";this._mapL1.style.display="block";this._mapBase.appendChild(this._mapL1);this._mapL2=new Element("img",{src:this.settings.clientFilesPath+"blank.gif",width:256,height:256});this._mapBase.appendChild(this._mapL2);this._mapL2.style.clear="both";this._mapL2.style.margin="-256px 0px 0px 0px";this._mapL2.setOpacity(0.5);this._mapL2.style.display="block";this._bar=$(this.id+"_ColorBar");this._bar.style.width="20px";this._bar.style.height="256px";this._bar.style.padding=0;this._bar.style.margin="0px 10px";this._bar.style.border="solid 1px #000";this._bar.style.position="relative";this._barL1=new Element("img",{src:this.settings.clientFilesPath+"blank.gif",width:20,height:256});this._barL1.style.margin="0px";this._barL1.style.display="block";this._bar.appendChild(this._barL1);this._barL2=new Element("img",{src:this.settings.clientFilesPath+"blank.gif",width:20,height:256});this._barL2.style.margin="-256px 0px 0px 0px";this._barL2.style.display="block";this._bar.appendChild(this._barL2);this._barL3=new Element("img",{src:this.settings.clientFilesPath+"blank.gif",width:20,height:256});this._barL3.style.margin="-256px 0px 0px 0px";this._barL3.style.backgroundColor="#ff0000";this._barL3.style.display="block";this._bar.appendChild(this._barL3);this._barL4=new Element("img",{src:this.settings.clientFilesPath+"bar-brightness.png",width:20,height:256});this._barL4.style.margin="-256px 0px 0px 0px";this._barL4.style.display="block";this._bar.appendChild(this._barL4);this._map=new Refresh.Web.Slider(this._mapL2,{xMaxValue:255,yMinValue:255,arrowImage:this.settings.clientFilesPath+"mappoint.gif"},this._mapBase);this._slider=new Refresh.Web.Slider(this._barL4,{xMinValue:1,xMaxValue:1,yMinValue:255,arrowImage:this.settings.clientFilesPath+"rangearrows.gif"},this._bar);this._cvp=new Refresh.Web.ColorValuePicker(this.id);var c=this;this._slider.onValuesChanged=function(){c.sliderValueChanged()};this._map.onValuesChanged=function(){c.mapValueChanged()};this._cvp.onValuesChanged=function(){c.textValuesChanged()};this.isLessThanIE7=false;var a=parseFloat(navigator.appVersion.split("MSIE")[1]);if((a<7)&&(document.body.filters)){this.isLessThanIE7=true}this.setColorMode(this.settings.startMode);if(this.settings.startHex){this._cvp._hexInput.value=this.settings.startHex}this._cvp.setValuesFromHex();this.positionMapAndSliderArrows();this.updateVisuals();this.color=null},show:function(){this._map.Arrow.style.display="";this._slider.Arrow.style.display="";this._map.setPositioningVariables();this._slider.setPositioningVariables();this.positionMapAndSliderArrows()},hide:function(){this._map.Arrow.style.display="none";this._slider.Arrow.style.display="none"},_onRadioClicked:function(a){this.setColorMode(a.target.value)},_onWebSafeClicked:function(a){this.setColorMode(this.ColorMode)},textValuesChanged:function(){this.positionMapAndSliderArrows();this.updateVisuals()},setColorMode:function(b){this.color=this._cvp.color;function a(d,c){d.setAlpha(c,100);c.style.backgroundColor="";c.src=d.settings.clientFilesPath+"blank.gif";c.style.filter=""}a(this,this._mapL1);a(this,this._mapL2);a(this,this._barL1);a(this,this._barL2);a(this,this._barL3);a(this,this._barL4);this._hueRadio.checked=false;this._saturationRadio.checked=false;this._valueRadio.checked=false;this._redRadio.checked=false;this._greenRadio.checked=false;this._blueRadio.checked=false;switch(b){case"h":this._hueRadio.checked=true;this._mapL1.style.backgroundColor="#"+Refresh.Web.ColorMethods.normalizeHex(this.color.hex);this._mapL2.style.backgroundColor="transparent";this.setImg(this._mapL2,this.settings.clientFilesPath+"map-hue.png");this.setAlpha(this._mapL2,100);this.setImg(this._barL4,this.settings.clientFilesPath+"bar-hue.png");this._map.settings.xMaxValue=100;this._map.settings.yMaxValue=100;this._slider.settings.yMaxValue=359;break;case"s":this._saturationRadio.checked=true;this.setImg(this._mapL1,this.settings.clientFilesPath+"map-saturation.png");this.setImg(this._mapL2,this.settings.clientFilesPath+"map-saturation-overlay.png");this.setAlpha(this._mapL2,0);this.setBG(this._barL3,this.color.hex);this.setImg(this._barL4,this.settings.clientFilesPath+"bar-saturation.png");this._map.settings.xMaxValue=359;this._map.settings.yMaxValue=100;this._slider.settings.yMaxValue=100;break;case"v":this._valueRadio.checked=true;this.setBG(this._mapL1,"000");this.setImg(this._mapL2,this.settings.clientFilesPath+"map-brightness.png");this._barL3.style.backgroundColor="#"+Refresh.Web.ColorMethods.normalizeHex(this.color.hex);this.setImg(this._barL4,this.settings.clientFilesPath+"bar-brightness.png");this._map.settings.xMaxValue=359;this._map.settings.yMaxValue=100;this._slider.settings.yMaxValue=100;break;case"r":this._redRadio.checked=true;this.setImg(this._mapL2,this.settings.clientFilesPath+"map-red-max.png");this.setImg(this._mapL1,this.settings.clientFilesPath+"map-red-min.png");this.setImg(this._barL4,this.settings.clientFilesPath+"bar-red-tl.png");this.setImg(this._barL3,this.settings.clientFilesPath+"bar-red-tr.png");this.setImg(this._barL2,this.settings.clientFilesPath+"bar-red-br.png");this.setImg(this._barL1,this.settings.clientFilesPath+"bar-red-bl.png");break;case"g":this._greenRadio.checked=true;this.setImg(this._mapL2,this.settings.clientFilesPath+"map-green-max.png");this.setImg(this._mapL1,this.settings.clientFilesPath+"map-green-min.png");this.setImg(this._barL4,this.settings.clientFilesPath+"bar-green-tl.png");this.setImg(this._barL3,this.settings.clientFilesPath+"bar-green-tr.png");this.setImg(this._barL2,this.settings.clientFilesPath+"bar-green-br.png");this.setImg(this._barL1,this.settings.clientFilesPath+"bar-green-bl.png");break;case"b":this._blueRadio.checked=true;this.setImg(this._mapL2,this.settings.clientFilesPath+"map-blue-max.png");this.setImg(this._mapL1,this.settings.clientFilesPath+"map-blue-min.png");this.setImg(this._barL4,this.settings.clientFilesPath+"bar-blue-tl.png");this.setImg(this._barL3,this.settings.clientFilesPath+"bar-blue-tr.png");this.setImg(this._barL2,this.settings.clientFilesPath+"bar-blue-br.png");this.setImg(this._barL1,this.settings.clientFilesPath+"bar-blue-bl.png");break;default:alert("invalid mode");break}switch(b){case"h":case"s":case"v":this._map.settings.xMinValue=1;this._map.settings.yMinValue=1;this._slider.settings.yMinValue=1;break;case"r":case"g":case"b":this._map.settings.xMinValue=0;this._map.settings.yMinValue=0;this._slider.settings.yMinValue=0;this._map.settings.xMaxValue=255;this._map.settings.yMaxValue=255;this._slider.settings.yMaxValue=255;break}this.ColorMode=b;this.positionMapAndSliderArrows();this.updateMapVisuals();this.updateSliderVisuals()},mapValueChanged:function(){switch(this.ColorMode){case"h":this._cvp._saturationInput.value=this._map.xValue;this._cvp._valueInput.value=100-this._map.yValue;break;case"s":this._cvp._hueInput.value=this._map.xValue;this._cvp._valueInput.value=100-this._map.yValue;break;case"v":this._cvp._hueInput.value=this._map.xValue;this._cvp._saturationInput.value=100-this._map.yValue;break;case"r":this._cvp._blueInput.value=this._map.xValue;this._cvp._greenInput.value=256-this._map.yValue;break;case"g":this._cvp._blueInput.value=this._map.xValue;this._cvp._redInput.value=256-this._map.yValue;break;case"b":this._cvp._redInput.value=this._map.xValue;this._cvp._greenInput.value=256-this._map.yValue;break}switch(this.ColorMode){case"h":case"s":case"v":this._cvp.setValuesFromHsv();break;case"r":case"g":case"b":this._cvp.setValuesFromRgb();break}this.updateVisuals()},sliderValueChanged:function(){switch(this.ColorMode){case"h":this._cvp._hueInput.value=360-this._slider.yValue;break;case"s":this._cvp._saturationInput.value=100-this._slider.yValue;break;case"v":this._cvp._valueInput.value=100-this._slider.yValue;break;case"r":this._cvp._redInput.value=255-this._slider.yValue;break;case"g":this._cvp._greenInput.value=255-this._slider.yValue;break;case"b":this._cvp._blueInput.value=255-this._slider.yValue;break}switch(this.ColorMode){case"h":case"s":case"v":this._cvp.setValuesFromHsv();break;case"r":case"g":case"b":this._cvp.setValuesFromRgb();break}this.updateVisuals()},positionMapAndSliderArrows:function(){this.color=this._cvp.color;var b=0;switch(this.ColorMode){case"h":b=360-this.color.h;break;case"s":b=100-this.color.s;break;case"v":b=100-this.color.v;break;case"r":b=255-this.color.r;break;case"g":b=255-this.color.g;break;case"b":b=255-this.color.b;break}this._slider.yValue=b;this._slider.setArrowPositionFromValues();var a=0;var c=0;switch(this.ColorMode){case"h":a=this.color.s;c=100-this.color.v;break;case"s":a=this.color.h;c=100-this.color.v;break;case"v":a=this.color.h;c=100-this.color.s;break;case"r":a=this.color.b;c=256-this.color.g;break;case"g":a=this.color.b;c=256-this.color.r;break;case"b":a=this.color.r;c=256-this.color.g;break}this._map.xValue=a;this._map.yValue=c;this._map.setArrowPositionFromValues()},updateVisuals:function(){this.updatePreview();this.updateMapVisuals();this.updateSliderVisuals();if(this.updateColorZilla){this.updateColorZilla()}},updatePreview:function(){try{this._preview.style.backgroundColor="#"+Refresh.Web.ColorMethods.normalizeHex(this._cvp.color.hex)}catch(a){}},updateMapVisuals:function(){this.color=this._cvp.color;switch(this.ColorMode){case"h":var a=new Refresh.Web.Color({h:this.color.h,s:100,v:100});this.setBG(this._mapL1,a.hex);break;case"s":this.setAlpha(this._mapL2,100-this.color.s);break;case"v":this.setAlpha(this._mapL2,this.color.v);break;case"r":this.setAlpha(this._mapL2,this.color.r/256*100);break;case"g":this.setAlpha(this._mapL2,this.color.g/256*100);break;case"b":this.setAlpha(this._mapL2,this.color.b/256*100);break}},updateSliderVisuals:function(){this.color=this._cvp.color;switch(this.ColorMode){case"h":break;case"s":var a=new Refresh.Web.Color({h:this.color.h,s:100,v:this.color.v});this.setBG(this._barL3,a.hex);break;case"v":var e=new Refresh.Web.Color({h:this.color.h,s:this.color.s,v:100});this.setBG(this._barL3,e.hex);break;case"r":case"g":case"b":var h=0;var c=0;if(this.ColorMode=="r"){h=this._cvp._blueInput.value;c=this._cvp._greenInput.value}else{if(this.ColorMode=="g"){h=this._cvp._blueInput.value;c=this._cvp._redInput.value}else{if(this.ColorMode=="b"){h=this._cvp._redInput.value;c=this._cvp._greenInput.value}}}var b=(h/256)*100;var d=(c/256)*100;var g=((256-h)/256)*100;var f=((256-c)/256)*100;this.setAlpha(this._barL4,(d>g)?g:d);this.setAlpha(this._barL3,(d>b)?b:d);this.setAlpha(this._barL2,(f>b)?b:f);this.setAlpha(this._barL1,(f>g)?g:f);break}},setBG:function(a,d){try{a.style.backgroundColor="#"+Refresh.Web.ColorMethods.normalizeHex(d)}catch(b){}},setImg:function(a,b){if(b.indexOf("png")&&this.isLessThanIE7){a.pngSrc=b;a.src=this.settings.clientFilesPath+"blank.gif";a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"');"}else{a.src=b}},setAlpha:function(b,a){if(this.isLessThanIE7){var c=b.pngSrc;if(c!=null&&c.indexOf("map-hue")==-1){b.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"') progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")"}}else{b.setOpacity(a/100)}}};/* Simple Set Clipboard System
    Author: Joseph Huckaby
*/
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(!a.addClass){a.hide=function(){this.style.display="none"};a.show=function(){this.style.display=""};a.addClass=function(b){this.removeClass(b);this.className+=" "+b};a.removeClass=function(d){var e=this.className.split(/\s+/);var b=-1;for(var c=0;c<e.length;c++){if(e[c]==d){b=c;c=e.length}}if(b>-1){e.splice(b,1);this.className=e.join(" ")}return this};a.hasClass=function(b){return !!this.className.match(new RegExp("\\s*"+b+"\\s*"))}}return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(d,b,c){var a=this.clients[d];if(a){a.receiveEvent(b,c)}},register:function(b,a){this.clients[b]=a},getDOMObjectPosition:function(c,a){var b={left:0,top:0,width:c.width?c.width:c.offsetWidth,height:c.height?c.height:c.offsetHeight};while(c&&(c!=a)){b.left+=c.offsetLeft;b.top+=c.offsetTop;c=c.offsetParent}return b},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);if(a){this.glue(a)}}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:"",handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(d,b,e){this.domElement=ZeroClipboard.$(d);var f=99;if(this.domElement.style.zIndex){f=parseInt(this.domElement.style.zIndex,10)+1}if(typeof(b)=="string"){b=ZeroClipboard.$(b)}else{if(typeof(b)=="undefined"){b=document.getElementsByTagName("body")[0]}}var c=ZeroClipboard.getDOMObjectPosition(this.domElement,b);this.div=document.createElement("div");var a=this.div.style;a.position="absolute";a.left=""+c.left+"px";a.top=""+c.top+"px";a.width=""+c.width+"px";a.height=""+c.height+"px";a.zIndex=f;if(typeof(e)=="object"){for(addedStyle in e){a[addedStyle]=e[addedStyle]}}b.appendChild(this.div);this.div.innerHTML=this.getHTML(c.width,c.height)},getHTML:function(d,a){var c="";var b="id="+this.id+"&width="+d+"&height="+a;if(navigator.userAgent.match(/MSIE/)){var e=location.href.match(/^https/i)?"https://":"http://";c+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+d+'" height="'+a+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+b+'"/><param name="wmode" value="transparent"/></object>'}else{c+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+d+'" height="'+a+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+b+'" wmode="transparent" />'}return c},hide:function(){if(this.div){this.div.style.left="-2000px"}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.domElement=null;this.div=null}},reposition:function(c){if(c){this.domElement=ZeroClipboard.$(c);if(!this.domElement){this.hide()}}if(this.domElement&&this.div){var b=ZeroClipboard.getDOMObjectPosition(this.domElement);var a=this.div.style;a.left=""+b.left+"px";a.top=""+b.top+"px"}},setText:function(a){this.clipText=a;if(this.ready){this.movie.setText(a)}},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");if(!this.handlers[a]){this.handlers[a]=[]}this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;if(this.ready){this.movie.setHandCursor(a)}},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(d,e){d=d.toString().toLowerCase().replace(/^on/,"");switch(d){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;setTimeout(function(){c.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;this.movie.setText(this.clipText);this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":if(this.domElement&&this.cssEffects){this.domElement.addClass("hover");if(this.recoverActive){this.domElement.addClass("active")}}break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}this.domElement.removeClass("hover")}break;case"mousedown":if(this.domElement&&this.cssEffects){this.domElement.addClass("active")}break;case"mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[d]){for(var b=0,a=this.handlers[d].length;b<a;b++){var f=this.handlers[d][b];if(typeof(f)=="function"){f(this,e)}else{if((typeof(f)=="object")&&(f.length==2)){f[0][f[1]](this,e)}else{if(typeof(f)=="string"){window[f](this,e)}}}}}}};/*
Copyright (c) Copyright (c) 2007, Carl S. Yestrau All rights reserved.
Code licensed under the BSD License: http://www.featureblend.com/license.txt
Version: 1.0.4
*/
var FlashDetect=new function(){var a=this;a.installed=false;a.raw="";a.major=-1;a.minor=-1;a.revision=-1;a.revisionStr="";var b=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(h){return d(h)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(k){var h="6,0,21";try{k.AllowScriptAccess="always";h=d(k)}catch(j){}return h}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(h){return d(h)}}];var d=function(k){var h=-1;try{h=k.GetVariable("$version")}catch(j){}return h};var g=function(h){var k=-1;try{k=new ActiveXObject(h)}catch(j){k={activeXError:true}}return k};var c=function(j){var h=j.split(",");return{raw:j,major:parseInt(h[0].split(" ")[1],10),minor:parseInt(h[1],10),revision:parseInt(h[2],10),revisionStr:h[2]}};var f=function(l){var j=l.split(/ +/);var k=j[2].split(/\./);var h=j[3];return{raw:l,major:parseInt(k[0],10),minor:parseInt(k[1],10),revisionStr:h,revision:e(h)}};var e=function(h){return parseInt(h.replace(/[a-zA-Z]/g,""),10)||a.revision};a.majorAtLeast=function(h){return a.major>=h};a.minorAtLeast=function(h){return a.minor>=h};a.revisionAtLeast=function(h){return a.revision>=h};a.versionAtLeast=function(j){var k=[a.major,a.minor,a.revision];var h=Math.min(k.length,arguments.length);for(i=0;i<h;i++){if(k[i]>=arguments[i]){if(i+1<h&&k[i]==arguments[i]){continue}else{return true}}else{return false}}};a.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var l="application/x-shockwave-flash";var k=navigator.mimeTypes;if(k&&k[l]&&k[l].enabledPlugin&&k[l].enabledPlugin.description){var h=k[l].enabledPlugin.description;var m=f(h);a.raw=m.raw;a.major=m.major;a.minor=m.minor;a.revisionStr=m.revisionStr;a.revision=m.revision;a.installed=true}}else{if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var h=-1;for(var j=0;j<b.length&&h==-1;j++){var n=g(b[j].name);if(!n.activeXError){a.installed=true;h=b[j].version(n);if(h!=-1){var m=c(h);a.raw=m.raw;a.major=m.major;a.minor=m.minor;a.revision=m.revision;a.revisionStr=m.revisionStr}}}}}}()};FlashDetect.JS_RELEASE="1.0.4";